{"version":3,"sources":["assets/youtube.svg","assets/soundcloud.png","assets/twitch.svg","assets/dropbox.png","assets/vimeo.svg","assets/streamable.png","assets/wistia.svg","assets/dailymotion.svg","assets/vidyard.svg","services/auth.ts","views/Auth.tsx","utils/request.ts","stores/folder.ts","components/Hint.tsx","stores/sequences.ts","stores/videos.ts","stores/playlists.ts","components/Dashboard/MenuFolderCount.tsx","components/Dashboard/MenuFolder.tsx","components/Dashboard/Path.tsx","components/Dashboard/MenuItem.tsx","components/Modal.tsx","forms/Folder.tsx","forms/Video.tsx","forms/Playlist.tsx","forms/New.tsx","forms/SelectFolder.tsx","forms/Share.tsx","forms/Replay.tsx","components/Profile.tsx","components/Dashboard/DashboardHeader.tsx","components/Dashboard/Menu.tsx","components/Dashboard/DirectoryItem.tsx","components/Dashboard/Directory.tsx","stores/playlist_items.ts","components/Dashboard/Player.tsx","components/Dashboard/ListActions.tsx","components/Dashboard/ListSelection.tsx","components/Dashboard/ListList.tsx","utils/itemsToPlaylistItems.ts","components/Dashboard/List.tsx","views/Dashboard.tsx","utils/secondsToTime.ts","components/Sequencer/Tagger.tsx","components/Sequencer/SequencerListHeader.tsx","components/Sequencer/SequencerVideo.tsx","components/Sequencer/SequencerList.tsx","components/Sequencer/SequencerHeader.tsx","components/Sequencer/SequencerControls.tsx","components/Sequencer/SequencerActions.tsx","views/Sequencer.tsx","views/Landing.tsx","components/Viewer/PlaylistViewer.tsx","components/Viewer/VideoViewer.tsx","components/Viewer/SequenceViewer.tsx","views/Viewer.tsx","views/404.tsx","views/403.tsx","views/Impressum.tsx","views/Datenschutz.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","AUTH","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","initFirebase","a","firebase","console","log","register","email","password","createUserWithEmailAndPassword","login","signInWithEmailAndPassword","currentUser","getIdToken","idToken","localStorage","setItem","setGlobalState","logout","signOut","removeItem","Auth","match","params","type","push","history","useState","values","setValues","loading","setLoading","error","setError","handleChange","target","name","value","handleSubmit","e","preventDefault","className","onSubmit","capitalize","onChange","placeholder","alt","disabled","to","APIS","folders","videos","playlists","sequences","viewer","payment","request","api","path","options","url","fetch","headers","authorization","getItem","FOLDERS","DIRECTORY_TYPES","PLAYLIST","VIDEO","SEQUENCE","getFolders","res","json","data","postFolder","body","method","JSON","stringify","text","id","getGlobalState","patchFolder","newFolder","folder","map","f","deleteFolder","filter","showHint","msg","hints","setTimeout","h","closeHint","closest","Hint","useGlobalState","length","onClick","SEQUENCES","moveSequences","folderId","ids","p","includes","addFolder","getSequences","postSequence","start","Number","stop","i","patchSequence","s","deleteSequences","targetId","sequence","find","status","alert","VIDEOS","moveVideos","getVideo","video","getVideos","postVideo","label","patchVideo","v","deleteVideo","PLAYLISTS","movePlaylists","getPlaylists","postPlaylist","patchPlaylist","deletePlaylist","MenuFolderCount","items","count","useMemo","handleDragStart","directory","classList","dataTransfer","setData","MenuFolder","handleOpenFolder","handleSelectFolder","handleDrop","openFolders","selectedFolder","selectedDirectory","childFolders","open","selected","getItemsCount","onDrop","onDragOver","draggable","onDragStart","stopPropagation","MODAL","component","props","key","getPath","parentFolder","Path","setSelectedFolder","playlistOpen","setPlaylistOpen","toLowerCase","dropFolderId","dropFolder","parse","getData","dragFolderId","dragFolder","isOutOfPath","every","MenuItem","setSelectedDirectory","rootFolders","toUpperCase","INITIAL_CONFIG","COMPONENTS","FOLDER","closeModal","setLabel","deletable","reduce","prev","curr","Array","from","Set","handleDelete","window","confirm","folderLabel","setUrl","keywords","setKeywords","keyword","setKeyword","folderName","setFolderName","useEffect","usedPlaylistVideoIds","videoIds","split","usedSequenceVideoIds","videoId","VIDEO_DETECTED","ReactPlayer","canPlay","k","word","w","setItems","item","NEW","SELECTFOLDER","onSelect","selectedFolderId","SHARE","navigator","clipboard","writeText","REPLAY","onReplay","PROFILE","useHistory","handleLogout","Modal","modal","setModal","onClose","Object","keys","document","style","overflow","contains","SelectedComponent","renderComponent","Header","menuOpen","setMenuOpen","addEventListener","onFocus","removeEventListener","readText","addUrl","add","handlePaste","data-active","Menu","DirectoryItem","handleSelect","handleEdit","onShare","handleKeywordClick","data-selected","handleShare","Directory","selectedPlaylists","setSelectedPlaylists","selectedVideos","setSelectedVideos","selectedSequences","setSelectedSequences","labelSort","setLabelSort","itemId","playlist","urls","newUrls","sortedItems","copy","sort","b","nameA","nameB","allSelected","targetSelection","setSelection","localSelection","index","PLAYER_COUNT","openPlayer","Player","playing","setPlaying","playerReady","setPlayerReady","maximized","setMaximized","player","useRef","lastUrl","startPlayer","current","seekTo","undefined","height","width","pip","ref","onReady","onProgress","playedSeconds","event","CustomEvent","detail","dispatchEvent","onPlayerEnd","controls","ListActions","move","up","nextItem","currentIndex","findIndex","_","handleAdd","ListSelection","activePlaylist","selectedItems","updatedItems","selection","handlePlayerDone","itemIndex","ListList","filteredItems","setSelectedItems","arrangeItems","position","arrangeTarget","draggedTarget","el","handleDragEnd","remove","handleDragEnter","handleDragLeave","handleDragOver","getBoundingClientRect","y","before","clientY","dragIndex","dataset","dropIndex","down","notSame","Math","abs","arrangedItems","onDragEnd","onDragEnter","onDragLeave","data-index","itemsToPlaylistItems","Playlist","setActivePlaylist","search","setSearch","pItems","addSequences","useCallback","newSeqs","addVideos","newVids","addPlaylists","newItems","itemsToAdd","addVideoToPlaylist","newVideos","addSequenceToPlaylist","sequenceIds","newSequences","addPlaylistsToPlaylist","draggedItemIds","newDraggedItemIds","handleClose","getUserData","Promise","all","Dashboard","initialized","secondsToTime","secs","minutes","floor","String","ms","seconds","slice","handleControls","fastTagging","activeTime","setStop","setStart","resetTagger","editingSequence","SEQUENCER_VIDEO","handleStartClick","PLAYER_PROGRESS","time","toFixed","handleStopClick","handleDismiss","Tagger","setActiveTime","progress","ta","getElementById","focus","SequencerListHeader","filtered","ready","timeout","lastSort","SequencerVideo","selectedVideo","playbackRate","setPlaybackRate","handleProgress","playingSequences","playerState","progressInterval","SequencerList","sequenceId","activeSequenceId","setActiveSequenceId","playingSequenceIds","setEditingSequence","sortTime","setSortTime","sortLabel","setSortLabel","seekToSequence","editSequence","handleClick","clearTimeout","sortedSequences","sorted","activeIndex","nextIndex","nextId","allIds","active","editing","data-playing","data-editing","data-loading","SequencerHeader","targetFolderId","SequencerControls","SequencerActions","quickTag","setQuickTag","KEY_EVENTS","0","10","127","37","38","39","40","81","67","66","88","handleKeyPress","keyCode","ctrl","ctrlKey","Sequencer","location","q","videoSequences","platforms","youtube","require","soundcloud","twitch","dropbox","vimeo","streamable","wistia","dailymotion","vidyard","Landing","auth","src","PlaylistViewer","activeItemId","setActiveItemId","counter","setCounter","currentItem","playNext","newItem","it","onEnded","VideoViewer","handleReplay","SequenceViewer","Viewer","getPlaylist","getSequence","ErrorPage404","ErrorPage403","Impressum","href","Datenschutz","rel","App","exact","Boolean","hostname","onAuthStateChanged","user","then","prototype","this","charAt","splice","ReactDOM","render","serviceWorker","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.d537b271.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/youtube.3c00e2cf.svg\";","module.exports = __webpack_public_path__ + \"static/media/soundcloud.a9415b93.png\";","module.exports = __webpack_public_path__ + \"static/media/twitch.aec67507.svg\";","module.exports = __webpack_public_path__ + \"static/media/dropbox.bf6dfc1d.png\";","module.exports = __webpack_public_path__ + \"static/media/vimeo.599a8214.svg\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/wistia.0164db60.svg\";","module.exports = __webpack_public_path__ + \"static/media/dailymotion.d3059d87.svg\";","module.exports = __webpack_public_path__ + \"static/media/vidyard.13cacc42.svg\";","import * as firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\n\r\nimport { setGlobalState } from \"react-global-state-hook\";\r\n\r\nexport const AUTH = \"AUTH\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyB6BP4nchauDnzgyP02JY8w4HlKq-Hn0Co\",\r\n  authDomain: \"streaming-manager-dc49e.firebaseapp.com\",\r\n  databaseURL: \"https://streaming-manager-dc49e.firebaseio.com\",\r\n  projectId: \"streaming-manager-dc49e\",\r\n  storageBucket: \"streaming-manager-dc49e.appspot.com\",\r\n  messagingSenderId: \"1020740834639\",\r\n  appId: \"1:1020740834639:web:d1f9d9f36f771d1c97213a\",\r\n  measurementId: \"G-G26G4NTPC7\"\r\n};\r\n\r\nexport const getUser = () => firebase.auth().currentUser;\r\n\r\nexport const setAuthObserver = () => {\r\n  firebase.auth().onAuthStateChanged(async (user) => {\r\n    if (user) {\r\n      user.getIdToken().then(async (idToken) => {\r\n        localStorage.setItem(\"ID_TOKEN\", idToken);\r\n        setGlobalState(AUTH, true);\r\n      });\r\n    } else {\r\n      localStorage.removeItem(\"ID_TOKEN\");\r\n      setGlobalState(AUTH, false);\r\n    }\r\n  });\r\n};\r\n\r\nexport const initFirebase = async () => {\r\n  try {\r\n    // @ts-ignore\r\n    await firebase.initializeApp(firebaseConfig);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const register = async ({ email, password }) => {\r\n  try {\r\n    await firebase.auth().createUserWithEmailAndPassword(email, password);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const login = async ({ email, password }) => {\r\n  try {\r\n    await firebase.auth().signInWithEmailAndPassword(email, password);\r\n    // @ts-ignore\r\n    const idToken = await firebase.auth().currentUser.getIdToken(false);\r\n    localStorage.setItem(\"ID_TOKEN\", idToken);\r\n    setGlobalState(AUTH, true);\r\n  } catch (error) {\r\n    setGlobalState(AUTH, false);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const logout = async () => {\r\n  try {\r\n    await firebase.auth().signOut();\r\n    localStorage.removeItem(\"ID_TOKEN\");\r\n    setGlobalState(AUTH, false);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport default {\r\n  register,\r\n  login,\r\n  logout\r\n};\r\n","import React, { useState } from \"react\";\r\nimport \"./Auth.scss\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { register, login } from \"../services/auth\";\r\n\r\nexport const Auth = ({\r\n  match: {\r\n    params: { type = \"login\" }\r\n  },\r\n  history: { push }\r\n}: any) => {\r\n  const [values, setValues] = useState({ email: \"\", password: \"\" });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleChange = ({ target: { name, value } }) =>\r\n    setValues({ ...values, [name]: value });\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    if (type === \"login\") {\r\n      try {\r\n        await login(values);\r\n        push(\"/dashboard\");\r\n      } catch (error) {\r\n        setError(\"Email or password are incorrect.\");\r\n        push(\"/auth/login\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    } else {\r\n      try {\r\n        await register(values);\r\n        push(\"/auth/login\");\r\n      } catch (error) {\r\n        setError(\"Failed to register\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <main className=\"auth\">\r\n      <form\r\n        className=\"rounded grid gap-m pd-2 shadow-m\"\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <h2>{type.capitalize()}</h2>\r\n        <label className=\"form-field\">\r\n          Email\r\n          <input\r\n            type=\"email\"\r\n            value={values.email}\r\n            onChange={handleChange}\r\n            name=\"email\"\r\n            placeholder='\"something@web.com\"'\r\n            alt=\"enter your email\"\r\n          />\r\n        </label>\r\n        <label className=\"form-field\">\r\n          Password\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Aa-1****\"\r\n            alt=\"enter your password\"\r\n            value={values.password}\r\n            onChange={handleChange}\r\n            name=\"password\"\r\n          />\r\n        </label>\r\n        {error && <p className=\"error\">{error}</p>}\r\n        <button\r\n          className=\"rounded bg-grey-light pd-1010\"\r\n          disabled={loading}\r\n          type=\"submit\"\r\n        >\r\n          {loading ? \"Submitting..\" : \"Submit\"}\r\n        </button>\r\n        <Link to={type === \"login\" ? \"/auth/register\" : \"/auth/login\"}>\r\n          {type === \"login\" ? \"Register\" : \"Login\"}\r\n        </Link>\r\n      </form>\r\n    </main>\r\n  );\r\n};\r\n","const APIS =\r\n  process.env.NODE_ENV === \"development\"\r\n    ? {\r\n        folders: \"http://localhost:4000\",\r\n        videos: \"http://localhost:4001\",\r\n        playlists: \"http://localhost:4002\",\r\n        sequences: \"http://localhost:4004\",\r\n        viewer: \"http://localhost:4005\",\r\n        payments: \"http://localhost:4006\"\r\n      }\r\n    : {\r\n        folders:\r\n          \"https://us-central1-streaming-manager-dc49e.cloudfunctions.net/folder\",\r\n        videos:\r\n          \"https://us-central1-streaming-manager-dc49e.cloudfunctions.net/video\",\r\n        playlists:\r\n          \"https://us-central1-streaming-manager-dc49e.cloudfunctions.net/playlist\",\r\n        sequences:\r\n          \"https://us-central1-streaming-manager-dc49e.cloudfunctions.net/sequence\",\r\n        viewer:\r\n          \"https://us-central1-streaming-manager-dc49e.cloudfunctions.net/viewer\",\r\n        payment:\r\n          \"https://us-central1-streaming-manager-dc49e.cloudfunctions.net/payment\"\r\n      };\r\n\r\nexport const request = (api: string, path: string = \"\", options: any = {}) => {\r\n  const url = APIS[api];\r\n  // use\r\n  // const user = getUser();\r\n  // console.log(user);\r\n\r\n  return fetch(`${url}${path}`, {\r\n    ...options,\r\n    headers: {\r\n      ...options.headers,\r\n      \"Content-Type\": \"application/json\",\r\n      authorization: localStorage.getItem(\"ID_TOKEN\")\r\n    }\r\n  });\r\n};\r\n","import { request } from \"../utils/request\";\r\nimport { setGlobalState, getGlobalState } from \"react-global-state-hook\";\r\n\r\nexport const FOLDERS = \"FOLDERS\";\r\nexport const SELECTED_FOLDER = \"SELECTED_FOLDER\";\r\nexport const OPEN_FOLDERS = \"OPEN_FOLDERS\";\r\n\r\nexport const SELECTED_FOLDER_VIDEO = \"SELECTED_FOLDER_VIDEO\";\r\nexport const SELECTED_FOLDER_PLAYLIST = \"SELECTED_FOLDER_PLAYLIST\";\r\nexport const SELECTED_FOLDER_SEQUENCE = \"SELECTED_FOLDER_SEQUENCE\";\r\n\r\nexport const SELECTED_DIRECTORY = \"SELECTED_DIRECTORY\";\r\nexport const DIRECTORY_TYPES = {\r\n  PLAYLIST: \"PLAYLIST\",\r\n  VIDEO: \"VIDEO\",\r\n  SEQUENCE: \"SEQUENCE\"\r\n};\r\n\r\nsetGlobalState(FOLDERS, []);\r\nsetGlobalState(OPEN_FOLDERS, []);\r\n\r\nsetGlobalState(SELECTED_DIRECTORY, DIRECTORY_TYPES.PLAYLIST);\r\n\r\nexport const getFolders = async () => {\r\n  try {\r\n    const res = await request(\"folders\");\r\n    const data = await res.json();\r\n    setGlobalState(FOLDERS, data);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const postFolder = async (body) => {\r\n  try {\r\n    const res = await request(\"folders\", \"\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(body)\r\n    });\r\n    const id = await res.text();\r\n    const folders = getGlobalState(FOLDERS);\r\n    setGlobalState(FOLDERS, [...folders, { ...body, id }]);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const patchFolder = async ({ id, ...body }) => {\r\n  try {\r\n    await request(\"folders\", \"/\" + id, {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(body)\r\n    });\r\n    const folders = getGlobalState(FOLDERS);\r\n    let newFolder = { ...body, id, folder: body.folder };\r\n    if (body.folder === \"root\") {\r\n      delete newFolder.folder;\r\n    }\r\n    console.log(newFolder);\r\n\r\n    setGlobalState(\r\n      FOLDERS,\r\n      folders.map(({ folder, ...f }) =>\r\n        f.id === id ? { ...f, ...newFolder } : { ...f, folder }\r\n      )\r\n    );\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const deleteFolder = async (id) => {\r\n  try {\r\n    await request(\"folders\", \"/\" + id, { method: \"DELETE\" });\r\n    const folders = getGlobalState(FOLDERS);\r\n    setGlobalState(\r\n      FOLDERS,\r\n      folders.filter((f) => f.id !== id)\r\n    );\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport \"./Hint.scss\";\r\nimport {\r\n  useGlobalState,\r\n  setGlobalState,\r\n  getGlobalState\r\n} from \"react-global-state-hook\";\r\n\r\nconst HINTS = \"HINTS\";\r\n\r\nexport const showHint = (msg) => {\r\n  const hints = getGlobalState(HINTS);\r\n  setGlobalState(HINTS, [...hints, msg]);\r\n  setTimeout(() => {\r\n    const hints = getGlobalState(HINTS);\r\n    setGlobalState(\r\n      HINTS,\r\n      hints.filter((h) => h !== msg)\r\n    );\r\n  }, 3000);\r\n};\r\n\r\nconst closeHint = (e) => {\r\n  const msg = e.target.closest(\"li\").id;\r\n  const hints = getGlobalState(HINTS);\r\n  setGlobalState(\r\n    HINTS,\r\n    hints.filter((h) => h !== msg)\r\n  );\r\n};\r\n\r\nexport const Hint = () => {\r\n  const [hints] = useGlobalState(HINTS, []);\r\n\r\n  if (hints.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"hint\">\r\n      <ul className=\"grid\">\r\n        {hints.map((h) => (\r\n          <li\r\n            className=\"rounded shadow-m bg-grey-light aligned-grid pd-1311\"\r\n            id={h}\r\n          >\r\n            {h}\r\n            <i onClick={closeHint} className=\"material-icons\">\r\n              close\r\n            </i>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n","import { setGlobalState } from \"react-global-state-hook\";\r\nimport { getGlobalState } from \"react-global-state-hook\";\r\nimport { request } from \"../utils/request\";\r\n\r\nexport const SEQUENCES = \"SEQUENCES\";\r\nexport const FILTERED_SEQUENCES = \"FILTERED_SEQUENCES\";\r\nexport const SELECTED_SEQUENCES = \"SELECTED_SEQUENCES\";\r\nexport const SEQUENCER_TARGET = \"SEQUENCER_TARGET\";\r\nexport const EDITING_SEQUENCE = \"EDITING_SEQUENCE\";\r\n\r\nsetGlobalState(SEQUENCES, []);\r\nsetGlobalState(FILTERED_SEQUENCES, []);\r\nsetGlobalState(SELECTED_SEQUENCES, []);\r\nsetGlobalState(SEQUENCER_TARGET, null);\r\nsetGlobalState(EDITING_SEQUENCE, null);\r\n\r\nexport const moveSequences = async ({ folderId, ids, type }) => {\r\n  try {\r\n    await request(\"sequences\", `/moveTo/${folderId || \"root\"}`, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ ids, type })\r\n    });\r\n    const sequences = getGlobalState(SEQUENCES);\r\n    setGlobalState(\r\n      SEQUENCES,\r\n      sequences.map(({ folder, ...p }) => {\r\n        if (ids.includes(p.id)) {\r\n          const addFolder = folderId === \"root\" ? {} : { folder: folderId };\r\n          return {\r\n            ...p,\r\n            ...addFolder\r\n          };\r\n        } else {\r\n          return { ...p, folder };\r\n        }\r\n      })\r\n    );\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const getSequences = async () => {\r\n  try {\r\n    const res = await request(\"sequences\");\r\n    const data = await res.json();\r\n    setGlobalState(SEQUENCES, data);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const postSequence = async (body) => {\r\n  try {\r\n    let sequences = getGlobalState(SEQUENCES);\r\n    setGlobalState(SEQUENCES, [...sequences, body]);\r\n    const res = await request(\"sequences\", \"\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        ...body,\r\n        start: Number(body.start),\r\n        stop: Number(body.stop)\r\n      })\r\n    });\r\n    const id = await res.text();\r\n    sequences = getGlobalState(SEQUENCES);\r\n    setGlobalState(\r\n      SEQUENCES,\r\n      sequences.map((i) => {\r\n        if (!i.id && JSON.stringify(i) === JSON.stringify(body)) {\r\n          return { ...i, id };\r\n        }\r\n        return i;\r\n      })\r\n    );\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const patchSequence = async ({ id, ...body }) => {\r\n  try {\r\n    await request(\"sequences\", \"/\" + id, {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(body)\r\n    });\r\n    const sequences = getGlobalState(SEQUENCES);\r\n    setGlobalState(\r\n      SEQUENCES,\r\n      sequences.map((s) => (s.id === id ? { ...body, id } : s))\r\n    );\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const deleteSequences = async (targetId) => {\r\n  try {\r\n    const sequences = getGlobalState(SEQUENCES);\r\n    setGlobalState(\r\n      SEQUENCES,\r\n      sequences.map(({ id, ...sequence }) => {\r\n        if (id === targetId) {\r\n          return sequence;\r\n        }\r\n        return { id, ...sequence };\r\n      })\r\n    );\r\n    const { id: sequenceId, ...body } = sequences.find(\r\n      (s) => s.id === targetId\r\n    );\r\n    const res = await request(\"sequences\", \"/\" + targetId, {\r\n      method: \"DELETE\"\r\n    });\r\n    if (res.status != 403) {\r\n      const folders = getGlobalState(SEQUENCES);\r\n      setGlobalState(\r\n        SEQUENCES,\r\n        folders.filter(\r\n          (f) => f.id && JSON.stringify(f) !== JSON.stringify(body)\r\n        )\r\n      );\r\n    } else {\r\n      alert(\r\n        \"Sequences not deletable. At least one sequence is existing in at least one of your Playlist\"\r\n      );\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","import { showHint } from \"./../components/Hint\";\r\nimport { SEQUENCES } from \"./sequences\";\r\nimport { request } from \"./../utils/request\";\r\nimport { setGlobalState, getGlobalState } from \"react-global-state-hook\";\r\n\r\nexport const VIDEOS = \"VIDEOS\";\r\n\r\nsetGlobalState(VIDEOS, []);\r\n\r\nexport const moveVideos = async ({ folderId, ids, type }) => {\r\n  try {\r\n    await request(\"videos\", `/moveTo/${folderId || \"root\"}`, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ ids, type })\r\n    });\r\n    const videos = getGlobalState(VIDEOS);\r\n    setGlobalState(\r\n      VIDEOS,\r\n      videos.map(({ folder, ...p }) => {\r\n        if (ids.includes(p.id)) {\r\n          const addFolder = folderId === \"root\" ? {} : { folder: folderId };\r\n          return {\r\n            ...p,\r\n            ...addFolder\r\n          };\r\n        } else {\r\n          return { ...p, folder };\r\n        }\r\n      })\r\n    );\r\n    showHint(\"Successfully moved Videos.\");\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const getVideo = async (id) => {\r\n  try {\r\n    const res = await request(\"videos\", \"/\" + id);\r\n    const data = await res.json();\r\n    setGlobalState(VIDEOS, [data.video]);\r\n    setGlobalState(SEQUENCES, data.sequences);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const getVideos = async () => {\r\n  try {\r\n    const res = await request(\"videos\");\r\n    const data = await res.json();\r\n    setGlobalState(VIDEOS, data);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const postVideo = async (values) => {\r\n  try {\r\n    const res = await request(\"videos\", \"\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(values)\r\n    });\r\n    const id = await res.text();\r\n    const videos = getGlobalState(VIDEOS);\r\n    setGlobalState(VIDEOS, [...videos, { id, ...values }]);\r\n    showHint(`Created new Video: \"${values.label}\".`);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const patchVideo = async ({ id, ...values }) => {\r\n  try {\r\n    await request(\"videos\", \"/\" + id, {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(values)\r\n    });\r\n    const videos = getGlobalState(VIDEOS);\r\n    setGlobalState(\r\n      VIDEOS,\r\n      videos.map((v) => (v.id === id ? { id, ...v, ...values } : v))\r\n    );\r\n    showHint(`Videos \"${values.label}\" successfully updated.`);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const deleteVideo = async (id) => {\r\n  try {\r\n    await request(\"videos\", \"/\" + id, {\r\n      method: \"DELETE\"\r\n    });\r\n    const videos = getGlobalState(VIDEOS);\r\n    setGlobalState(\r\n      VIDEOS,\r\n      videos.filter((v) => v.id !== id)\r\n    );\r\n    showHint(\"Video deleted successfully.\");\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","import { VIDEOS } from \"./videos\";\r\nimport { showHint } from \"./../components/Hint\";\r\nimport { request } from \"../utils/request\";\r\nimport { setGlobalState, getGlobalState } from \"react-global-state-hook\";\r\n\r\nexport const PLAYLISTS = \"PLAYLISTS\";\r\nexport const PLAYLIST_OPEN = \"PLAYLIST_OPEN\";\r\nexport const ACTIVE_PLAYLIST = \"ACTIVE_PLAYLIST\";\r\n\r\nsetGlobalState(PLAYLISTS, []);\r\nsetGlobalState(PLAYLIST_OPEN, true);\r\nsetGlobalState(ACTIVE_PLAYLIST, null);\r\n\r\nexport const movePlaylists = async ({ folderId, ids, type }) => {\r\n  try {\r\n    await request(\"playlists\", `/moveTo/${folderId || \"root\"}`, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ ids, type })\r\n    });\r\n    const playlists = getGlobalState(PLAYLISTS);\r\n    setGlobalState(\r\n      PLAYLISTS,\r\n      playlists.map(({ folder, ...p }) => {\r\n        if (ids.includes(p.id)) {\r\n          const addFolder = folderId === \"root\" ? {} : { folder: folderId };\r\n          return {\r\n            ...p,\r\n            ...addFolder\r\n          };\r\n        } else {\r\n          return { ...p, folder };\r\n        }\r\n      })\r\n    );\r\n    showHint(`Successfully moved playlists.`);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\n// this is only used\r\nexport const getPlaylist = async (id) => {\r\n  try {\r\n    const res = await request(\"playlists\", \"/\" + id);\r\n    const data = await res.json();\r\n    // playlist should either exist because when the user loads the app it gets all users objects\r\n    // otherwise the user is directly put to the sequencer and the certain object needs to be fetched and added to store\r\n    setGlobalState(VIDEOS, data.videos);\r\n    setGlobalState(PLAYLISTS, [data.playlist]);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const getPlaylists = async () => {\r\n  try {\r\n    const res = await request(\"playlists\");\r\n    const data = await res.json();\r\n    setGlobalState(PLAYLISTS, data);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const postPlaylist = async (values) => {\r\n  try {\r\n    const res = await request(\"playlists\", \"\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(values)\r\n    });\r\n    const id = await res.text();\r\n    const playlists = getGlobalState(PLAYLISTS);\r\n    setGlobalState(PLAYLISTS, [...playlists, { id, ...values }]);\r\n    setGlobalState(ACTIVE_PLAYLIST, id);\r\n    showHint(`Created new playlist \"${values.label}\".`);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const patchPlaylist = async ({ id, ...values }) => {\r\n  try {\r\n    await request(\"playlists\", \"/\" + id, {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(values)\r\n    });\r\n    const playlists = getGlobalState(PLAYLISTS);\r\n    setGlobalState(\r\n      PLAYLISTS,\r\n      playlists.map((v) => (v.id === id ? { id, ...values } : v))\r\n    );\r\n    showHint(`Playlist \"${values.label}\" updated successfully.`);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const deletePlaylist = async (id) => {\r\n  try {\r\n    await request(\"playlists\", \"/\" + id, { method: \"DELETE\" });\r\n    const playlists = getGlobalState(PLAYLISTS);\r\n    setGlobalState(\r\n      PLAYLISTS,\r\n      playlists.filter((f) => f.id !== id)\r\n    );\r\n    showHint(`Playlist deleted successfully.`);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","import React, { useMemo } from \"react\";\r\nimport { useGlobalState } from \"react-global-state-hook\";\r\n\r\nexport const MenuFolderCount = ({\r\n  type,\r\n  folderId\r\n}: {\r\n  type: string;\r\n  folderId?: string;\r\n}) => {\r\n  // need to change this when updating to rx-global\r\n  const [items] = useGlobalState(`${type}S`);\r\n\r\n  const count = useMemo(\r\n    () =>\r\n      items.filter((i) => (folderId ? i.folder === folderId : !i.folder))\r\n        .length,\r\n    [items, folderId]\r\n  );\r\n\r\n  return <small>({count})</small>;\r\n};\r\n","import React, { useMemo } from \"react\";\r\nimport {\r\n  useGlobalState,\r\n  setGlobalState,\r\n  getGlobalState\r\n} from \"react-global-state-hook\";\r\nimport {\r\n  OPEN_FOLDERS,\r\n  DIRECTORY_TYPES,\r\n  SELECTED_DIRECTORY\r\n} from \"../../stores/folder\";\r\nimport { MODAL } from \"../Modal\";\r\nimport { VIDEOS } from \"../../stores/videos\";\r\nimport { PLAYLISTS } from \"../../stores/playlists\";\r\nimport { SEQUENCES } from \"../../stores/sequences\";\r\nimport { MenuFolderCount } from \"./MenuFolderCount\";\r\n\r\nconst handleDragStart = (e) => {\r\n  const folderId = e.target.closest(\".folder\").id;\r\n  const directory = e.target.closest(\".folder\").classList[0];\r\n\r\n  e.dataTransfer.setData(\r\n    \"text/plain\",\r\n    JSON.stringify({ ids: [folderId], type: \"FOLDER\", directory })\r\n  );\r\n};\r\n\r\nconst getItemsCount = (directory, folderId) => {\r\n  if (directory === DIRECTORY_TYPES.VIDEO) {\r\n    return getGlobalState(VIDEOS).filter((v) => v.folder === folderId).length;\r\n  } else if (directory === DIRECTORY_TYPES.PLAYLIST) {\r\n    return getGlobalState(PLAYLISTS).filter((p) => p.folder === folderId)\r\n      .length;\r\n  } else {\r\n    return getGlobalState(SEQUENCES).filter((s) => s.folder === folderId)\r\n      .length;\r\n  }\r\n};\r\n\r\nexport const MenuFolder = ({\r\n  folders,\r\n  id,\r\n  folder,\r\n  label,\r\n  directory,\r\n  handleOpenFolder,\r\n  handleSelectFolder,\r\n  handleDrop\r\n}) => {\r\n  const [openFolders] = useGlobalState(OPEN_FOLDERS);\r\n  const [selectedFolder] = useGlobalState(\r\n    `SELECTED_FOLDER_${DIRECTORY_TYPES[directory]}`\r\n  );\r\n  const [selectedDirectory] = useGlobalState(SELECTED_DIRECTORY);\r\n\r\n  const childFolders = folders.filter((f) => f.folder === id);\r\n\r\n  const open = openFolders.includes(id);\r\n  const selected = selectedFolder === id && directory === selectedDirectory;\r\n\r\n  const handleEdit = () => {\r\n    setGlobalState(MODAL, {\r\n      component: \"folder\",\r\n      props: { id, label, folder, directory }\r\n    });\r\n  };\r\n\r\n  const handleSelect = (e) => {\r\n    e.stopPropagation();\r\n    handleSelectFolder(id, directory);\r\n    setGlobalState(SELECTED_DIRECTORY, DIRECTORY_TYPES[directory]);\r\n  };\r\n\r\n  const count = useMemo(() => getItemsCount(directory, id), [directory, id]);\r\n\r\n  return (\r\n    <div\r\n      onDrop={handleDrop}\r\n      onDragOver={(e) => e.preventDefault()}\r\n      className={`${directory} folder ${open ? \"open\" : \"\"} ${\r\n        selected ? \"selected\" : \"\"\r\n      }`}\r\n      id={id}\r\n    >\r\n      <div\r\n        draggable={true}\r\n        onDragStart={handleDragStart}\r\n        onClick={handleSelect}\r\n        className=\"folder_header pd-050 aligned-grid grid-tc-m1mm gap-m bg-white\"\r\n      >\r\n        {childFolders.length !== 0 ? (\r\n          <i onClick={() => handleOpenFolder(id)} className=\"material-icons\">\r\n            keyboard_arrow_right\r\n          </i>\r\n        ) : (\r\n          <i className=\"material-icons no_child_folder centered-grid opacity-0\">\r\n            keyboard_arrow_right\r\n          </i>\r\n        )}\r\n        <label>{label}</label>\r\n        <MenuFolderCount type={directory} folderId={id} />\r\n        <i onClick={handleEdit} className=\"material-icons\">\r\n          more_vert\r\n        </i>\r\n      </div>\r\n      <div className=\"folder_folders\">\r\n        {open &&\r\n          childFolders.map((f, i) => (\r\n            <MenuFolder\r\n              {...f}\r\n              handleOpenFolder={handleOpenFolder}\r\n              handleSelectFolder={handleSelectFolder}\r\n              handleDrop={handleDrop}\r\n              key={i}\r\n              folders={folders}\r\n              directory={directory}\r\n            />\r\n          ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport \"./Path.scss\";\r\n\r\nimport { useGlobalState } from \"react-global-state-hook\";\r\nimport {\r\n  FOLDERS,\r\n  SELECTED_DIRECTORY,\r\n  DIRECTORY_TYPES\r\n} from \"../../stores/folder\";\r\nimport { PLAYLIST_OPEN } from \"../../stores/playlists\";\r\n\r\nexport const getPath = (\r\n  id: string | null,\r\n  folders: {\r\n    id: string;\r\n    label: string;\r\n  }[],\r\n  path: { id: string | null; label: string }[] = []\r\n) => {\r\n  const folder: any = folders.find((f) => f.id === id);\r\n\r\n  if (!folder) {\r\n    return path;\r\n  }\r\n  if (folder && !folder.folder) {\r\n    return [{ id, label: folder.label }, ...path];\r\n  }\r\n  const parentFolder = folders.find((f) => f.id === folder.folder) || {\r\n    id: null,\r\n    label: \"Root\"\r\n  };\r\n\r\n  return getPath(parentFolder.id, folders, [\r\n    { id: folder.folder, label: folder.label },\r\n    ...path\r\n  ]);\r\n};\r\n\r\nexport const Path = () => {\r\n  const [selectedDirectory] = useGlobalState(SELECTED_DIRECTORY);\r\n  const [folders] = useGlobalState(FOLDERS);\r\n  const [selectedFolder, setSelectedFolder] = useGlobalState(\r\n    `SELECTED_FOLDER_${DIRECTORY_TYPES[selectedDirectory]}`\r\n  );\r\n  const [playlistOpen, setPlaylistOpen] = useGlobalState(PLAYLIST_OPEN);\r\n\r\n  const path = getPath(selectedFolder, folders);\r\n\r\n  const handleDirClick = () => setSelectedFolder(null);\r\n\r\n  return (\r\n    <div className=\"path aligned-grid grid-tc-1m gap-m bg-white\">\r\n      <div className=\"aligned-grid gap-m pd-051\">\r\n        <div className=\"grid gap-s\" onClick={handleDirClick}>\r\n          <i className=\"material-icons\">\r\n            {selectedDirectory === DIRECTORY_TYPES.PLAYLIST\r\n              ? \"playlist_play\"\r\n              : selectedDirectory === DIRECTORY_TYPES.VIDEO\r\n              ? \"subscriptions\"\r\n              : \"open_in_full\"}\r\n          </i>\r\n          <h4>{`${selectedDirectory.toLowerCase().capitalize()}s`}</h4>\r\n        </div>\r\n        {path.map((p, i) => {\r\n          return (\r\n            <div\r\n              className=\"aligned-grid gap-m\"\r\n              key={i}\r\n              onClick={() => setSelectedFolder(p.id)}\r\n            >\r\n              <i className=\"material-icons\">keyboard_arrow_right</i>\r\n              {p.label}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <button className=\"pd-01\" onClick={() => setPlaylistOpen(!playlistOpen)}>\r\n        <i className=\"material-icons\">\r\n          {playlistOpen ? \"keyboard_arrow_right\" : \"keyboard_arrow_left\"}\r\n        </i>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useMemo } from \"react\";\r\nimport {\r\n  getGlobalState,\r\n  setGlobalState,\r\n  useGlobalState\r\n} from \"react-global-state-hook\";\r\nimport {\r\n  OPEN_FOLDERS,\r\n  SELECTED_DIRECTORY,\r\n  DIRECTORY_TYPES,\r\n  FOLDERS,\r\n  SELECTED_FOLDER,\r\n  patchFolder\r\n} from \"../../stores/folder\";\r\nimport { movePlaylists, PLAYLISTS } from \"../../stores/playlists\";\r\nimport { moveVideos, VIDEOS } from \"../../stores/videos\";\r\nimport { moveSequences, SEQUENCES } from \"../../stores/sequences\";\r\nimport { MenuFolder } from \"./MenuFolder\";\r\nimport { getPath } from \"./Path\";\r\nimport { MenuFolderCount } from \"./MenuFolderCount\";\r\n\r\nconst handleSelectFolder = (id, directory) => {\r\n  setGlobalState(SELECTED_FOLDER, id);\r\n  setGlobalState(`SELECTED_FOLDER_${DIRECTORY_TYPES[directory]}`, id);\r\n};\r\n\r\nconst handleDrop = async (e) => {\r\n  e.stopPropagation();\r\n  const folders = getGlobalState(FOLDERS);\r\n  const dropFolderId = e.target.closest(\".folder\").id;\r\n  const dropFolder = folders.find((f) => f.id === dropFolderId);\r\n\r\n  const { ids, type, directory } = JSON.parse(\r\n    e.dataTransfer.getData(\"text/plain\")\r\n  );\r\n\r\n  if (type === \"FOLDER\") {\r\n    //  drop folder on folder, need to check if fodler types are matching\r\n    const dragFolderId = ids[0];\r\n    const dragFolder = folders.find((f) => f.id === dragFolderId);\r\n\r\n    const path = getPath(dropFolderId, folders, []);\r\n    const isOutOfPath = path.every((p) => p.id !== dragFolderId);\r\n    if (dragFolderId === dropFolderId) {\r\n      alert(\"Cant push into own folder\");\r\n    } else if (!isOutOfPath) {\r\n      alert(\"Cant push into own path\");\r\n    } else if (directory === dragFolder.directory) {\r\n      patchFolder({ id: dragFolderId, folder: dropFolderId || \"root\" });\r\n    }\r\n  } else if (\r\n    !dropFolderId ||\r\n    type === directory ||\r\n    type === dropFolder.directory\r\n  ) {\r\n    // restricts movement into different directory\r\n    if (type === DIRECTORY_TYPES.PLAYLIST) {\r\n      movePlaylists({ folderId: dropFolderId, ids, type });\r\n    } else if (type === DIRECTORY_TYPES.VIDEO) {\r\n      moveVideos({ folderId: dropFolderId, ids, type });\r\n    } else {\r\n      moveSequences({ folderId: dropFolderId, ids, type });\r\n    }\r\n  }\r\n};\r\n\r\nconst handleOpenFolder = (id) => {\r\n  const openFolders = getGlobalState(OPEN_FOLDERS);\r\n  if (openFolders.includes(id)) {\r\n    setGlobalState(\r\n      OPEN_FOLDERS,\r\n      openFolders.filter((f) => f !== id)\r\n    );\r\n  } else {\r\n    setGlobalState(OPEN_FOLDERS, [...openFolders, id]);\r\n  }\r\n};\r\n\r\nconst getItemsCount = (directory) => {\r\n  if (directory === DIRECTORY_TYPES.VIDEO) {\r\n    return getGlobalState(VIDEOS).filter((v) => !v.folder).length;\r\n  } else if (directory === DIRECTORY_TYPES.PLAYLIST) {\r\n    return getGlobalState(PLAYLISTS).filter((p) => !p.folder).length;\r\n  } else {\r\n    return getGlobalState(SEQUENCES).filter((s) => !s.folder).length;\r\n  }\r\n};\r\n\r\nexport const MenuItem = ({ folders, directory }) => {\r\n  const [selectedDirectory, setSelectedDirectory] = useGlobalState(\r\n    SELECTED_DIRECTORY\r\n  );\r\n  const rootFolders = folders.filter(\r\n    (f) => !f.folder && f.directory === directory\r\n  );\r\n\r\n  const handleSelect = () => {\r\n    handleOpenFolder(null);\r\n    handleSelectFolder(null, directory);\r\n    setSelectedDirectory(DIRECTORY_TYPES[directory]);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      onDrop={handleDrop}\r\n      onDragOver={(e) => e.preventDefault()}\r\n      onClick={handleSelect}\r\n      id=\"\"\r\n      className={`menu_item folder ${\r\n        selectedDirectory === DIRECTORY_TYPES[directory.toUpperCase()]\r\n          ? \"selected\"\r\n          : \"\"\r\n      }`}\r\n    >\r\n      <div className=\"menu_item_header pd-01501 aligned-grid grid-tc-mm1 gap-m\">\r\n        <i className=\"material-icons\">\r\n          {directory === DIRECTORY_TYPES.PLAYLIST\r\n            ? \"playlist_play\"\r\n            : directory === DIRECTORY_TYPES.VIDEO\r\n            ? \"subscriptions\"\r\n            : \"open_in_full\"}\r\n        </i>\r\n        <label>\r\n          {DIRECTORY_TYPES[directory].toLowerCase().capitalize() + \"s\"}\r\n        </label>\r\n        <MenuFolderCount type={DIRECTORY_TYPES[directory]} />\r\n      </div>\r\n      <div className=\"folder_folders\">\r\n        {rootFolders.map((f, i) => {\r\n          return (\r\n            <MenuFolder\r\n              {...f}\r\n              handleOpenFolder={handleOpenFolder}\r\n              handleSelectFolder={handleSelectFolder}\r\n              handleDrop={handleDrop}\r\n              key={i}\r\n              folders={folders}\r\n              directory={directory}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport \"./Modal.scss\";\r\nimport { useGlobalState, setGlobalState } from \"react-global-state-hook\";\r\nimport { Folder } from \"../forms/Folder\";\r\nimport { Video } from \"../forms/Video\";\r\nimport { Playlist } from \"../forms/Playlist\";\r\nimport { New } from \"../forms/New\";\r\nimport { SelectFolder } from \"../forms/SelectFolder\";\r\nimport { Share } from \"../forms/Share\";\r\nimport { Replay } from \"../forms/Replay\";\r\nimport { Profile } from \"./Profile\";\r\n\r\nexport const MODAL = \"MODAL\";\r\n\r\nconst INITIAL_CONFIG = {\r\n  component: \"\",\r\n  props: {}\r\n};\r\n\r\nconst COMPONENTS = {\r\n  FOLDER: Folder,\r\n  VIDEO: Video,\r\n  PLAYLIST: Playlist,\r\n  NEW: New,\r\n  SELECTFOLDER: SelectFolder,\r\n  SHARE: Share,\r\n  REPLAY: Replay,\r\n  PROFILE: Profile\r\n};\r\n\r\nexport const Modal = () => {\r\n  const [modal, setModal] = useGlobalState(MODAL, INITIAL_CONFIG);\r\n\r\n  const component = modal.component.toUpperCase();\r\n\r\n  const closeModal = () => {\r\n    if (modal.onClose) {\r\n      modal.onClose();\r\n    }\r\n    setGlobalState(MODAL, INITIAL_CONFIG);\r\n  };\r\n\r\n  if (!Object.keys(COMPONENTS).includes(component)) {\r\n    document.body.style.overflow = \"auto\";\r\n    return null;\r\n  }\r\n\r\n  const handleClick = (e) => {\r\n    if (e.target.classList.contains(\"modal\")) {\r\n      setModal(INITIAL_CONFIG);\r\n    }\r\n  };\r\n\r\n  const renderComponent = (component: string) => {\r\n    const SelectedComponent = COMPONENTS[component];\r\n\r\n    return (\r\n      <SelectedComponent\r\n        onClick={(e) => e.stopPropagation()}\r\n        {...modal.props}\r\n        closeModal={closeModal}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div onClick={handleClick} className=\"modal centered-grid full-screen\">\r\n      {renderComponent(component)}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useMemo } from \"react\";\r\nimport {\r\n  patchFolder,\r\n  postFolder,\r\n  deleteFolder,\r\n  FOLDERS,\r\n  DIRECTORY_TYPES\r\n} from \"../stores/folder\";\r\nimport { getGlobalState, useGlobalState } from \"react-global-state-hook\";\r\n\r\nexport const Folder = ({ onSubmit, closeModal, id, directory, ...values }) => {\r\n  const [folders] = useGlobalState(FOLDERS);\r\n  const [folder] = useState(\r\n    id\r\n      ? values.folder\r\n      : getGlobalState(`SELECTED_FOLDER_${DIRECTORY_TYPES[directory]}`)\r\n  );\r\n  const [label, setLabel] = useState(values.label || \"\");\r\n\r\n  const deletable = useMemo(() => {\r\n    const usedFolderIds = getGlobalState(\r\n      DIRECTORY_TYPES[directory] + \"S\"\r\n    ).reduce((prev, curr) => {\r\n      return Array.from(new Set([...prev, curr.folder]));\r\n    }, []);\r\n    return !usedFolderIds.includes(id);\r\n  }, [id, directory]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const addFolder = !folder ? {} : { folder };\r\n    if (id) {\r\n      await patchFolder({ id, label, ...addFolder });\r\n      closeModal();\r\n    } else {\r\n      await postFolder({ label, directory, ...addFolder });\r\n      closeModal();\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (deletable) {\r\n      const confirmed = window.confirm(\"Deleting Folder\");\r\n      if (confirmed) {\r\n        await deleteFolder(id);\r\n        closeModal();\r\n      }\r\n    } else {\r\n      alert(\r\n        \"Folder is not empty. Please move or delete all playlists in this folder before you delete it.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const { label: folderLabel } = folders.find((f) => f.id === folder) || {\r\n    label: directory.toLowerCase().capitalize() + \"s\"\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div className=\"form-header\">\r\n        <h3>\r\n          {`${id ? \"Edit Folder in\" : \"Add Folder to\"} ${folderLabel}`}\r\n          <button onClick={handleDelete} disabled={!deletable} type=\"button\">\r\n            <i className=\"material-icons\">delete</i>\r\n          </button>\r\n        </h3>\r\n      </div>\r\n      <div className=\"form-body\">\r\n        <label>\r\n          Label\r\n          <input\r\n            name=\"folderName\"\r\n            alt=\"enter folder name\"\r\n            type=\"text\"\r\n            value={label}\r\n            placeholder=\"Folder name\"\r\n            onChange={({ target: { value } }) => setLabel(value)}\r\n          />\r\n        </label>\r\n        <button type=\"submit\">Save</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n","import React, { useState, useEffect, useMemo } from \"react\";\r\nimport { patchVideo, postVideo, deleteVideo } from \"../stores/videos\";\r\nimport { getGlobalState, setGlobalState } from \"react-global-state-hook\";\r\nimport ReactPlayer from \"react-player\";\r\nimport { VIDEO_DETECTED } from \"../components/Dashboard/DashboardHeader\";\r\nimport {\r\n  SELECTED_FOLDER_VIDEO,\r\n  FOLDERS,\r\n  DIRECTORY_TYPES\r\n} from \"../stores/folder\";\r\nimport { PLAYLISTS } from \"../stores/playlists\";\r\nimport { SEQUENCES } from \"../stores/sequences\";\r\n\r\nexport const Video = ({ onSubmit, closeModal, id, ...values }) => {\r\n  const [label, setLabel] = useState(values.label || \"\");\r\n  const [url, setUrl] = useState(values.url || \"\");\r\n  const [keywords, setKeywords] = useState(values.keywords || []);\r\n  const [keyword, setKeyword] = useState(\"\");\r\n  const [folderName, setFolderName] = useState(\"\");\r\n\r\n  const folderId = getGlobalState(SELECTED_FOLDER_VIDEO) || \"root\";\r\n  const folder = getGlobalState(FOLDERS).find((f) => f.id === folderId);\r\n\r\n  useEffect(() => {\r\n    const folders = getGlobalState(FOLDERS);\r\n    const folder = folders.find((f) => f.id === values.folder);\r\n    if (folder) {\r\n      setFolderName(folder.label);\r\n    } else {\r\n      setFolderName(\"Root Directory\");\r\n    }\r\n  }, [values]);\r\n\r\n  const deletable = useMemo(() => {\r\n    const usedPlaylistVideoIds = getGlobalState(PLAYLISTS).reduce(\r\n      (prev, curr) => {\r\n        const videoIds = curr.items\r\n          .filter((i) => i.split(\":\")[0] === DIRECTORY_TYPES.VIDEO)\r\n          .map((i) => i.split(\":\")[1]);\r\n        return Array.from(new Set([...prev, ...videoIds]));\r\n      },\r\n      []\r\n    );\r\n    const usedSequenceVideoIds = getGlobalState(SEQUENCES).reduce(\r\n      (prev, curr) => {\r\n        return Array.from(new Set([...prev, curr.videoId]));\r\n      },\r\n      []\r\n    );\r\n\r\n    const isUnused = !Array.from(\r\n      new Set([...usedPlaylistVideoIds, ...usedSequenceVideoIds])\r\n    ).includes(id);\r\n    return isUnused;\r\n  }, [id]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (id) {\r\n      await patchVideo({ id, url, label, keywords });\r\n      closeModal();\r\n    } else {\r\n      const addFolder = folderId === \"root\" ? {} : { folder: folderId };\r\n      await postVideo({\r\n        url,\r\n        label,\r\n        keywords,\r\n        ...addFolder\r\n      });\r\n      closeModal();\r\n      setGlobalState(VIDEO_DETECTED, false);\r\n    }\r\n  };\r\n\r\n  const handleAddKeyword = (e) => {\r\n    e.preventDefault();\r\n    setKeywords([...keywords, keyword]);\r\n    setKeyword(\"\");\r\n  };\r\n\r\n  const handleRemove = (word) =>\r\n    setKeywords(keywords.filter((w) => w !== word));\r\n\r\n  const handleChangeUrl = ({ target: { value } }) => {\r\n    if (ReactPlayer.canPlay(value) || value === \"\") {\r\n      setUrl(value);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (\r\n      deletable &&\r\n      window.confirm(\"Are you sure you want to delete this video?\")\r\n    ) {\r\n      await deleteVideo(id);\r\n      closeModal();\r\n    } else {\r\n      alert(\"Video is used in playlists and/or sequences\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div className=\"form-header\">\r\n        <h3>\r\n          {`${id ? \"Edit Video\" : \"Post Video\"} to ${\r\n            folder ? folder.label : \"Root\"\r\n          }`}\r\n          {/* type = \"button\" otehrwise itll submit form */}\r\n          <button type=\"button\" onClick={handleDelete} disabled={!deletable}>\r\n            <i className=\"material-icons\">delete</i>\r\n          </button>\r\n        </h3>\r\n        <div className=\"form-folder\">\r\n          <i className=\"material-icons\">folder</i>\r\n          {folderName}\r\n        </div>\r\n      </div>\r\n      <div className=\"form-body\">\r\n        <label>\r\n          Label\r\n          <input\r\n            placeholder=\"Add Label...\"\r\n            name=\"videoName\"\r\n            alt=\"enter video name\"\r\n            type=\"text\"\r\n            value={label}\r\n            onChange={({ target: { value } }) => setLabel(value)}\r\n          />\r\n        </label>\r\n        <label>\r\n          Url\r\n          <input\r\n            disabled={!!id}\r\n            name=\"url\"\r\n            alt=\"enter url name\"\r\n            placeholder=\"Insert Video Link\"\r\n            type=\"text\"\r\n            value={url}\r\n            onChange={handleChangeUrl}\r\n          />\r\n        </label>\r\n        <label className=\"keywords\">\r\n          Keywords\r\n          <input\r\n            type=\"text\"\r\n            value={keyword}\r\n            placeholder=\"Add keyword..\"\r\n            alt=\"add keyword\"\r\n            onChange={({ target: { value } }) => setKeyword(value)}\r\n          />\r\n          <button onClick={handleAddKeyword}>\r\n            <i className=\"material-icons\">add</i>\r\n          </button>\r\n        </label>\r\n        <ul className=\"keywords-list\">\r\n          {keywords.map((k, i) => (\r\n            <li key={i}>\r\n              {k}\r\n              <i onClick={() => handleRemove(k)} className=\"material-icons\">\r\n                close\r\n              </i>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        <button type=\"submit\">Save</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  patchPlaylist,\r\n  postPlaylist,\r\n  deletePlaylist\r\n} from \"../stores/playlists\";\r\nimport { getGlobalState, useGlobalState } from \"react-global-state-hook\";\r\nimport { FOLDERS, DIRECTORY_TYPES } from \"../stores/folder\";\r\nimport { VIDEOS } from \"../stores/videos\";\r\nimport { SEQUENCES } from \"../stores/sequences\";\r\n\r\nexport const Playlist = ({ onSubmit, closeModal, id, ...values }) => {\r\n  const [label, setLabel] = useState(values.label || \"\");\r\n  const [items, setItems] = useState(values.items || []);\r\n  const [keywords, setKeywords] = useState(values.keywords || []);\r\n  const [keyword, setKeyword] = useState(\"\");\r\n  const [folderName, setFolderName] = useState(\"\");\r\n  const [videos] = useGlobalState(VIDEOS);\r\n  const [sequences] = useGlobalState(SEQUENCES);\r\n\r\n  useEffect(() => {\r\n    const folders = getGlobalState(FOLDERS);\r\n    const folder = folders.find((f) => f.id === values.folder);\r\n    if (folder) {\r\n      setFolderName(folder.label);\r\n    } else {\r\n      setFolderName(\"Root Directory\");\r\n    }\r\n  }, [values]);\r\n\r\n  const handleAddKeyword = (e) => {\r\n    e.preventDefault();\r\n    setKeywords([...keywords, keyword]);\r\n    setKeyword(\"\");\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    const confirmed = window.confirm(\"Deleting Playlist\");\r\n    if (confirmed) {\r\n      await deletePlaylist(id);\r\n      closeModal();\r\n    }\r\n  };\r\n\r\n  const handleRemove = (word) =>\r\n    setKeywords(keywords.filter((w) => w !== word));\r\n\r\n  const removeItem = (id) =>\r\n    setItems(items.filter((i) => i.split(\":\")[0] !== id));\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (id) {\r\n      await patchPlaylist({\r\n        id,\r\n        items,\r\n        label,\r\n        keywords\r\n      });\r\n      closeModal();\r\n    } else {\r\n      await postPlaylist({ items, label, keywords });\r\n      closeModal();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div className=\"form-header\">\r\n        <h3>\r\n          {`${id ? \"Edit Playlist\" : \"Post Playlist\"}`}{\" \"}\r\n          <i onClick={handleDelete} className=\"material-icons\">\r\n            delete\r\n          </i>\r\n        </h3>\r\n        <div className=\"form-folder\">\r\n          <i className=\"material-icons\">folder</i>\r\n          {folderName}\r\n        </div>\r\n      </div>\r\n      <div className=\"form-body\">\r\n        <label>\r\n          Label\r\n          <input\r\n            name=\"playlistName\"\r\n            placeholder=\"'My Playlist'\"\r\n            alt=\"enter playlist name\"\r\n            type=\"text\"\r\n            value={label}\r\n            onChange={({ target: { value } }) => setLabel(value)}\r\n          />\r\n        </label>\r\n        <ul className=\"links\">\r\n          {items.length === 0 ? (\r\n            <li>No Videos selected</li>\r\n          ) : (\r\n            items.map((item, i) => {\r\n              const [type, id] = item.split(\":\");\r\n              const { label } =\r\n                type === DIRECTORY_TYPES.VIDEO\r\n                  ? videos.find((v) => v.id === id)\r\n                  : sequences.find((s) => s.id === id);\r\n              return (\r\n                <li id={i}>\r\n                  {label}\r\n                  <i\r\n                    onClick={() => removeItem(item)}\r\n                    className=\"material-icons\"\r\n                  >\r\n                    close\r\n                  </i>\r\n                </li>\r\n              );\r\n            })\r\n          )}\r\n        </ul>\r\n        <label className=\"keywords\">\r\n          Keywords\r\n          <input\r\n            type=\"text\"\r\n            value={keyword}\r\n            placeholder=\"Add keyword..\"\r\n            alt=\"add keyword\"\r\n            onChange={({ target: { value } }) => setKeyword(value)}\r\n          />\r\n          <button onClick={handleAddKeyword}>\r\n            <i className=\"material-icons\">add</i>\r\n          </button>\r\n        </label>\r\n        <ul className=\"keywords-list\">\r\n          {keywords.map((k, i) => (\r\n            <li key={i}>\r\n              {k}\r\n              <i onClick={() => handleRemove(k)} className=\"material-icons\">\r\n                close\r\n              </i>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        <button type=\"submit\">Save</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { setGlobalState } from \"react-global-state-hook\";\r\nimport { MODAL } from \"../components/Modal\";\r\nimport { DIRECTORY_TYPES } from \"../stores/folder\";\r\n\r\nexport const New = ({ closeModal }) => {\r\n  const openFolder = () => {\r\n    closeModal();\r\n    setGlobalState(MODAL, {\r\n      component: \"folder\"\r\n    });\r\n  };\r\n\r\n  const openVideo = () => {\r\n    closeModal();\r\n    setGlobalState(MODAL, {\r\n      component: DIRECTORY_TYPES.VIDEO\r\n    });\r\n  };\r\n\r\n  return (\r\n    <form className=\"form-new\">\r\n      <div className=\"form-header\">\r\n        <h3>Add New</h3>\r\n      </div>\r\n      <div className=\"form-body\">\r\n        <div onClick={openFolder}>\r\n          <i className=\"material-icons\">folder</i>\r\n          <label>Folder</label>\r\n        </div>\r\n        <div onClick={openVideo}>\r\n          <i className=\"material-icons\">ondemand_video</i>\r\n          <label>Video</label>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n","import React, { useMemo, useEffect } from \"react\";\r\nimport { MenuItem } from \"../components/Dashboard/MenuItem\";\r\nimport {\r\n  DIRECTORY_TYPES,\r\n  FOLDERS,\r\n  SELECTED_FOLDER_SEQUENCE\r\n} from \"../stores/folder\";\r\nimport { useGlobalState } from \"react-global-state-hook\";\r\n\r\nexport const SelectFolder = ({ onSelect }) => {\r\n  const [folders] = useGlobalState(FOLDERS);\r\n  const [selectedFolderId] = useGlobalState(SELECTED_FOLDER_SEQUENCE);\r\n\r\n  const selectedFolder = useMemo(\r\n    () => folders.find((f) => f.id === selectedFolderId),\r\n    [folders, selectedFolderId]\r\n  );\r\n\r\n  useEffect(() => {\r\n    onSelect(selectedFolderId);\r\n  }, [selectedFolderId, onSelect]);\r\n\r\n  return (\r\n    <div className=\"select-folder\">\r\n      <h3>{`${\r\n        selectedFolder ? selectedFolder.label : \"Root Folder\"\r\n      } Selected`}</h3>\r\n      <MenuItem directory={DIRECTORY_TYPES.SEQUENCE} folders={folders} />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useMemo } from \"react\";\r\nimport { DIRECTORY_TYPES } from \"../stores/folder\";\r\nimport { getGlobalState } from \"react-global-state-hook\";\r\nimport { VIDEOS } from \"../stores/videos\";\r\nimport { SEQUENCES } from \"../stores/sequences\";\r\nimport { PLAYLISTS } from \"../stores/playlists\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport const Share = ({ type, id, closeModal }) => {\r\n  const item = useMemo(() => {\r\n    if (type === DIRECTORY_TYPES.VIDEO) {\r\n      return getGlobalState(VIDEOS).find((v) => v.id === id);\r\n    } else if (type === DIRECTORY_TYPES.SEQUENCE) {\r\n      return getGlobalState(SEQUENCES).find((s) => s.id === id);\r\n    } else if (type === DIRECTORY_TYPES.PLAYLIST) {\r\n      return getGlobalState(PLAYLISTS).find((p) => p.id);\r\n    }\r\n  }, [type, id]);\r\n\r\n  const url = `http://localhost:3000`;\r\n  const path = `/viewer/${type.toLowerCase()}/${id}`;\r\n\r\n  const handleCopy = () => navigator.clipboard.writeText(url + path);\r\n\r\n  return (\r\n    <form className=\"share\">\r\n      <h2>{`Share ${type.toLowerCase().capitalize()}: ${item.label}`}</h2>\r\n      <div>\r\n        <small>Share this Link with someone :)</small>\r\n        <p>{url + path}</p>\r\n        <i onClick={handleCopy} className=\"material-icons\">\r\n          content_copy\r\n        </i>\r\n      </div>\r\n      <Link to={path} onClick={closeModal}>\r\n        Open Link\r\n        <i className=\"material-icons\">open_in_new</i>\r\n      </Link>\r\n    </form>\r\n  );\r\n};\r\n","import React from \"react\";\r\n\r\nexport const Replay = ({ closeModal, onReplay }) => {\r\n  const handleReplay = () => {\r\n    onReplay();\r\n    closeModal();\r\n  };\r\n  // can add feedback textfield\r\n  // when logged in add save button\r\n  // if not logged in show login button with info text\r\n  // that you could save this if you were logged in\r\n\r\n  return (\r\n    <form className=\"viewer_modal\">\r\n      <button type=\"button\" onClick={handleReplay}>\r\n        <i className=\"material-icons\">replay</i>\r\n        Replay\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport \"./Profile.scss\";\r\nimport { logout } from \"../services/auth\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport const Profile = ({ closeModal }) => {\r\n  const { push } = useHistory();\r\n\r\n  const handleLogout = async () => {\r\n    await logout();\r\n    push(\"/auth/login\");\r\n    closeModal();\r\n  };\r\n\r\n  return (\r\n    <div className=\"centered-grid pd-2 bg-white\">\r\n      <button onClick={handleLogout}>Logout</button>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport \"./DashboardHeader.scss\";\r\n\r\nimport {\r\n  useGlobalState,\r\n  setGlobalState,\r\n  getGlobalState\r\n} from \"react-global-state-hook\";\r\nimport { MODAL } from \"../Modal\";\r\nimport ReactPlayer from \"react-player\";\r\nimport { postVideo, VIDEOS } from \"../../stores/videos\";\r\nimport { DIRECTORY_TYPES } from \"../../stores/folder\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport const VIDEO_DETECTED = \"VIDEO_DETECTED\";\r\n\r\nexport const Header = ({ push }) => {\r\n  const [menuOpen, setMenuOpen] = useGlobalState(\"MENU_OPEN\", true);\r\n  const [url, setUrl] = useGlobalState(VIDEO_DETECTED);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"focus\", onFocus);\r\n    return () => {\r\n      window.removeEventListener(\"focus\", onFocus);\r\n    };\r\n  });\r\n\r\n  const onFocus = async () => {\r\n    const url = await navigator.clipboard.readText();\r\n    addUrl(url);\r\n  };\r\n\r\n  const handleChangeUrl = ({ target: { value } }) => {\r\n    addUrl(value);\r\n  };\r\n\r\n  const addUrl = (url) => {\r\n    const videos = getGlobalState(VIDEOS);\r\n    const add = videos.every((v) => v.url !== url);\r\n    if (ReactPlayer.canPlay(url) && add) {\r\n      setUrl(url);\r\n    }\r\n  };\r\n\r\n  const handleVideoAdd = () => {\r\n    setGlobalState(MODAL, {\r\n      component: DIRECTORY_TYPES.VIDEO,\r\n      props: {\r\n        url,\r\n        onSubmit: (values) => postVideo(values)\r\n      }\r\n    });\r\n  };\r\n\r\n  const handlePaste = async () => {\r\n    const url = await navigator.clipboard.readText();\r\n    addUrl(url);\r\n  };\r\n\r\n  const handleProfileClick = () =>\r\n    setGlobalState(MODAL, {\r\n      component: \"profile\",\r\n      onClose: () => {\r\n        push(\"/auth/login\");\r\n      }\r\n    });\r\n\r\n  const handleClearSearch = () => setUrl(\"\");\r\n\r\n  return (\r\n    <header className=\"dashboard-header centered-grid grid-tc-mm11m bg-grey shadow-s z1\">\r\n      <div\r\n        onClick={() => setMenuOpen(!menuOpen)}\r\n        className={`header_menu ${menuOpen ? \"open\" : \"\"}`}\r\n      >\r\n        <i className=\"material-icons\">{menuOpen ? \"menu_open\" : \"menu\"}</i>\r\n      </div>\r\n      <div className=\"pd-01 header_logo\">\r\n        <Link to=\"/\">\r\n          <h2 className=\"cl-white\">Viden</h2>\r\n        </Link>\r\n      </div>\r\n      {/* <Add /> */}\r\n      <div className=\"header_add grid grid-tc-m1mm\" data-active={!!url}>\r\n        <i className=\"material-icons rounded\">ondemand_video</i>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Paste video url here:\"\r\n          value={url}\r\n          onChange={handleChangeUrl}\r\n        />\r\n        <i onClick={handleClearSearch} className=\"material-icons\">\r\n          clear\r\n        </i>\r\n        {url ? (\r\n          <button disabled={!url} onClick={handleVideoAdd}>\r\n            <i className=\"material-icons\">add</i>\r\n          </button>\r\n        ) : (\r\n          <button onClick={handlePaste}>\r\n            <i className=\"material-icons\">content_paste</i>\r\n          </button>\r\n        )}\r\n      </div>\r\n      <div className=\"header_search\">\r\n        {/* <i className=\"material-icons\">search</i> */}\r\n      </div>\r\n      <div className=\"header_profile stretched-grid\">\r\n        <div onClick={handleProfileClick}>\r\n          <i className=\"material-icons\">person</i>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nconst Add = () => {\r\n  const openNew = () => {\r\n    setGlobalState(MODAL, {\r\n      component: \"new\"\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"menu-add\">\r\n      <button onClick={openNew}>\r\n        <i className=\"material-icons\">add</i>\r\n        New\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport \"./Menu.scss\";\r\n\r\nimport { useGlobalState } from \"react-global-state-hook\";\r\nimport { DIRECTORY_TYPES, FOLDERS } from \"../../stores/folder\";\r\nimport { MenuItem } from \"./MenuItem\";\r\n\r\nexport const MENU_OPEN = \"MENU_OPEN\";\r\n\r\nexport const Menu = () => {\r\n  const [folders] = useGlobalState(FOLDERS);\r\n  const [menuOpen] = useGlobalState(MENU_OPEN, true);\r\n\r\n  return (\r\n    <div\r\n      className={`menu ${\r\n        menuOpen ? \"open\" : \"\"\r\n      } overflow-h bg-grey-light gap-s grid`}\r\n    >\r\n      <h3 className=\"aligned-grid pd-005\">Directory</h3>\r\n      <MenuItem directory={DIRECTORY_TYPES.PLAYLIST} folders={folders} />\r\n      <MenuItem directory={DIRECTORY_TYPES.VIDEO} folders={folders} />\r\n      <MenuItem directory={DIRECTORY_TYPES.SEQUENCE} folders={folders} />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useMemo } from \"react\";\r\nimport { DIRECTORY_TYPES } from \"../../stores/folder\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getGlobalState } from \"react-global-state-hook\";\r\nimport { SEQUENCES } from \"../../stores/sequences\";\r\n\r\nconst getSequenceCount = (videoId) => {\r\n  return getGlobalState(SEQUENCES).filter((s) => s.videoId === videoId).length;\r\n};\r\n\r\nexport const DirectoryItem = ({\r\n  id,\r\n  type,\r\n  label,\r\n  keywords,\r\n  items,\r\n  selected,\r\n  handleDrop,\r\n  onDragOver,\r\n  onDragStart,\r\n  handleSelect,\r\n  handleEdit,\r\n  onShare,\r\n  ...item\r\n}) => {\r\n  const handleKeywordClick = (e) => {};\r\n\r\n  const handleVideosClick = (e) => {};\r\n\r\n  const handleShare = () => onShare(DIRECTORY_TYPES[type], id);\r\n\r\n  const count = useMemo(\r\n    () => (type === DIRECTORY_TYPES.VIDEO ? getSequenceCount(id) : 0),\r\n    [type, id]\r\n  );\r\n\r\n  return (\r\n    <li\r\n      id={id}\r\n      onDrop={handleDrop}\r\n      onDragStart={onDragStart}\r\n      onDragOver={onDragOver}\r\n      draggable={true}\r\n      onClick={handleSelect}\r\n      data-selected={selected ? \"selected\" : \"\"}\r\n      className={`${DIRECTORY_TYPES[type]} directory_item grid pd-051 gap-l`}\r\n    >\r\n      <div className=\"directory_item-header aligned-grid grid-tc-1m cgap-m\">\r\n        <h4>{label}</h4>\r\n        <ul className=\"directory_item-keywords aligned-grid cgap-s\">\r\n          {type !== DIRECTORY_TYPES.SEQUENCE && (\r\n            <>\r\n              <li>\r\n                <small>#</small>\r\n              </li>\r\n              {keywords.length === 0 ? (\r\n                <li>\r\n                  <small>No keywords</small>\r\n                </li>\r\n              ) : (\r\n                keywords.map((k, i) => (\r\n                  <li onClick={handleKeywordClick} key={i}>\r\n                    {k}\r\n                  </li>\r\n                ))\r\n              )}\r\n            </>\r\n          )}\r\n        </ul>\r\n      </div>\r\n      <div\r\n        className=\"directory_item-videos aligned-grid gap-m\"\r\n        onClick={handleVideosClick}\r\n      >\r\n        {type === DIRECTORY_TYPES.PLAYLIST ? (\r\n          <>\r\n            <i className=\"material-icons\">ondemand_video</i>\r\n            <span>\r\n              {`${items.length} ${items.length === 1 ? \"Video\" : \"Videos\"}`}\r\n            </span>\r\n          </>\r\n        ) : (\r\n          type === DIRECTORY_TYPES.VIDEO && (\r\n            <>\r\n              <i className=\"material-icons\">open_in_full</i>\r\n              <span>\r\n                {`${count} ${count === 1 ? \"Sequence\" : \"Sequences\"}`}\r\n              </span>\r\n            </>\r\n          )\r\n        )}\r\n      </div>\r\n      <div className=\"directory_item-footer aligned-grid gap-l\">\r\n        <i onClick={handleShare} className=\"material-icons\">\r\n          share\r\n        </i>\r\n        {type === DIRECTORY_TYPES.VIDEO ? (\r\n          <Link to={`/sequencer/${id}`}>\r\n            <i className=\"material-icons\">open_in_new</i>\r\n          </Link>\r\n        ) : (\r\n          type === DIRECTORY_TYPES.SEQUENCE && (\r\n            <Link to={`/sequencer/${item.videoId}?sequenceId=${id}`}>\r\n              <i className=\"material-icons\">open_in_new</i>\r\n            </Link>\r\n          )\r\n        )}\r\n        {type !== DIRECTORY_TYPES.SEQUENCE && (\r\n          <i onClick={handleEdit} className=\"material-icons\">\r\n            more_vert\r\n          </i>\r\n        )}\r\n        <i className=\"material-icons\">\r\n          {selected ? \"check_box\" : \"check_box_outline_blank\"}\r\n        </i>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n","import React, { useState, useMemo } from \"react\";\r\nimport \"./Directory.scss\";\r\nimport { Path } from \"./Path\";\r\nimport { useGlobalState, setGlobalState } from \"react-global-state-hook\";\r\nimport { VIDEOS } from \"../../stores/videos\";\r\nimport {\r\n  SELECTED_DIRECTORY,\r\n  SELECTED_FOLDER,\r\n  DIRECTORY_TYPES\r\n} from \"../../stores/folder\";\r\nimport { PLAYLISTS, patchPlaylist } from \"../../stores/playlists\";\r\nimport { MODAL } from \"../Modal\";\r\nimport { SEQUENCES } from \"../../stores/sequences\";\r\nimport { DirectoryItem } from \"./DirectoryItem\";\r\n\r\nconst onDragOver = (e) => {\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n};\r\n\r\nexport const handleShare = (type, id) => {\r\n  setGlobalState(MODAL, {\r\n    component: \"share\",\r\n    props: { type, id }\r\n  });\r\n};\r\n\r\nexport const Directory = () => {\r\n  const [videos] = useGlobalState(VIDEOS);\r\n  const [playlists] = useGlobalState(PLAYLISTS);\r\n  const [sequences] = useGlobalState(SEQUENCES);\r\n\r\n  const [selectedDirectory] = useGlobalState(SELECTED_DIRECTORY);\r\n  const [selectedFolder] = useGlobalState(SELECTED_FOLDER);\r\n\r\n  const [selectedPlaylists, setSelectedPlaylists]: any = useState([]);\r\n  const [selectedVideos, setSelectedVideos]: any = useState([]);\r\n  const [selectedSequences, setSelectedSequences]: any = useState([]);\r\n\r\n  const [labelSort, setLabelSort] = useState({\r\n    SEQUENCE: null,\r\n    VIDEO: null,\r\n    PLAYLIST: null\r\n  });\r\n\r\n  const items = useMemo(() => {\r\n    if (selectedDirectory === DIRECTORY_TYPES.VIDEO) {\r\n      return videos.filter((v) =>\r\n        !selectedFolder ? !v.folder : v.folder === selectedFolder\r\n      );\r\n    } else if (selectedDirectory === DIRECTORY_TYPES.SEQUENCE) {\r\n      return sequences.filter((s) =>\r\n        !selectedFolder ? !s.folder : s.folder === selectedFolder\r\n      );\r\n    } else {\r\n      return playlists.filter((p) =>\r\n        !selectedFolder ? !p.folder : p.folder === selectedFolder\r\n      );\r\n    }\r\n  }, [selectedDirectory, videos, playlists, selectedFolder, sequences]);\r\n\r\n  const onDragStart = (e) => {\r\n    const type = DIRECTORY_TYPES[e.target.closest(\"li\").classList[0]];\r\n    const itemId = e.target.closest(\"li\").id;\r\n    const ids =\r\n      type === DIRECTORY_TYPES.VIDEO\r\n        ? [...selectedVideos, itemId]\r\n        : type === DIRECTORY_TYPES.PLAYLIST\r\n        ? [...selectedPlaylists, itemId]\r\n        : [...selectedSequences, itemId];\r\n\r\n    e.dataTransfer.setData(\"text/plain\", JSON.stringify({ ids, type }));\r\n    // Now this will break every drop event\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    const id = e.target.closest(\"li\").id;\r\n    const { ids, type } = JSON.parse(e.dataTransfer.getData(\"text/plain\"));\r\n    if (type === \"list\") {\r\n      const playlist = playlists.find((p) => p.id === id);\r\n      const urls = videos.filter((v) => ids.includes(v.id)).map((v) => v.url);\r\n      // @ts-ignore\r\n      const newUrls = [...new Set([...playlist.urls, ...urls])];\r\n      patchPlaylist({ ...playlist, urls: newUrls });\r\n    }\r\n  };\r\n\r\n  const handleSelect = (e) => {\r\n    const id = e.target.closest(\"li\").id;\r\n    if (selectedDirectory === DIRECTORY_TYPES.VIDEO) {\r\n      if (selectedVideos.includes(id)) {\r\n        setSelectedVideos(selectedVideos.filter((v) => v !== id));\r\n      } else {\r\n        setSelectedVideos([...selectedVideos, id]);\r\n      }\r\n    } else if (selectedDirectory === DIRECTORY_TYPES.PLAYLIST) {\r\n      if (selectedPlaylists.includes(id)) {\r\n        setSelectedPlaylists(selectedPlaylists.filter((p) => p !== id));\r\n      } else {\r\n        setSelectedPlaylists([...selectedPlaylists, id]);\r\n      }\r\n    } else if (selectedDirectory === DIRECTORY_TYPES.SEQUENCE) {\r\n      if (selectedSequences.includes(id)) {\r\n        setSelectedSequences(selectedSequences.filter((s) => s !== id));\r\n      } else {\r\n        setSelectedSequences([...selectedSequences, id]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEdit = (e) => {\r\n    const id = e.target.closest(\"li\").id;\r\n    if (selectedDirectory === DIRECTORY_TYPES.VIDEO) {\r\n      const video = videos.find((f) => f.id === id);\r\n      setGlobalState(MODAL, {\r\n        component: \"video\",\r\n        props: video\r\n      });\r\n    } else if (selectedDirectory === DIRECTORY_TYPES.PLAYLIST) {\r\n      const playlist = playlists.find((p) => p.id === id);\r\n      setGlobalState(MODAL, {\r\n        component: \"playlist\",\r\n        props: playlist\r\n      });\r\n    } else if (selectedDirectory === DIRECTORY_TYPES.SEQUENCE) {\r\n      alert(\r\n        \"Sequences cant be edited. Open the corresponding video or project in the sequencer and edit sequence there\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleAdd = () => {\r\n    setGlobalState(MODAL, {\r\n      component: \"folder\",\r\n      props: {\r\n        directory: selectedDirectory,\r\n        folder: selectedFolder\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleSort = () => {\r\n    const sort = labelSort[selectedDirectory];\r\n    const to = !sort ? \"asc\" : sort === \"asc\" ? \"desc\" : null;\r\n    setLabelSort({\r\n      ...labelSort,\r\n      [selectedDirectory]: to\r\n    });\r\n  };\r\n\r\n  const sortedItems = useMemo(() => {\r\n    const copy = [...items];\r\n    const sort = labelSort[selectedDirectory];\r\n    if (!sort) {\r\n      return copy;\r\n    } else if (sort === \"asc\") {\r\n      return copy.sort((a, b) => {\r\n        var nameA = a.label.toUpperCase(); // ignore upper and lowercase\r\n        var nameB = b.label.toUpperCase(); // ignore upper and lowercase\r\n        if (nameA < nameB) {\r\n          return -1;\r\n        }\r\n        if (nameA > nameB) {\r\n          return 1;\r\n        }\r\n\r\n        // names must be equal\r\n        return 0;\r\n      });\r\n    } else {\r\n      return copy.sort((a, b) => {\r\n        var nameA = a.label.toUpperCase(); // ignore upper and lowercase\r\n        var nameB = b.label.toUpperCase(); // ignore upper and lowercase\r\n        if (nameA > nameB) {\r\n          return -1;\r\n        }\r\n        if (nameA < nameB) {\r\n          return 1;\r\n        }\r\n\r\n        // names must be equal\r\n        return 0;\r\n      });\r\n    }\r\n  }, [labelSort, items, selectedDirectory]);\r\n\r\n  const handleSelectAll = () => {\r\n    const [targetSelection, setSelection] =\r\n      selectedDirectory === DIRECTORY_TYPES.PLAYLIST\r\n        ? [selectedPlaylists, setSelectedPlaylists]\r\n        : selectedDirectory === DIRECTORY_TYPES.VIDEO\r\n        ? [selectedVideos, setSelectedVideos]\r\n        : [selectedSequences, setSelectedSequences];\r\n    console.log({ targetSelection, setSelection });\r\n\r\n    const localSelection = targetSelection.filter((id) =>\r\n      items.find((i) => i.id === id)\r\n    );\r\n    if (localSelection.length !== items.length) {\r\n      setSelection(\r\n        Array.from(new Set([...targetSelection, ...items.map((i) => i.id)]))\r\n      );\r\n    } else {\r\n      setSelection(\r\n        targetSelection.filter((id) => !localSelection.includes(id))\r\n      );\r\n    }\r\n  };\r\n\r\n  const allSelected = useMemo(() => {\r\n    if (items.length === 0) {\r\n      return false;\r\n    }\r\n    const targetSelection =\r\n      selectedDirectory === DIRECTORY_TYPES.PLAYLIST\r\n        ? selectedPlaylists\r\n        : selectedDirectory === DIRECTORY_TYPES.VIDEO\r\n        ? selectedVideos\r\n        : selectedSequences;\r\n\r\n    const localSelection = targetSelection.filter((id) =>\r\n      items.find((i) => i.id === id)\r\n    );\r\n    return localSelection.length === items.length;\r\n  }, [\r\n    items,\r\n    selectedDirectory,\r\n    selectedPlaylists,\r\n    selectedVideos,\r\n    selectedSequences\r\n  ]);\r\n\r\n  return (\r\n    <div className=\"directory grid gap-s overflow-a grid-tr-mm1 bg-grey-light\">\r\n      <Path />\r\n      <div className=\"directory_header aligned-grid grid-tc-m1m gap-m bg-grey-light\">\r\n        <button className=\"aligned-grid pd-01\" onClick={handleAdd}>\r\n          <i className=\"material-icons\">add</i>\r\n          Folder\r\n        </button>\r\n        <div className=\"grid gap-m\">\r\n          <label>Sort by:</label>\r\n          <span className=\"grid gap-s\" onClick={handleSort}>\r\n            Label\r\n            <i className=\"material-icons\">\r\n              {!labelSort[selectedDirectory]\r\n                ? \"unfold_more\"\r\n                : labelSort[selectedDirectory] === \"desc\"\r\n                ? \"expand_less\"\r\n                : \"expand_more\"}\r\n            </i>\r\n          </span>\r\n        </div>\r\n        <div className=\"grid gap-m\">\r\n          <label>Select all:</label>\r\n          <i className=\"material-icons\" onClick={handleSelectAll}>\r\n            {allSelected ? \"check_box\" : \"check_box_outline_blank\"}\r\n          </i>\r\n        </div>\r\n      </div>\r\n      <ul className=\"directory_items grid gap-xs\">\r\n        {sortedItems.map((item, index) => {\r\n          const selected = (selectedDirectory === DIRECTORY_TYPES.PLAYLIST\r\n            ? selectedPlaylists\r\n            : selectedDirectory === DIRECTORY_TYPES.VIDEO\r\n            ? selectedVideos\r\n            : selectedSequences\r\n          ).includes(item.id);\r\n\r\n          return (\r\n            <DirectoryItem\r\n              key={item.id}\r\n              {...item}\r\n              type={selectedDirectory}\r\n              handleSelect={handleSelect}\r\n              handleEdit={handleEdit}\r\n              selected={selected}\r\n              onDragOver={onDragOver}\r\n              onDragStart={onDragStart}\r\n              handleDrop={handleDrop}\r\n              onShare={handleShare}\r\n            />\r\n          );\r\n        })}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n","import { getGlobalState, setGlobalState } from \"react-global-state-hook\";\r\n\r\nexport const PLAYLIST_ITEMS = \"PLAYLIST_ITEMS\";\r\n\r\nsetGlobalState(PLAYLIST_ITEMS, []);\r\n\r\nexport const addItem = (item) => {\r\n  const items = getGlobalState(PLAYLIST_ITEMS);\r\n  setGlobalState(PLAYLIST_ITEMS, [...items, item]);\r\n};\r\n\r\nexport const removeItems = (itemIds) => {\r\n  const items = getGlobalState(PLAYLIST_ITEMS);\r\n  setGlobalState(\r\n    PLAYLIST_ITEMS,\r\n    items.filter(({ id }) => !itemIds.includes(id))\r\n  );\r\n};\r\n","import React, { useState, useEffect, useMemo, useRef } from \"react\";\r\nimport \"./Player.scss\";\r\nimport {\r\n  useGlobalState,\r\n  setGlobalState,\r\n  getGlobalState\r\n} from \"react-global-state-hook\";\r\nimport ReactPlayer from \"react-player\";\r\nimport { PLAYLIST_ITEMS } from \"../../stores/playlist_items\";\r\nimport { DIRECTORY_TYPES } from \"../../stores/folder\";\r\n\r\nexport const PLAYER = \"PLAYER\";\r\nexport const PLAYER_POSITION = \"PLAYER_POSITION\";\r\nexport const PLAYER_PLAYING = \"PLAYER_PLAYING\";\r\nexport const PLAYER_POSITION_CLICK_COUNT = \"PLAYER_POSITION_CLICK_COUNT\";\r\nexport const PLAYER_ITEM = \"PLAYER_ITEM\";\r\n\r\nsetGlobalState(PLAYER_PLAYING, false);\r\n\r\nconst onPlayerEnd = (id) => {\r\n  const event = new CustomEvent(\"playerdone\", {\r\n    detail: {\r\n      id\r\n    }\r\n  });\r\n  document.dispatchEvent(event);\r\n};\r\n\r\nexport const togglePlay = () => {\r\n  const playing = getGlobalState(PLAYER_PLAYING);\r\n  setGlobalState(PLAYER_PLAYING, !playing);\r\n};\r\n\r\n// when clicked on a video, the player needs to change urls if neccessary\r\n// if correct url is used, player.seekTo(0)\r\n\r\n// when a sequence is clicked, the player need to change urls if neccessary\r\n// if correct url is used, player.seekTo(start)\r\nlet PLAYER_COUNT = 0;\r\n\r\nexport const openPlayer = (e) => {\r\n  PLAYER_COUNT++;\r\n  const items = getGlobalState(PLAYLIST_ITEMS);\r\n\r\n  const item = items.find(\r\n    (i) => i.id === (typeof e == \"string\" ? e : e.target.closest(\"li\").id)\r\n  );\r\n  setGlobalState(PLAYER_ITEM, { ...item, count: PLAYER_COUNT });\r\n};\r\n\r\nexport const Player = () => {\r\n  const [item, setItem] = useGlobalState(PLAYER_ITEM);\r\n\r\n  const [playing, setPlaying] = useGlobalState(PLAYER_PLAYING);\r\n  const [playerReady, setPlayerReady] = useState(false);\r\n\r\n  const [maximized, setMaximized] = useState(false);\r\n\r\n  const player = useRef();\r\n  const ref = (p) => (player.current = p);\r\n\r\n  const handleReady = () => setPlayerReady(true);\r\n\r\n  const lastUrl = useRef();\r\n  const url = useMemo(() => (item ? item.url : \"\"), [item]);\r\n\r\n  useEffect(() => {\r\n    if (playerReady) {\r\n      startPlayer();\r\n    }\r\n  }, [playerReady]);\r\n\r\n  useEffect(() => {\r\n    if (playerReady && item && lastUrl.current === item.url) {\r\n      startPlayer();\r\n    }\r\n    return () => (lastUrl.current = item ? item.url : \"\");\r\n  }, [item, playerReady]);\r\n\r\n  const startPlayer = () => {\r\n    //\r\n    const Player: ReactPlayer | any = player.current;\r\n    if (Player) {\r\n      if (item.type === DIRECTORY_TYPES.VIDEO) {\r\n        Player.seekTo(0);\r\n      } else if (item.type === DIRECTORY_TYPES.SEQUENCE) {\r\n        Player.seekTo(item.start, \"seconds\");\r\n      }\r\n      setPlaying(true);\r\n    } else {\r\n      console.log(\"PLAYER NOT READY ON START PLAYER\");\r\n    }\r\n  };\r\n\r\n  const stopPlayer = () => {\r\n    player.current = undefined;\r\n    setPlayerReady(false);\r\n    setPlaying(false);\r\n    setItem();\r\n  };\r\n\r\n  const handleProgress = ({ playedSeconds }) => {\r\n    if (item.stop && playedSeconds >= item.stop) {\r\n      onPlayerEnd(item.id);\r\n    }\r\n  };\r\n\r\n  const handleResize = () => {\r\n    setMaximized(!maximized);\r\n  };\r\n\r\n  console.log(playing);\r\n\r\n  return (\r\n    <div\r\n      className={`video-preview bg-white overflow-h shadow-l ${\r\n        maximized ? \"\" : \"minimized\"\r\n      } ${url ? \"open\" : \"\"}`}\r\n    >\r\n      {url && (\r\n        <>\r\n          <div className=\"video-preview__header aligned-grid pd-05 grid-tc-1mm z1\">\r\n            <h4>{item ? item.label : \"Loading Player\"}</h4>\r\n            <i onClick={handleResize} className=\"material-icons\">\r\n              {maximized ? \"minimize\" : \"maximize\"}\r\n            </i>\r\n            <i onClick={stopPlayer} className=\"material-icons\">\r\n              close\r\n            </i>\r\n          </div>\r\n          <ReactPlayer\r\n            className={\"player\"}\r\n            height=\"calc(100% - 45px)\"\r\n            width=\"auto\"\r\n            pip={true}\r\n            playing={playing}\r\n            ref={ref}\r\n            url={url}\r\n            onReady={handleReady}\r\n            onProgress={handleProgress}\r\n            controls={true}\r\n          />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useGlobalState } from \"react-global-state-hook\";\r\nimport { PLAYER_PLAYING, PLAYER_ITEM } from \"./Player\";\r\n\r\nexport const ListActions = ({ items }) => {\r\n  const [playing, setPlaying] = useGlobalState(PLAYER_PLAYING);\r\n  const [item, setItem] = useGlobalState(PLAYER_ITEM);\r\n\r\n  const handlePlay = () => {\r\n    if (!item) {\r\n      setItem(items[0]);\r\n    } else {\r\n      setPlaying(!playing);\r\n    }\r\n  };\r\n\r\n  const move = (up) => {\r\n    if (item && items.length !== 1) {\r\n      const currentIndex = items.findIndex((i) => i.id === item.id);\r\n      let nextItem;\r\n      if (up && currentIndex !== 0) {\r\n        nextItem = items.find((_, i) => i === currentIndex - 1);\r\n      } else if (currentIndex !== items.length - 1) {\r\n        nextItem = items.find((_, i) => i === currentIndex + 1);\r\n      }\r\n      setItem(nextItem);\r\n    } else {\r\n      console.log(\"ONLY ONE ITEM PRESENT OR PLAYER IS NOT ACTIVE\");\r\n    }\r\n  };\r\n\r\n  const handleUp = () => move(true);\r\n\r\n  const handleDown = () => move(false);\r\n\r\n  return (\r\n    <div className=\"playlist_controls-actions stretched-grid bg-grey\">\r\n      <button onClick={handlePlay}>\r\n        {/* show loading when player isnt ready yet, otherwise first play press might fail */}\r\n        <i className=\"material-icons\">{playing ? \"pause\" : \"play_arrow\"}</i>\r\n      </button>\r\n      <button onClick={handleUp}>\r\n        <i className=\"material-icons\">keyboard_arrow_up</i>\r\n      </button>\r\n      <button onClick={handleDown}>\r\n        <i className=\"material-icons\">keyboard_arrow_down</i>\r\n      </button>\r\n      <button>\r\n        <i className=\"material-icons\">share</i>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { setGlobalState } from \"react-global-state-hook\";\r\nimport { MODAL } from \"../Modal\";\r\nimport { DIRECTORY_TYPES } from \"../../stores/folder\";\r\nimport { patchPlaylist } from \"../../stores/playlists\";\r\n\r\nconst handleAdd = () => {};\r\n\r\nexport const ListSelection = ({\r\n  activePlaylist,\r\n  playlist,\r\n  items,\r\n  setItems,\r\n  selectedItems\r\n}) => {\r\n  const handleSave = () => {\r\n    const selection = items\r\n      .filter((i) => selectedItems.includes(i.id))\r\n      .map((i) => `${i.type}:${i.id}`);\r\n\r\n    setGlobalState(MODAL, {\r\n      component: DIRECTORY_TYPES.PLAYLIST,\r\n      props: {\r\n        items: selection\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    const updatedItems = items\r\n      .filter((i) => !selectedItems.includes(i.id))\r\n      .map((i) => `${i.type}:${i.id}`);\r\n\r\n    patchPlaylist({ ...playlist, items: updatedItems });\r\n  };\r\n\r\n  const handleRemove = () =>\r\n    setItems(items.filter((i) => !selectedItems.includes(i.id)));\r\n\r\n  return (\r\n    <div className=\"playlist_controls-selection overflow-h stretched-grid bg-grey\">\r\n      <button>\r\n        {activePlaylist ? (\r\n          <i onClick={handleDelete} className=\"material-icons\">\r\n            delete\r\n          </i>\r\n        ) : (\r\n          <i onClick={handleRemove} className=\"material-icons\">\r\n            clear\r\n          </i>\r\n        )}\r\n      </button>\r\n      <button onClick={handleSave}>\r\n        <i className=\"material-icons\">playlist_add_check</i>\r\n      </button>\r\n      <button onClick={handleAdd}>\r\n        <i className=\"material-icons\">playlist_add</i>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport {\r\n  useGlobalState,\r\n  getGlobalState,\r\n  setGlobalState\r\n} from \"react-global-state-hook\";\r\nimport { PLAYER_POSITION, openPlayer, PLAYER_PLAYING } from \"./Player\";\r\nimport { DIRECTORY_TYPES } from \"../../stores/folder\";\r\nimport { PLAYLIST_ITEMS } from \"../../stores/playlist_items\";\r\n\r\nconst handlePlayerDone = ({ detail: { id } }: any) => {\r\n  const items = getGlobalState(PLAYLIST_ITEMS);\r\n  const itemIndex = items.findIndex((i) => i.id === id);\r\n  // when item is the last in List, do nothing\r\n  // if not get the next id and openPlayer(id);\r\n\r\n  if (itemIndex < items.length - 1) {\r\n    const nextItem = items.find((i, index) => index === itemIndex + 1);\r\n    openPlayer(nextItem.id);\r\n  } else {\r\n    setGlobalState(PLAYER_PLAYING, false);\r\n  }\r\n};\r\n\r\nexport const ListList = ({\r\n  items,\r\n  filteredItems,\r\n  selectedItems,\r\n  setSelectedItems,\r\n  arrangeItems\r\n}) => {\r\n  const [position] = useGlobalState(PLAYER_POSITION);\r\n\r\n  const arrangeTarget: any = useRef();\r\n  const draggedTarget: any = useRef();\r\n\r\n  const handleSelect = (e) => {\r\n    e.stopPropagation();\r\n    const id = e.target.closest(\"li\").id;\r\n    if (selectedItems.includes(id)) {\r\n      setSelectedItems(selectedItems.filter((i) => i !== id));\r\n    } else {\r\n      setSelectedItems([...selectedItems, id]);\r\n    }\r\n  };\r\n\r\n  const handleDragStart = (e) => {\r\n    const el = e.target.closest(\"li\");\r\n    const id = el.id;\r\n    draggedTarget.current = el;\r\n    e.dataTransfer.setData(\r\n      \"text/plain\",\r\n      JSON.stringify({ items: [...selectedItems, id], type: \"list\" })\r\n    );\r\n  };\r\n\r\n  const handleDragEnd = (e) => {\r\n    if (arrangeTarget.current) {\r\n      arrangeTarget.current.classList.remove(\"drop-after\");\r\n      arrangeTarget.current.classList.remove(\"drop-before\");\r\n    }\r\n  };\r\n\r\n  const handleDragEnter = (e) => {\r\n    const el = e.target.closest(\"li\");\r\n    arrangeTarget.current = el;\r\n  };\r\n\r\n  const handleDragLeave = (e) => {\r\n    const el = e.target;\r\n    el.classList.remove(\"drop-before\");\r\n    el.classList.remove(\"drop-after\");\r\n  };\r\n\r\n  const handleDragOver = (e) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    if (\r\n      arrangeTarget.current &&\r\n      draggedTarget.current !== arrangeTarget.current\r\n    ) {\r\n      const { height, y } = arrangeTarget.current.getBoundingClientRect();\r\n      const mouseY = e.clientY;\r\n      const before = mouseY < y + height / 2;\r\n\r\n      const dragIndex = draggedTarget.current.dataset.index;\r\n      const dropIndex = arrangeTarget.current.dataset.index;\r\n\r\n      const down = dragIndex < dropIndex;\r\n\r\n      const notSame = Math.abs(dragIndex - dropIndex) !== 1;\r\n\r\n      if (before) {\r\n        if (notSame || !down) {\r\n          arrangeTarget.current.classList.remove(\"drop-after\");\r\n          arrangeTarget.current.classList.add(\"drop-before\");\r\n        }\r\n      } else if (notSame || down) {\r\n        arrangeTarget.current.classList.add(\"drop-after\");\r\n        arrangeTarget.current.classList.remove(\"drop-before\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDrop = () => {\r\n    const dragIndex = draggedTarget.current.dataset.index;\r\n    const dropIndex = arrangeTarget.current.dataset.index;\r\n\r\n    if (dragIndex === dropIndex) return;\r\n\r\n    let arrangedItems: any = [...items];\r\n\r\n    const before = arrangeTarget.current.classList.contains(\"drop-before\");\r\n    const down = dragIndex < dropIndex;\r\n\r\n    const from = dragIndex;\r\n    const to = before && down ? dropIndex - 1 : dropIndex;\r\n\r\n    arrangedItems.move(from, to);\r\n\r\n    arrangeItems(arrangedItems);\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"playerdone\", handlePlayerDone);\r\n    return () => document.removeEventListener(\"playerdone\", handlePlayerDone);\r\n  }, []);\r\n\r\n  return (\r\n    <ul className=\"bg-white overflow-a\">\r\n      {items.length === 0 ? (\r\n        <li className=\"no-items centered-grid pd-2\">\r\n          Nothing in selection. Drag video or playlist into here or open an\r\n          existing playlist.\r\n        </li>\r\n      ) : (\r\n        filteredItems.map(({ id, label, url, type, start, stop }, i) => {\r\n          const selected = selectedItems.includes(id);\r\n          return (\r\n            <li\r\n              onClick={openPlayer}\r\n              draggable={true}\r\n              onDragStart={handleDragStart}\r\n              onDragEnd={handleDragEnd}\r\n              onDragOver={handleDragOver}\r\n              onDragEnter={handleDragEnter}\r\n              onDragLeave={handleDragLeave}\r\n              onDrop={handleDrop}\r\n              className={`${\r\n                DIRECTORY_TYPES[type]\r\n              } grid grid-tc-m1m  pd-05 gap-m ${\r\n                i === position ? \"active\" : \"\"\r\n              }`}\r\n              id={id}\r\n              data-index={i}\r\n              key={i}\r\n            >\r\n              <i onClick={handleSelect} className=\"material-icons\">\r\n                {/* here i need logic to display request states for saving, patching and deleting */}\r\n                {selected ? \"check_box\" : \"check_box_outline_blank\"}\r\n              </i>\r\n              <label>{label}</label>\r\n              {/* <i className=\"material-icons\">edit</i> */}\r\n            </li>\r\n          );\r\n        })\r\n      )}\r\n    </ul>\r\n  );\r\n};\r\n","export const itemsToPlaylistItems = (items) => {\r\n  return items.map((i) => `${i.type}:${i.id}`);\r\n};\r\n","import React, { useState, useEffect, useMemo, useCallback } from \"react\";\r\nimport \"./List.scss\";\r\nimport { useGlobalState, setGlobalState } from \"react-global-state-hook\";\r\nimport { PLAYLIST_ITEMS } from \"../../stores/playlist_items\";\r\nimport {\r\n  PLAYLIST_OPEN,\r\n  ACTIVE_PLAYLIST,\r\n  PLAYLISTS,\r\n  patchPlaylist\r\n} from \"../../stores/playlists\";\r\nimport { VIDEOS } from \"../../stores/videos\";\r\nimport { Player, PLAYER_ITEM } from \"./Player\";\r\nimport { ListActions } from \"./ListActions\";\r\nimport { ListSelection } from \"./ListSelection\";\r\nimport { ListList } from \"./ListList\";\r\nimport { DIRECTORY_TYPES } from \"../../stores/folder\";\r\nimport { SEQUENCES } from \"../../stores/sequences\";\r\nimport { itemsToPlaylistItems } from \"../../utils/itemsToPlaylistItems\";\r\n\r\nexport const SELECTED_LIST_ITEMS = \"SELECTED_LIST_ITEMS\";\r\n\r\nexport const Playlist = () => {\r\n  const [open] = useGlobalState(PLAYLIST_OPEN);\r\n  const [items, setItems] = useGlobalState(PLAYLIST_ITEMS);\r\n  const [videos] = useGlobalState(VIDEOS);\r\n  const [sequences] = useGlobalState(SEQUENCES);\r\n  const [playlists] = useGlobalState(PLAYLISTS);\r\n  const [selectedItems, setSelectedItems] = useGlobalState(\r\n    SELECTED_LIST_ITEMS,\r\n    []\r\n  );\r\n  const [activePlaylist, setActivePlaylist] = useGlobalState(ACTIVE_PLAYLIST);\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  const playlist = useMemo(() => {\r\n    return playlists.find((p) => p.id === activePlaylist);\r\n  }, [activePlaylist, playlists]);\r\n\r\n  useEffect(() => {\r\n    // In case a playlist is set\r\n    // Load all videos and sequences from that playlist into the list\r\n    if (playlist) {\r\n      const pItems = playlist.items.map((i) => {\r\n        const [type, id] = i.split(\":\");\r\n        const item = (type === DIRECTORY_TYPES.VIDEO ? videos : sequences).find(\r\n          (i) => i.id === id\r\n        );\r\n        return { type, ...item };\r\n      });\r\n      setItems(pItems);\r\n      setSelectedItems([]);\r\n    }\r\n  }, [playlist, sequences, videos, setItems, setSelectedItems]);\r\n\r\n  const filteredItems = useMemo(() => {\r\n    return items.filter(\r\n      (i) =>\r\n        i.type !== DIRECTORY_TYPES.PLAYLIST &&\r\n        i.label.toLowerCase().includes(search.toLowerCase())\r\n    );\r\n  }, [items, search]);\r\n\r\n  const addSequences = useCallback(\r\n    (ids) => {\r\n      const newSeqs = sequences\r\n        .filter((s) => ids.includes(s.id))\r\n        .filter((s) => !items.find((i) => i.id === s.id));\r\n      if (newSeqs.length === 0) {\r\n        alert(\"Sequences already exist in playlist\");\r\n      } else if (activePlaylist) {\r\n        patchPlaylist({\r\n          ...playlist,\r\n          items: [...items, ...newSeqs].map((i) => `${i.type}:${i.id}`)\r\n        });\r\n      } else {\r\n        setItems([\r\n          ...items,\r\n          ...newSeqs.map((s) => ({ type: DIRECTORY_TYPES.SEQUENCE, ...s }))\r\n        ]);\r\n        setSelectedItems([...selectedItems, ...newSeqs.map((s) => s.id)]);\r\n      }\r\n    },\r\n    [\r\n      sequences,\r\n      items,\r\n      activePlaylist,\r\n      playlist,\r\n      selectedItems,\r\n      setSelectedItems\r\n    ]\r\n  );\r\n\r\n  const addVideos = useCallback(\r\n    (ids) => {\r\n      const newVids = videos\r\n        .filter((v) => ids.includes(v.id))\r\n        .filter((v) => !items.find((i) => i.id === v.id));\r\n      if (newVids.length === 0) {\r\n        alert(\"Videos already in list\");\r\n      } else if (activePlaylist) {\r\n        // here the format \"type:id\" needs to be sent to backend\r\n        patchPlaylist({\r\n          ...playlist,\r\n          items: [...items, ...newVids].map((i) => `${i.type}:${i.id}`)\r\n        });\r\n      } else {\r\n        // here we keep the given format\r\n        // onle when sent to backend convert to item: [\"type:id\"]\r\n        setItems([\r\n          ...items,\r\n          ...newVids.map((v) => ({ type: DIRECTORY_TYPES.VIDEO, ...v }))\r\n        ]);\r\n        setSelectedItems([...selectedItems, ...newVids.map((v) => v.id)]);\r\n      }\r\n    },\r\n    [videos, items, activePlaylist, playlist, selectedItems, setSelectedItems]\r\n  );\r\n\r\n  const addPlaylists = useCallback(\r\n    (ids) => {\r\n      const listItems = playlists\r\n        .filter((p) => ids.includes(p.id))\r\n        .reduce(\r\n          (prev, curr) => Array.from(new Set([...prev, ...curr.items])),\r\n          []\r\n        );\r\n\r\n      const newItems = listItems\r\n        .filter((i) => {\r\n          const [type, id] = i.split(\":\");\r\n          return !items.find((v) => v.type === type && v.id === id);\r\n        })\r\n        .map((i) => {\r\n          const [type, id] = i.split(\":\");\r\n          return (type === DIRECTORY_TYPES.VIDEO ? videos : sequences).find(\r\n            (i) => i.id === id\r\n          );\r\n        });\r\n\r\n      const itemsToAdd = Array.from(new Set([...items, ...newItems]));\r\n\r\n      if (activePlaylist && (ids.length > 1 || ids[0] !== activePlaylist)) {\r\n        setActivePlaylist();\r\n        setSelectedItems(itemsToAdd.map((i) => i.id));\r\n      }\r\n      setItems(itemsToAdd);\r\n    },\r\n    [\r\n      playlists,\r\n      items,\r\n      setItems,\r\n      activePlaylist,\r\n      setActivePlaylist,\r\n      playlist,\r\n      selectedItems,\r\n      setSelectedItems\r\n    ]\r\n  );\r\n\r\n  const addVideoToPlaylist = useCallback(\r\n    (ids) => {\r\n      const videoIds = items\r\n        .filter((i) => i.type === DIRECTORY_TYPES.VIDEO)\r\n        .map((i) => i.id);\r\n\r\n      const newVideos = videos\r\n        .filter((v) => ids.includes(v.id) && !videoIds.includes(v.id))\r\n        .map((v) => `VIDEO:${v.id}`);\r\n\r\n      if (newVideos.length === 0) {\r\n        alert(\"All Videos already exist in Playlist\");\r\n      } else {\r\n        patchPlaylist({\r\n          ...playlist,\r\n          items: [...playlist.items, ...newVideos]\r\n        });\r\n      }\r\n    },\r\n    [items, videos, playlist]\r\n  );\r\n\r\n  const addSequenceToPlaylist = useCallback(\r\n    (ids) => {\r\n      const sequenceIds = items\r\n        .filter((i) => i.type === DIRECTORY_TYPES.SEQUENCE)\r\n        .map((i) => i.id);\r\n\r\n      const newSequences = sequences\r\n        .filter((s) => ids.includes(s.id) && !sequenceIds.includes(s.id))\r\n        .map((s) => `SEQUENCE:${s.id}`);\r\n\r\n      if (newSequences.length === 0) {\r\n        alert(\"All sequences already exist in playlist\");\r\n      } else {\r\n        patchPlaylist({\r\n          ...playlist,\r\n          items: [...playlist.items, ...newSequences]\r\n        });\r\n      }\r\n    },\r\n    [items, sequences, playlist]\r\n  );\r\n\r\n  const addPlaylistsToPlaylist = useCallback(\r\n    (ids) => {\r\n      const draggedPlaylists = playlists.filter((p) => ids.includes(p.id));\r\n      const draggedItemIds = draggedPlaylists.reduce((prev, curr) => {\r\n        return Array.from(new Set([...prev, ...curr.items]));\r\n      }, []);\r\n      const newDraggedItemIds = Array.from(\r\n        new Set([...playlist.items, ...draggedItemIds])\r\n      );\r\n      if (newDraggedItemIds.length > playlist.items.length) {\r\n        patchPlaylist({\r\n          ...playlist,\r\n          items: newDraggedItemIds\r\n        });\r\n      } else {\r\n        console.log(\"No New Items to add\");\r\n      }\r\n    },\r\n    [playlists, playlist]\r\n  );\r\n\r\n  const handleDrop = useCallback(\r\n    (e) => {\r\n      const { ids, type } = JSON.parse(e.dataTransfer.getData(\"text/plain\"));\r\n      if (playlist) {\r\n        if (type === DIRECTORY_TYPES.VIDEO) {\r\n          addVideoToPlaylist(ids);\r\n        } else if (type === DIRECTORY_TYPES.SEQUENCE) {\r\n          addSequenceToPlaylist(ids);\r\n        } else if (type === DIRECTORY_TYPES.PLAYLIST) {\r\n          addPlaylistsToPlaylist(ids);\r\n        }\r\n      } else {\r\n        if (type === DIRECTORY_TYPES.VIDEO) {\r\n          addVideos(ids);\r\n        } else if (type === DIRECTORY_TYPES.SEQUENCE) {\r\n          addSequences(ids);\r\n        } else if (type === DIRECTORY_TYPES.PLAYLIST) {\r\n          if (ids.length === 1 && items.length === 0) {\r\n            setActivePlaylist(ids[0]);\r\n          } else {\r\n            addPlaylists(ids);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    [\r\n      addVideoToPlaylist,\r\n      addSequenceToPlaylist,\r\n      addPlaylistsToPlaylist,\r\n      addVideos,\r\n      addSequences,\r\n      setActivePlaylist,\r\n      addPlaylists\r\n    ]\r\n  );\r\n\r\n  const arrangeItems = useCallback(\r\n    (arrangedItems) => {\r\n      if (playlist) {\r\n        patchPlaylist({\r\n          ...playlist,\r\n          items: itemsToPlaylistItems(arrangedItems)\r\n        });\r\n      } else {\r\n        setItems(arrangedItems);\r\n      }\r\n    },\r\n    [playlist]\r\n  );\r\n\r\n  const handleClose = useCallback(() => {\r\n    setActivePlaylist();\r\n    setGlobalState(PLAYER_ITEM, undefined);\r\n    setItems([]);\r\n  }, [setActivePlaylist, setItems]);\r\n\r\n  return (\r\n    <div\r\n      onDrop={handleDrop}\r\n      onDragOver={(e) => e.preventDefault()}\r\n      className={`playlist ${open ? \"open\" : \"\"} grid grid-tr-1m`}\r\n    >\r\n      <div className=\"playlist_header stretched-grid overflow-h grid-tr-m1\">\r\n        <div className=\"stretched-grid bg-white\">\r\n          <h4 className=\"aligned-grid grid-tc-m1m gap-m pd-05\">\r\n            <i className=\"material-icons\">queue_music</i>\r\n            {!playlist ? \"Playlist\" : playlist.label}\r\n            {items.length !== 0 && (\r\n              <i onClick={handleClose} className=\"material-icons\">\r\n                close\r\n              </i>\r\n            )}\r\n          </h4>\r\n          {items.length !== 0 && (\r\n            <div className=\"stretched-grid\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search Playlist...\"\r\n                value={search}\r\n                onChange={({ target: { value } }) => setSearch(value)}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n        <ListList\r\n          items={items}\r\n          selectedItems={selectedItems}\r\n          filteredItems={filteredItems}\r\n          setSelectedItems={setSelectedItems}\r\n          arrangeItems={arrangeItems}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"playlist_controls grid gap-xs z1\">\r\n        {items.length !== 0 && (\r\n          <>\r\n            {selectedItems.length !== 0 && (\r\n              <ListSelection\r\n                activePlaylist={activePlaylist}\r\n                items={items}\r\n                setItems={setItems}\r\n                selectedItems={selectedItems}\r\n                playlist={playlist}\r\n              />\r\n            )}\r\n            <ListActions items={items} />\r\n          </>\r\n        )}\r\n      </div>\r\n      <Player />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport \"./Dashboard.scss\";\r\n\r\nimport { Header } from \"../components/Dashboard/DashboardHeader\";\r\nimport { Menu } from \"../components/Dashboard/Menu\";\r\nimport { Directory } from \"../components/Dashboard/Directory\";\r\nimport { Playlist } from \"../components/Dashboard/List\";\r\nimport { getFolders } from \"../stores/folder\";\r\nimport { getVideos } from \"../stores/videos\";\r\nimport { getPlaylists } from \"../stores/playlists\";\r\nimport { Hint } from \"../components/Hint\";\r\nimport { getSequences } from \"../stores/sequences\";\r\nimport { setGlobalState, useGlobalState } from \"react-global-state-hook\";\r\n\r\nexport const INITIALIZED = \"INITIALIZED\";\r\n\r\nconst getUserData = async () => {\r\n  await Promise.all([\r\n    getFolders(),\r\n    getVideos(),\r\n    getPlaylists(),\r\n    getSequences()\r\n  ]);\r\n  setGlobalState(INITIALIZED, true);\r\n};\r\n\r\nexport const Dashboard = ({ history: { push } }) => {\r\n  const [initialized] = useGlobalState(INITIALIZED, false);\r\n\r\n  useEffect(() => {\r\n    getUserData();\r\n  }, []);\r\n\r\n  return initialized ? (\r\n    <div className=\"dashboard grid grid-tr-m1 grid-tc-m1m bg-grey-light gap-s overflow-h\">\r\n      <Header push={push} />\r\n      <Menu />\r\n      <Directory />\r\n      <Playlist />\r\n      <Hint />\r\n    </div>\r\n  ) : (\r\n    <div className=\"centered-grid\">\r\n      <b>Loading User Data...</b>\r\n    </div>\r\n  );\r\n};\r\n","export const secondsToTime = (secs) => {\r\n  const minutes = Math.floor(secs / 60);\r\n  const [s, ms] = String(secs - minutes * 60).split(\".\");\r\n\r\n  const seconds = s.length === 1 ? \"0\" + s : s;\r\n  const miliseconds = ms ? String(ms).slice(0, 2) : 0;\r\n\r\n  return `${minutes > 9 ? minutes : \"0\" + minutes}:${seconds}`;\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport {\r\n  useGlobalState,\r\n  getGlobalState,\r\n  setGlobalState\r\n} from \"react-global-state-hook\";\r\nimport { PLAYER_PROGRESS, SEQUENCER_VIDEO } from \"../../views/Sequencer\";\r\nimport {\r\n  EDITING_SEQUENCE,\r\n  patchSequence,\r\n  postSequence\r\n} from \"../../stores/sequences\";\r\nimport { secondsToTime } from \"../../utils/secondsToTime\";\r\n\r\nexport const TAGGER_ACTIVE_TIME = \"TAGGER_ACTIVE_TIME\";\r\nexport const TAGGER_START = \"TAGGER_START\";\r\nexport const TAGGER_STOP = \"TAGGER_STOP\";\r\nexport const TAGGER_LABEL = \"TAGGER_LABEL\";\r\nexport const TAGGER_FAST_TAG = \"TAGGER_QUICK_TAG\";\r\n\r\nconst handleControls = (e) => {\r\n  const event = e.detail;\r\n  const fastTagging = getGlobalState(TAGGER_FAST_TAG);\r\n  if (event === \"tag\") {\r\n    const activeTime = getGlobalState(TAGGER_ACTIVE_TIME);\r\n    const start = getGlobalState(TAGGER_START);\r\n\r\n    if (fastTagging) {\r\n      if (activeTime === \"start\") {\r\n        setStart();\r\n      } else {\r\n        setStop();\r\n        handleSubmit(true);\r\n        setStart();\r\n      }\r\n    } else {\r\n      if (!activeTime && !start) {\r\n        console.log(\"starting START\");\r\n        setGlobalState(TAGGER_ACTIVE_TIME, \"start\");\r\n      } else if (activeTime === \"start\") {\r\n        console.log(\"SETTING START\");\r\n        setStart();\r\n      } else if (activeTime === \"stop\") {\r\n        console.log(\"SETTING STOP\");\r\n        setStop();\r\n      } else {\r\n        console.log(\"SBMITTING\");\r\n        handleSubmit();\r\n      }\r\n    }\r\n  } else if (event === \"tagback\") {\r\n    const activeTime = getGlobalState(TAGGER_ACTIVE_TIME);\r\n    const start = getGlobalState(TAGGER_START);\r\n    // only when start has a value\r\n    if (activeTime === \"start\") {\r\n      resetTagger();\r\n    } else if (activeTime === \"stop\") {\r\n      setGlobalState(TAGGER_ACTIVE_TIME, \"start\");\r\n    } else if (!activeTime && start) {\r\n      setGlobalState(TAGGER_ACTIVE_TIME, \"stop\");\r\n    }\r\n  } else if (event === \"fasttagging\") {\r\n    setGlobalState(TAGGER_FAST_TAG, !fastTagging);\r\n  } else if (event === \"close\") {\r\n    resetTagger();\r\n  }\r\n};\r\n\r\nconst handleSubmit = (fastTagging?: any) => {\r\n  const editingSequence = getGlobalState(EDITING_SEQUENCE);\r\n  const start = getGlobalState(TAGGER_START);\r\n  const stop = getGlobalState(TAGGER_STOP);\r\n  const label = getGlobalState(TAGGER_LABEL);\r\n  if (!label) {\r\n    alert(\"Label required!\");\r\n  } else {\r\n    resetTagger(fastTagging);\r\n    if (editingSequence) {\r\n      patchSequence({\r\n        ...editingSequence,\r\n        start,\r\n        stop,\r\n        label\r\n      });\r\n    } else {\r\n      const { id, url } = getGlobalState(SEQUENCER_VIDEO);\r\n      postSequence({\r\n        videoId: id,\r\n        start,\r\n        stop,\r\n        label,\r\n        url\r\n      });\r\n    }\r\n  }\r\n};\r\n\r\nconst handleStartClick = (e) => {\r\n  if (e) e.stopPropagation();\r\n  setStart();\r\n};\r\n\r\nconst setStart = () => {\r\n  const { playedSeconds = 0 } = getGlobalState(PLAYER_PROGRESS);\r\n  const time = Number(playedSeconds.toFixed(2));\r\n  setGlobalState(TAGGER_START, time);\r\n  setGlobalState(TAGGER_ACTIVE_TIME, \"stop\");\r\n};\r\n\r\nconst handleStopClick = (e) => {\r\n  if (e) e.stopPropagation();\r\n  setStop();\r\n};\r\n\r\nconst setStop = () => {\r\n  const { playedSeconds } = getGlobalState(PLAYER_PROGRESS);\r\n  const time = Number(playedSeconds.toFixed(2));\r\n  setGlobalState(TAGGER_STOP, time);\r\n  setGlobalState(TAGGER_ACTIVE_TIME, undefined);\r\n};\r\n\r\nconst handleDismiss = () => {\r\n  resetTagger();\r\n  setGlobalState(EDITING_SEQUENCE, undefined);\r\n};\r\n\r\nconst resetTagger = (fastTagging?: boolean) => {\r\n  setGlobalState(TAGGER_ACTIVE_TIME, \"start\");\r\n  setGlobalState(TAGGER_LABEL, \"\");\r\n  if (fastTagging) {\r\n    setStart();\r\n  } else {\r\n    setGlobalState(TAGGER_START, undefined);\r\n  }\r\n  setGlobalState(TAGGER_STOP, undefined);\r\n};\r\n\r\nexport const Tagger = () => {\r\n  const [activeTime, setActiveTime]: any = useGlobalState(\r\n    TAGGER_ACTIVE_TIME,\r\n    \"start\"\r\n  );\r\n  const [editingSequence] = useGlobalState(EDITING_SEQUENCE);\r\n\r\n  const [label, setLabel] = useGlobalState(TAGGER_LABEL, \"\");\r\n  const [progress] = useGlobalState(PLAYER_PROGRESS);\r\n\r\n  const [start, setStart]: any = useGlobalState(TAGGER_START);\r\n  const [stop, setStop]: any = useGlobalState(TAGGER_STOP);\r\n\r\n  useEffect(() => {\r\n    const ta = document.getElementById(\"tagInput\");\r\n    if (ta) {\r\n      ta.focus();\r\n    }\r\n  }, [start, stop, activeTime]);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"controls\", handleControls);\r\n    return () => document.removeEventListener(\"controls\", handleControls);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (editingSequence) {\r\n      console.log(\"EDIETING\");\r\n\r\n      setStart(editingSequence.start);\r\n      setStop(editingSequence.stop);\r\n      setLabel(editingSequence.label);\r\n      setActiveTime();\r\n    }\r\n  }, [editingSequence, setStart, setStop, setLabel, setActiveTime]);\r\n\r\n  const activateStart = () =>\r\n    setActiveTime(activeTime === \"start\" ? \"\" : \"start\");\r\n  const activateStop = () => setActiveTime(activeTime === \"stop\" ? \"\" : \"stop\");\r\n  const handleLabelChange = ({ target: { value } }) => setLabel(value);\r\n\r\n  return (\r\n    <div className=\"sequencer_list-tagger shadow-l grid\">\r\n      <div className=\"sequencer_list-tagger-times grid bg-grey-light gap-xs\">\r\n        <div\r\n          className=\"bg-white centered-grid grid-tc-m1\"\r\n          onClick={activateStart}\r\n        >\r\n          <span className=\"pd-1\">\r\n            {activeTime === \"start\"\r\n              ? secondsToTime(progress.playedSeconds || 0)\r\n              : secondsToTime(start)}\r\n          </span>\r\n          {activeTime === \"start\" && (\r\n            <button className=\"pd-1 bg-grey\" onClick={handleStartClick}>\r\n              Set Tag\r\n            </button>\r\n          )}\r\n        </div>\r\n        {(start || start === 0) && (\r\n          <div\r\n            className=\"bg-white centered-grid grid-tc-m1\"\r\n            onClick={activateStop}\r\n          >\r\n            <span className=\"pd-1\">\r\n              {activeTime === \"stop\"\r\n                ? secondsToTime(progress.playedSeconds)\r\n                : secondsToTime(stop)}\r\n            </span>\r\n            {activeTime === \"stop\" && (\r\n              <button className=\"pd-1 bg-grey\" onClick={handleStopClick}>\r\n                Set Stop\r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n      {(start || start === 0) && (\r\n        <>\r\n          <textarea\r\n            className=\"pd-1\"\r\n            id=\"tagInput\"\r\n            onChange={handleLabelChange}\r\n            value={label}\r\n            placeholder=\"Add Label to Tag...\"\r\n          />\r\n          <div className=\"sequencer_list-tagger-buttons stretched-grid gap-xs bg-grey-light\">\r\n            <button className=\"bg-white pd-1\" onClick={handleDismiss}>\r\n              {editingSequence ? \"Dismiss\" : \"Close\"}\r\n            </button>\r\n            <button\r\n              className=\"bg-white pd-1\"\r\n              disabled={!start || !label}\r\n              onClick={handleSubmit}\r\n            >\r\n              Submit\r\n            </button>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { setGlobalState } from \"react-global-state-hook\";\r\nimport { FILTERED_SEQUENCES } from \"../../stores/sequences\";\r\n\r\nexport const SequencerListHeader = ({ sequences }) => {\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const filtered = sequences.filter((s) =>\r\n      s.label.toLowerCase().includes(search.toLowerCase())\r\n    );\r\n\r\n    setGlobalState(FILTERED_SEQUENCES, filtered);\r\n  }, [search, sequences]);\r\n\r\n  return (\r\n    <div className=\"sequencer_list-header grid grid-tc-1m shadow-s z1\">\r\n      <input\r\n        className=\"bg-grey-light\"\r\n        type=\"text\"\r\n        placeholder=\"Search sequences...\"\r\n        onChange={({ target: { value } }) => setSearch(value)}\r\n        value={search}\r\n      />\r\n      <i className=\"material-icons pd-005\">filter_list</i>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useCallback, useEffect } from \"react\";\r\n\r\nimport ReactPlayer from \"react-player\";\r\n\r\nimport {\r\n  setGlobalState,\r\n  useGlobalState,\r\n  getGlobalState\r\n} from \"react-global-state-hook\";\r\nimport { PLAYER_PROGRESS } from \"../../views/Sequencer\";\r\n\r\nexport const SEQUENCER_PLAYER = \"SEQUENCER_PLAYER\";\r\nexport const SEQUENCER_PLAYER_PLAYING = \"SEQUENCER_PLAYER_PLAYING\";\r\nexport const SEQUENCER_PLAYING_SEQUENCES = \"SEQUENCER_PLAYING_SEQUENCES\";\r\nexport const SEQUENCER_PLAYER_PLAYBACK_RATE = \"SEQUENCER_PLAYER_PLAYBACK_RATE\";\r\n\r\nsetGlobalState(SEQUENCER_PLAYER, { ready: false, player: null });\r\nsetGlobalState(SEQUENCER_PLAYING_SEQUENCES, []);\r\nsetGlobalState(SEQUENCER_PLAYER_PLAYBACK_RATE, 1);\r\n\r\nexport const SequencerVideo = ({ selectedVideo, sequences }) => {\r\n  const [playing] = useGlobalState(SEQUENCER_PLAYER_PLAYING, false);\r\n  const [playbackRate, setPlaybackRate] = useGlobalState(\r\n    SEQUENCER_PLAYER_PLAYBACK_RATE\r\n  );\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"controls\", handleControls);\r\n    return () => document.removeEventListener(\"controls\", handleControls);\r\n  }, [playbackRate]);\r\n\r\n  const handleControls = (e) => {\r\n    const event = e.detail;\r\n    if (event === \"playback\") {\r\n      setPlaybackRate(playbackRate === 1 ? 0.5 : 1);\r\n    }\r\n  };\r\n\r\n  const handleProgress = useCallback(\r\n    (progress) => {\r\n      const playedSeconds = Number(progress.playedSeconds.toFixed(2));\r\n      setGlobalState(PLAYER_PROGRESS, {\r\n        playedSeconds\r\n      });\r\n      const playingSequences = sequences\r\n        .filter(\r\n          ({ start, stop }) => start <= playedSeconds && stop >= playedSeconds\r\n        )\r\n        .map((s) => s.id);\r\n      setGlobalState(SEQUENCER_PLAYING_SEQUENCES, playingSequences);\r\n    },\r\n    [sequences]\r\n  );\r\n\r\n  console.log(playing);\r\n\r\n  const ref = (p) => {\r\n    const playerState = getGlobalState(SEQUENCER_PLAYER);\r\n    setGlobalState(SEQUENCER_PLAYER, { ...playerState, player: p });\r\n  };\r\n\r\n  const handleReady = () => {\r\n    const playerState = getGlobalState(SEQUENCER_PLAYER);\r\n    setGlobalState(SEQUENCER_PLAYER, { ...playerState, ready: true });\r\n  };\r\n\r\n  return (\r\n    <div className=\"sequencer_video\">\r\n      {selectedVideo ? (\r\n        <ReactPlayer\r\n          className={\"player\"}\r\n          height=\"100%\"\r\n          width=\"auto\"\r\n          pip={true}\r\n          playing={playing}\r\n          playbackRate={playbackRate}\r\n          ref={ref}\r\n          url={selectedVideo.url}\r\n          onReady={handleReady}\r\n          progressInterval={100}\r\n          onProgress={handleProgress}\r\n          controls={true}\r\n        />\r\n      ) : (\r\n        \"Loading Video\"\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useMemo, useState, useEffect } from \"react\";\r\n\r\nimport {\r\n  useGlobalState,\r\n  setGlobalState,\r\n  getGlobalState\r\n} from \"react-global-state-hook\";\r\nimport {\r\n  FILTERED_SEQUENCES,\r\n  SELECTED_SEQUENCES,\r\n  EDITING_SEQUENCE\r\n} from \"../../stores/sequences\";\r\nimport {\r\n  SEQUENCER_PLAYER,\r\n  SEQUENCER_PLAYER_PLAYING,\r\n  SEQUENCER_PLAYING_SEQUENCES\r\n} from \"./SequencerVideo\";\r\nimport { secondsToTime } from \"../../utils/secondsToTime\";\r\n\r\nlet timeout;\r\nlet lastSort;\r\n\r\nexport const SequencerList = ({ sequences: seqs, sequenceId }) => {\r\n  const [selectedSequences, setSelectedSequences] = useGlobalState(\r\n    SELECTED_SEQUENCES\r\n  );\r\n  const [sequences] = useGlobalState(FILTERED_SEQUENCES);\r\n  // const [sequences] = useGlobalState(FILTERED_SEQUENCES);\r\n  const [activeSequenceId, setActiveSequenceId] = useState(sequenceId);\r\n  const [playingSequenceIds] = useGlobalState(SEQUENCER_PLAYING_SEQUENCES);\r\n  const [editingSequence, setEditingSequence] = useGlobalState(\r\n    EDITING_SEQUENCE\r\n  );\r\n  const [sortTime, setSortTime]: any = useState(\"asc\");\r\n  const [sortLabel, setSortLabel]: any = useState();\r\n\r\n  useEffect(() => {\r\n    lastSort = \"time\";\r\n  }, [sortTime]);\r\n\r\n  useEffect(() => {\r\n    lastSort = \"label\";\r\n  }, [sortLabel]);\r\n\r\n  useEffect(() => {\r\n    if (sequenceId) {\r\n      const sequence = sequences.find((s) => s.id === sequenceId);\r\n      if (sequence) {\r\n        seekToSequence(sequenceId);\r\n      }\r\n    }\r\n  }, [sequenceId, sequences]);\r\n\r\n  const handleSelect = (e) => {\r\n    e.stopPropagation();\r\n    const id = e.target.closest(\"li\").id;\r\n\r\n    if (selectedSequences.includes(id)) {\r\n      setSelectedSequences(selectedSequences.filter((s) => s !== id));\r\n    } else {\r\n      setSelectedSequences([...selectedSequences, id]);\r\n    }\r\n  };\r\n\r\n  const editSequence = (id) => {\r\n    const sequence = sequences.find((s) => s.id === id);\r\n    setEditingSequence(sequence);\r\n  };\r\n\r\n  const handleClick = (e) => {\r\n    const id = e.target.closest(\"li\").id;\r\n    if (timeout) {\r\n      editSequence(id);\r\n      clearTimeout(timeout);\r\n      timeout = undefined;\r\n    } else {\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(() => {\r\n        setActiveSequenceId(id);\r\n        // cant use an effect here because this will not fire when clicked on the same id\r\n        seekToSequence(id);\r\n        clearTimeout(timeout);\r\n        timeout = undefined;\r\n      }, 200);\r\n    }\r\n  };\r\n\r\n  const seekToSequence = (id) => {\r\n    const { player, ready } = getGlobalState(SEQUENCER_PLAYER);\r\n    if (player && ready) {\r\n      const sequence = sequences.find((s) => s.id === id);\r\n      if (sequence) {\r\n        player.seekTo(sequence.start, \"seconds\");\r\n        setGlobalState(SEQUENCER_PLAYER_PLAYING, true);\r\n      }\r\n    } else {\r\n      setTimeout(() => {\r\n        seekToSequence(id);\r\n      }, 500);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (e) => {\r\n    e.stopPropagation();\r\n    const id = e.target.closest(\"li\").id;\r\n    editSequence(id);\r\n  };\r\n\r\n  const sortedSequences = useMemo(() => {\r\n    let sorted = sequences.sort((a, b) => {\r\n      if (sortTime === \"asc\") {\r\n        return a.start - b.start;\r\n      }\r\n      return b.start - a.start;\r\n    });\r\n    if (!!sortLabel && lastSort === \"label\") {\r\n      sorted = sorted.sort((a, b) => {\r\n        var nameA = a.label.toUpperCase(); // ignore upper and lowercase\r\n        var nameB = b.label.toUpperCase(); // ignore upper and lowercase\r\n        if (nameA < nameB) {\r\n          return sortLabel === \"asc\" ? -1 : 1;\r\n        }\r\n        if (nameA > nameB) {\r\n          return sortLabel === \"asc\" ? 1 : -1;\r\n        }\r\n        return 0;\r\n      });\r\n    }\r\n    return sorted;\r\n  }, [sequences, sortLabel, sortTime]);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"controls\", handleControls);\r\n    return () => document.removeEventListener(\"controls\", handleControls);\r\n  }, [sortedSequences, activeSequenceId]);\r\n\r\n  const handleControls = (e) => {\r\n    const event = e.detail;\r\n    const activeIndex = sortedSequences.findIndex(\r\n      (i) => i.id == activeSequenceId\r\n    );\r\n    if (event === \"next\" || event === \"back\") {\r\n      let nextIndex;\r\n      if (event === \"next\") {\r\n        nextIndex =\r\n          activeIndex < sortedSequences.length - 1 ? activeIndex + 1 : 0;\r\n      } else if (event === \"back\") {\r\n        nextIndex =\r\n          activeIndex > 0 ? activeIndex - 1 : sortedSequences.length - 1;\r\n      }\r\n      const nextId = sortedSequences[nextIndex].id;\r\n      setActiveSequenceId(nextId);\r\n      seekToSequence(nextId);\r\n    } else if (event === \"edit\") {\r\n      editSequence(activeSequenceId);\r\n    }\r\n  };\r\n\r\n  const handleSortLabel = () => {\r\n    if (!sortLabel) {\r\n      setSortLabel(\"asc\");\r\n    } else if (sortLabel === \"asc\") {\r\n      setSortLabel(\"desc\");\r\n    } else {\r\n      setSortLabel();\r\n    }\r\n  };\r\n\r\n  const handleSortTime = () => {\r\n    if (sortTime === \"desc\") {\r\n      setSortTime(\"asc\");\r\n    } else {\r\n      setSortTime(\"desc\");\r\n    }\r\n  };\r\n\r\n  const allSelected = useMemo(() => {\r\n    return sequences.every((s) => selectedSequences.includes(s.id));\r\n  }, [selectedSequences, sequences]);\r\n\r\n  const handleSelectAll = () => {\r\n    if (allSelected) {\r\n      const allIds = sequences.map((s) => s.id);\r\n      setSelectedSequences(\r\n        selectedSequences.filter((s) => !allIds.includes(s))\r\n      );\r\n    } else {\r\n      setSelectedSequences(\r\n        Array.from(\r\n          new Set([...selectedSequences, ...sequences.map((s) => s.id)])\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ul className=\"sequencer_list-list\">\r\n      <li className=\"sequencer_list-list-sort stretched-grid gap-xs bg-grey-light\">\r\n        <span\r\n          className=\"centered-grid bg-white pd-05 gap-m\"\r\n          onClick={handleSortTime}\r\n        >\r\n          <i className=\"material-icons\">\r\n            {!sortTime\r\n              ? \"unfold_more\"\r\n              : sortTime === \"desc\"\r\n              ? \"expand_less\"\r\n              : \"expand_more\"}\r\n          </i>\r\n        </span>\r\n        <span\r\n          className=\"aligned-grid bg-white pd-05 gap-m\"\r\n          onClick={handleSortLabel}\r\n        >\r\n          <i className=\"material-icons\">\r\n            {!sortLabel\r\n              ? \"unfold_more\"\r\n              : sortLabel === \"desc\"\r\n              ? \"expand_less\"\r\n              : \"expand_more\"}\r\n          </i>\r\n        </span>\r\n        <i\r\n          onClick={handleSelectAll}\r\n          className=\"material-icons aligned-grid bg-white pd-05\"\r\n        >\r\n          {allSelected ? \"check_box\" : \"check_box_outline_blank\"}\r\n        </i>\r\n      </li>\r\n      {sortedSequences.map((s, i) => {\r\n        const selected = selectedSequences.includes(s.id);\r\n        const active = activeSequenceId === s.id;\r\n        const playing = playingSequenceIds.includes(s.id);\r\n        const editing = editingSequence && editingSequence.id === s.id;\r\n        return (\r\n          <li\r\n            data-active={active}\r\n            data-playing={playing}\r\n            data-editing={editing}\r\n            data-loading={!s.id}\r\n            onClick={handleClick}\r\n            id={s.id || i}\r\n            key={i}\r\n            className=\"stretched-grid gap-xs bg-grey-light\"\r\n          >\r\n            <div className=\"stretched-grid bg-white\">\r\n              <span className=\"centered-grid\">{secondsToTime(s.start)}</span>\r\n            </div>\r\n            <label className=\"aligned-grid bg-white pd-05 gap-m grid-tc-1m\">\r\n              {s.label}\r\n              <i onClick={handleEdit} className=\"material-icons\">\r\n                edit\r\n              </i>\r\n            </label>\r\n            <i\r\n              onClick={handleSelect}\r\n              className=\"material-icons aligned-grid bg-white pd-05\"\r\n            >\r\n              {!s.id\r\n                ? \"close\"\r\n                : selected\r\n                ? \"check_box\"\r\n                : \"check_box_outline_blank\"}\r\n            </i>\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n","import React, { useMemo } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { FOLDERS } from \"../../stores/folder\";\r\nimport { useGlobalState, setGlobalState } from \"react-global-state-hook\";\r\nimport { MODAL } from \"../Modal\";\r\n\r\nexport const SEQUENCER_TARGET_FOLDER = \"SEQUENCER_TARGET_FOLDER\";\r\n\r\nexport const SequencerHeader = ({ selectedVideo }) => {\r\n  const [targetFolderId, setTargetFolderId] = useGlobalState(\r\n    SEQUENCER_TARGET_FOLDER,\r\n    null\r\n  );\r\n  const [folders] = useGlobalState(FOLDERS);\r\n\r\n  const targetFolder = useMemo(() => {\r\n    return folders.find((f) => f.id === targetFolderId);\r\n  }, [targetFolderId, folders]);\r\n\r\n  const handleSelectFolder = () => {\r\n    setGlobalState(MODAL, {\r\n      component: \"selectFolder\",\r\n      props: {\r\n        onSelect: (id) => setTargetFolderId(id)\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleEdit = () => {\r\n    setGlobalState(MODAL, {\r\n      component: \"video\",\r\n      props: selectedVideo\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"sequencer_header aligned-grid grid-tc-m1m z2 gap-m\">\r\n      <Link to=\"/dashboard\" className=\"pd-01 centered-grid\">\r\n        <i className=\"material-icons\">home</i>\r\n      </Link>\r\n      <div className=\"sequencer_header-info aligned-grid grid-tc-m1m gap-m\">\r\n        <i className=\"material-icons\">ondemand_video</i>\r\n        {!selectedVideo ? \"Loading Video...\" : selectedVideo.label}\r\n        <i onClick={handleEdit} className=\"material-icons\">\r\n          more_vert\r\n        </i>\r\n      </div>\r\n      {/* <button className=\"pd-01 bg-grey\" onClick={handleSelectFolder}>\r\n        <i className=\"material-icons\">folder</i>\r\n        {!targetFolder ? \"Root Folder\" : targetFolder.label}\r\n      </button> */}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport {\r\n  useGlobalState,\r\n  setGlobalState,\r\n  getGlobalState\r\n} from \"react-global-state-hook\";\r\nimport { SEQUENCER_PLAYER_PLAYING, SEQUENCER_PLAYER } from \"./SequencerVideo\";\r\nimport { PLAYER_PROGRESS } from \"../../views/Sequencer\";\r\n\r\nconst handleControls = (e) => {\r\n  const event = e.detail;\r\n  if (event === \"play\") {\r\n    setGlobalState(\r\n      SEQUENCER_PLAYER_PLAYING,\r\n      !getGlobalState(SEQUENCER_PLAYER_PLAYING)\r\n    );\r\n  } else if (event === \"forward\" || event === \"rewind\") {\r\n    const { player } = getGlobalState(SEQUENCER_PLAYER);\r\n    if (player) {\r\n      const progress = getGlobalState(PLAYER_PROGRESS);\r\n      const to =\r\n        event === \"forward\"\r\n          ? progress.playedSeconds + 5\r\n          : progress.playedSeconds - 5;\r\n      player.seekTo(to, \"seconds\");\r\n    }\r\n  }\r\n};\r\n\r\nexport const SequencerControls = () => {\r\n  const [playing] = useGlobalState(SEQUENCER_PLAYER_PLAYING);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"controls\", handleControls);\r\n    return () => document.removeEventListener(\"controls\", handleControls);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"sequencer_controls z1 gap-xs bg-white stretched-grid\">\r\n      <button>\r\n        <i className=\"material-icons\">{playing ? \"pause\" : \"play_arrow\"}</i>\r\n      </button>\r\n      <button>\r\n        <i className=\"material-icons\">fast_rewind</i>\r\n      </button>\r\n      <button>\r\n        <i className=\"material-icons\">fast_forward</i>\r\n      </button>\r\n      <button>\r\n        <i className=\"material-icons\">keyboard_arrow_up</i>\r\n      </button>\r\n      <button>\r\n        <i className=\"material-icons\">keyboard_arrow_down</i>\r\n      </button>\r\n      <button>\r\n        <i className=\"material-icons\">slow_motion_video</i>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { SELECTED_SEQUENCES, deleteSequences } from \"../../stores/sequences\";\r\nimport { useGlobalState, setGlobalState } from \"react-global-state-hook\";\r\nimport { MODAL } from \"../Modal\";\r\nimport { DIRECTORY_TYPES } from \"../../stores/folder\";\r\nimport { handleShare } from \"../Dashboard/Directory\";\r\nimport { TAGGER_FAST_TAG } from \"./Tagger\";\r\n\r\nexport const SequencerActions = () => {\r\n  const [selectedSequences, setSelectedSequences] = useGlobalState(\r\n    SELECTED_SEQUENCES\r\n  );\r\n  const [quickTag, setQuickTag] = useGlobalState(TAGGER_FAST_TAG);\r\n\r\n  const disabled = selectedSequences.length === 0;\r\n\r\n  const handleSave = () =>\r\n    setGlobalState(MODAL, {\r\n      component: DIRECTORY_TYPES.PLAYLIST,\r\n      onClose: () => setSelectedSequences([]),\r\n      props: {\r\n        items: selectedSequences.map((s) => `${DIRECTORY_TYPES.SEQUENCE}:${s}`)\r\n      }\r\n    });\r\n\r\n  const handleRemove = () => {\r\n    // check with backend if its deletable\r\n    deleteSequences(selectedSequences[0]);\r\n    setSelectedSequences(selectedSequences.filter((s, i) => i !== 0));\r\n  };\r\n\r\n  const onShare = () =>\r\n    handleShare(DIRECTORY_TYPES.SEQUENCE, selectedSequences[0]);\r\n\r\n  return (\r\n    <div className=\"sequencer_actions stretched-grid grid-ac-1\">\r\n      <button\r\n        className=\"centered-grid grid-tc-mm pd-01 gap-s\"\r\n        onClick={() => setQuickTag(!quickTag)}\r\n      >\r\n        <i className=\"material-icons\">\r\n          {quickTag ? \"check_box\" : \"check_box_outline_blank\"}\r\n        </i>\r\n        <small>\r\n          Fast <br />\r\n          Tagging\r\n        </small>\r\n      </button>\r\n      <button onClick={handleSave} disabled={disabled}>\r\n        <i className=\"material-icons\">playlist_add</i>\r\n      </button>\r\n      <button onClick={handleRemove} disabled={selectedSequences.length !== 1}>\r\n        <i className=\"material-icons\">delete</i>\r\n      </button>\r\n      <button onClick={onShare} disabled={selectedSequences.length !== 1}>\r\n        <i className=\"material-icons\">share</i>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useMemo } from \"react\";\r\nimport \"../components/Sequencer/Sequencer.scss\";\r\n\r\nimport { useGlobalState, setGlobalState } from \"react-global-state-hook\";\r\n\r\nimport { VIDEOS, getVideo } from \"../stores/videos\";\r\nimport { SEQUENCES } from \"../stores/sequences\";\r\nimport { Tagger } from \"../components/Sequencer/Tagger\";\r\nimport { SequencerListHeader } from \"../components/Sequencer/SequencerListHeader\";\r\nimport { SequencerList } from \"../components/Sequencer/SequencerList\";\r\nimport { SequencerHeader } from \"../components/Sequencer/SequencerHeader\";\r\nimport { SequencerVideo } from \"../components/Sequencer/SequencerVideo\";\r\nimport { SequencerControls } from \"../components/Sequencer/SequencerControls\";\r\nimport { SequencerActions } from \"../components/Sequencer/SequencerActions\";\r\nimport { getFolders } from \"../stores/folder\";\r\n\r\nexport const PLAYER_PROGRESS = \"PLAYER_PROGRESS\";\r\nexport const SEQUENCER_VIDEO = \"SEQUENCER_VIDEO\";\r\n\r\nconst KEY_EVENTS = {\r\n  0: \"play\",\r\n  10: \"tag\",\r\n  127: \"tagback\",\r\n  37: \"rewind\",\r\n  38: \"back\",\r\n  39: \"forward\",\r\n  40: \"next\",\r\n  81: \"fasttagging\",\r\n  67: \"close\",\r\n  66: \"edit\",\r\n  88: \"playback\"\r\n};\r\n\r\nconst handleKeyPress = (e) => {\r\n  const key = e.keyCode;\r\n  const ctrl = e.ctrlKey;\r\n  console.log(key);\r\n\r\n  if (ctrl) {\r\n    if (KEY_EVENTS[key]) {\r\n      const event = new CustomEvent(\"controls\", { detail: KEY_EVENTS[key] });\r\n      document.dispatchEvent(event);\r\n    }\r\n  }\r\n};\r\n\r\nexport const Sequencer = ({\r\n  match: {\r\n    params: { id }\r\n  },\r\n  location: { search }\r\n}) => {\r\n  const [videos] = useGlobalState(VIDEOS);\r\n  const [sequences] = useGlobalState(SEQUENCES);\r\n\r\n  useEffect(() => {\r\n    // Need all folders to select target folder\r\n    // Maybe sequences should always be saved in seuqnces/videoName?\r\n    getFolders();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // listen to keyboard shortcuts\r\n    // Maybe move this to aservice like script?\r\n    document.addEventListener(\"keypress\", handleKeyPress);\r\n    document.addEventListener(\"keydown\", handleKeyPress);\r\n    return () => {\r\n      document.removeEventListener(\"keypress\", handleKeyPress);\r\n      document.removeEventListener(\"keydown\", handleKeyPress);\r\n    };\r\n  }, [id]);\r\n\r\n  const sequenceId = useMemo(() => {\r\n    // In case a initial sequence is set as query params\r\n    // This sequence needs to be selected and played from the beginning\r\n    return search\r\n      .slice(1, search.length)\r\n      .split(\"&\")\r\n      .filter((q) => q.split(\"=\")[0] === \"sequenceId\")\r\n      .map((q) => q.split(\"=\")[1])\r\n      .find((_, i) => i === 0);\r\n  }, [search]);\r\n\r\n  useEffect(() => {\r\n    // Only get the video if its not existing in videos\r\n    // Makes this view independent of Dashboard\r\n    if (!videos.find((v) => v.id === id)) {\r\n      getVideo(id);\r\n    }\r\n  }, [id, videos]);\r\n\r\n  const selectedVideo = useMemo(() => videos.find((v) => v.id === id), [\r\n    videos,\r\n    id\r\n  ]);\r\n\r\n  useEffect(() => setGlobalState(SEQUENCER_VIDEO, selectedVideo), [\r\n    selectedVideo\r\n  ]);\r\n\r\n  const videoSequences = useMemo(() => {\r\n    if (selectedVideo) {\r\n      return sequences.filter((s) => s.videoId === selectedVideo.id);\r\n    }\r\n    return [];\r\n  }, [sequences, selectedVideo]);\r\n\r\n  return (\r\n    <div className=\"sequencer overflow-h grid grid-tc-1m grid-tr-m1 bg-grey-light\">\r\n      <SequencerHeader selectedVideo={selectedVideo} />\r\n      <SequencerVideo\r\n        sequences={videoSequences}\r\n        selectedVideo={selectedVideo}\r\n      />\r\n      <div className=\"sequencer_list grid grid-tr-m1mm\">\r\n        <SequencerListHeader sequences={videoSequences} />\r\n        <SequencerList sequences={videoSequences} sequenceId={sequenceId} />\r\n        <SequencerActions />\r\n        <Tagger />\r\n        <SequencerControls />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport \"./Landing.scss\";\r\nimport { useGlobalState } from \"react-global-state-hook\";\r\nimport { AUTH } from \"../services/auth\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst platforms = {\r\n  youtube: require(\"../assets/youtube.svg\"),\r\n  soundcloud: require(\"../assets/soundcloud.png\"),\r\n  twitch: require(\"../assets/twitch.svg\"),\r\n  dropbox: require(\"../assets/dropbox.png\"),\r\n  vimeo: require(\"../assets/vimeo.svg\"),\r\n  streamable: require(\"../assets/streamable.png\"),\r\n  wistia: require(\"../assets/wistia.svg\"),\r\n  dailymotion: require(\"../assets/dailymotion.svg\"),\r\n  vidyard: require(\"../assets/vidyard.svg\")\r\n};\r\n\r\nexport const Landing = () => {\r\n  const [auth] = useGlobalState(AUTH);\r\n\r\n  return (\r\n    <div className=\"landing gap-l\">\r\n      <header className=\"centered-grid grid-tc-1mm gap-l pd-01\">\r\n        <h2 className=\"js-s\">Viden</h2>\r\n        <nav className=\"centered-grid grid-ac-m grid-af-c gap-l\">\r\n          <a>How it works</a>\r\n          <a>Use cases</a>\r\n          <a>Pricing</a>\r\n        </nav>\r\n        {auth ? (\r\n          <Link to=\"/dashboard\">Dashboard</Link>\r\n        ) : (\r\n          <Link to=\"/auth/login\">Login</Link>\r\n        )}\r\n      </header>\r\n      <section>\r\n        <h4>\r\n          Viden is an online platform to manage streaming videos from multiple\r\n          sources, disect them into sequences, create playlists and share\r\n          content.\r\n        </h4>\r\n        <div>\r\n          <ul>\r\n            {Object.keys(platforms).map((key) => (\r\n              <li key={key}>\r\n                <img src={platforms[key]} alt={key} height=\"30px\" />\r\n              </li>\r\n            ))}\r\n            <li>... HLS and DASH are also supported.</li>\r\n          </ul>\r\n        </div>\r\n      </section>\r\n      <section className=\"how-to-section\">\r\n        <h4>How it works?</h4>\r\n        <p>\r\n          <label>1</label>\r\n          <span>\r\n            Copy a video link from YouTube, Twitch, Dropbox and others.\r\n            <br />! No video is saved on this platform. We only save a reference\r\n            to videos via url and interact with the sources provided player!\r\n          </span>\r\n        </p>\r\n        <p>\r\n          <label>2</label>\r\n          <span>\r\n            Go to your Viden dashboard and save the link into your directory.\r\n          </span>\r\n        </p>\r\n        <p>\r\n          <label>3</label>\r\n          <span>\r\n            You can create folders and organize your videos, playlists and\r\n            sequences. We provide an easy to use, drag & drop UI with a standard\r\n            folder system.\r\n          </span>\r\n        </p>\r\n        <p>\r\n          <label>4</label>\r\n          <span>\r\n            Creating playlists is as easy as dropping videos onto the playlist\r\n            panel. Once saved you can share (if enabled) your playlists as well\r\n            as videos via link online.\r\n          </span>\r\n        </p>\r\n        <p>\r\n          <label>5</label>\r\n          <span>\r\n            One of the main functionalities of Viden is to disect and tag\r\n            sequences. You can set a start and stop tag on every video as well\r\n            as a comment. Sequences can be shared and used in playlists, just\r\n            like any video.\r\n          </span>\r\n        </p>\r\n        <div></div>\r\n      </section>\r\n      <section className=\"use-cases-section\">\r\n        <h4>Use Cases</h4>\r\n        <div>\r\n          <p>\r\n            <h5>Tutorials and instructions:</h5>\r\n            <span>\r\n              Create playlists with videos and sequences for any step-by-step\r\n              tutorial. Cooking videos, how-to guides or educational playlists\r\n              can easily be created and shared online. We also enable an embed\r\n              functionality for anything you have created on Viden.\r\n            </span>\r\n          </p>\r\n          <p>\r\n            <h5>Music:</h5>\r\n            <span>\r\n              Create music playlists with videos from multiple platforms for\r\n              personal use or to share online. In case you want to add certain\r\n              songs from a concert or a set, you can simply disect it as a\r\n              sequence and use it in your playlist.\r\n            </span>\r\n          </p>\r\n          <p>\r\n            <h5>(e)Sports:</h5>\r\n            <span>\r\n              Viden provides a simple to use solution for time based video\r\n              analysis at very low cost. Tag sequences, create playlists and\r\n              highlights for your analysis and share them with your staff or\r\n              players. Live-streams can be used just like any other video!\r\n            </span>\r\n          </p>\r\n          <p>\r\n            <h5>Media:</h5>\r\n            <span>\r\n              Collaborate with your team and use Viden to easily share video\r\n              content back and forth. In the future we hope to integrate a\r\n              collborative team functionality, which enables teams and\r\n              enterprises to enhance their communication and content creation.\r\n            </span>\r\n          </p>\r\n          <p>\r\n            <h5>Social:</h5>\r\n            <span>\r\n              Want to share a small snippet of a video with your friends or a\r\n              playlists with funny moments or simply organize your favorite\r\n              online video content? Videns ultimate goal is it to manage, create\r\n              and share streaming content as easily and user friendly as\r\n              possible.\r\n            </span>\r\n          </p>\r\n        </div>\r\n        <div></div>\r\n      </section>\r\n      <section className=\"pricing-section\">\r\n        <h4>Pricing</h4>\r\n        <p>\r\n          Our goal is to create a sustainable and productive workplace as well\r\n          as service to our users. Therefore we are trying to have a good\r\n          balance between utility- and value based pricing. We believe in fair\r\n          pricing and transparent use of data.\r\n        </p>\r\n        <div>\r\n          <div>\r\n            <h5>\r\n              <i className=\"material-icons\">person</i>Private\r\n            </h5>\r\n            <div>\r\n              <p>Default setting when signing up.</p>\r\n              <p>Full access to all basic functionalities.</p>\r\n              <p>No functionality to share your content.</p>\r\n            </div>\r\n            <span>Free</span>\r\n          </div>\r\n\r\n          <div>\r\n            <h5>\r\n              <i className=\"material-icons\">share</i>Social\r\n            </h5>\r\n            <div>\r\n              <p>Full access to all basic functionalities.</p>\r\n              <p>\r\n                Content (videos, sequences, playlists) is sharable online via\r\n                link.\r\n              </p>\r\n              <p>Content can be embedded on your website.</p>\r\n            </div>\r\n            <span>1€ / month</span>\r\n          </div>\r\n\r\n          <div>\r\n            <h5>\r\n              <i className=\"material-icons\">people</i>Team/Enterprise\r\n            </h5>\r\n            <div>\r\n              <p>Full access to all basic functionalities.</p>\r\n              <p>\r\n                Content (videos, sequences, playlists) is sharable online via\r\n                link.\r\n              </p>\r\n              <p>Content can be embedded on your website.</p>\r\n              <p>Privately share and edit content within your team.</p>\r\n              <p>Commenting functonality on all your content.</p>\r\n            </div>\r\n            <span>Coming soon</span>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <footer>\r\n        <div>\r\n          <h2>Viden</h2>\r\n          <Link to=\"/impressum\">Imprint</Link>\r\n          <Link to=\"/datenschutz\">Data & Privacy</Link>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useRef, useEffect, useMemo } from \"react\";\r\nimport ReactPlayer from \"react-player\";\r\nimport { DIRECTORY_TYPES } from \"../../stores/folder\";\r\n\r\n// Like List in Dashboard\r\n\r\nexport const PlaylistViewer = (props: any) => {\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  const [activeItemId, setActiveItemId] = useState();\r\n  const [counter, setCounter] = useState(0);\r\n\r\n  const [playing, setPlaying] = useState(false);\r\n  const [playerReady, setPlayerReady] = useState(false);\r\n\r\n  const [url, setUrl] = useState();\r\n\r\n  const player: any = useRef();\r\n  const ref = (p) => (player.current = p);\r\n\r\n  const { videos, sequences, playlist } = props;\r\n\r\n  const handleReady = () => {\r\n    setPlayerReady(true);\r\n  };\r\n\r\n  const items = useMemo(\r\n    () =>\r\n      playlist.items\r\n        .map((i) => ({\r\n          type: i.split(\":\")[0],\r\n          id: i.split(\":\")[1]\r\n        }))\r\n        .map(({ id, type }) => {\r\n          if (type === DIRECTORY_TYPES.VIDEO) {\r\n            return { ...videos.find((v) => v.id === id), type };\r\n          } else if (type === DIRECTORY_TYPES.SEQUENCE) {\r\n            return { ...sequences.find((s) => s.id === id), type };\r\n          }\r\n        }),\r\n    [playlist]\r\n  );\r\n\r\n  const currentItem = useMemo(() => items.find((i) => i.id === activeItemId), [\r\n    items,\r\n    activeItemId\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (items.length > 0) {\r\n      setActiveItemId(items[0].id);\r\n      setUrl(items[0].url);\r\n    }\r\n  }, [items]);\r\n\r\n  useEffect(() => {\r\n    if (currentItem) {\r\n      if (currentItem.url !== url) {\r\n        setPlayerReady(false);\r\n        setUrl(currentItem.url);\r\n      } else if (playerReady) {\r\n        const to =\r\n          currentItem.type === DIRECTORY_TYPES.SEQUENCE ? currentItem.start : 0;\r\n        player.current.seekTo(to, \"seconds\");\r\n        setPlaying(true);\r\n      }\r\n    }\r\n  }, [playerReady, currentItem]);\r\n\r\n  const playNext = () => {\r\n    const currentIndex = items.findIndex((i) => i.id === currentItem.id);\r\n    if (currentIndex === items.length - 1) {\r\n      setPlaying(false);\r\n    } else {\r\n      const newItem = items.find((it, i) => i === currentIndex + 1);\r\n      setActiveItemId(newItem.id);\r\n    }\r\n  };\r\n\r\n  const handleEnd = () => playNext();\r\n\r\n  const handleProgress = ({ playedSeconds }) => {\r\n    currentItem.stop && playedSeconds >= currentItem.stop && playNext();\r\n  };\r\n\r\n  const handleSelect = (e) => {\r\n    setCounter(counter + 1);\r\n    setActiveItemId(e.target.id);\r\n  };\r\n\r\n  return (\r\n    <div className=\"playlist_viewer grid grid-tc-1m bg-black\">\r\n      <div>\r\n        <ReactPlayer\r\n          className={\"player_viewer\"}\r\n          height=\"100%\"\r\n          width=\"100%\"\r\n          playing={playing}\r\n          ref={ref}\r\n          url={url}\r\n          onProgress={handleProgress}\r\n          onReady={handleReady}\r\n          onEnded={handleEnd}\r\n          controls={true}\r\n        />\r\n      </div>\r\n      <div className=\"playlist_viewer-list grid grid-tr-m1 gap-s\">\r\n        <input\r\n          className=\"bg-grey\"\r\n          type=\"text\"\r\n          placeholder=\"Search Playlist...\"\r\n          value={search}\r\n          onChange={({ target: { value } }) => setSearch(value)}\r\n        />\r\n        <ul className=\"grid gap-xs\">\r\n          {items.map(({ id, label, type }, i) => (\r\n            <li\r\n              className=\"bg-grey-dark pd-051051\"\r\n              data-active={activeItemId === id}\r\n              onClick={handleSelect}\r\n              id={id}\r\n              key={i}\r\n            >\r\n              {label}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useRef, useState, useEffect } from \"react\";\r\nimport ReactPlayer from \"react-player\";\r\nimport { setGlobalState } from \"react-global-state-hook\";\r\nimport { MODAL } from \"../Modal\";\r\n\r\n// Simple player with:\r\n// loop button\r\n// play/pause\r\n// seekToSlider?\r\n// share button\r\n// save button when logged in\r\n\r\nexport const VideoViewer = ({ video }) => {\r\n  const [playing, setPlaying] = useState(false);\r\n  const [playerReady, setPlayerReady] = useState(false);\r\n\r\n  const player: any = useRef();\r\n  const ref = (p) => (player.current = p);\r\n\r\n  const handleReady = () => setPlayerReady(true);\r\n\r\n  useEffect(() => {\r\n    if (playerReady) {\r\n      setPlaying(true);\r\n    }\r\n  }, [playerReady]);\r\n\r\n  const handleReplay = () => {\r\n    player.current.seekTo(0);\r\n    setPlaying(true);\r\n  };\r\n\r\n  const handleEnd = () => {\r\n    setGlobalState(MODAL, {\r\n      component: \"replay\",\r\n      props: {\r\n        onReplay: handleReplay\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"sequence_viewer\">\r\n      <ReactPlayer\r\n        className={\"player_viewer\"}\r\n        height=\"100%\"\r\n        width=\"100%\"\r\n        playing={playing}\r\n        ref={ref}\r\n        url={video.url}\r\n        onReady={handleReady}\r\n        onEnded={handleEnd}\r\n        controls={true}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useRef, useState, useEffect } from \"react\";\r\nimport ReactPlayer from \"react-player\";\r\nimport { setGlobalState } from \"react-global-state-hook\";\r\nimport { MODAL } from \"../Modal\";\r\n\r\n// Simple player with:\r\n// loop button\r\n// play/pause\r\n// seekToSlider?\r\n// share button\r\n// save button when logged in\r\n\r\nexport const SequenceViewer = ({ sequence }) => {\r\n  const [playing, setPlaying] = useState(false);\r\n  const [playerReady, setPlayerReady] = useState(false);\r\n\r\n  const player: any = useRef();\r\n  const ref = (p) => (player.current = p);\r\n\r\n  const handleReady = () => setPlayerReady(true);\r\n\r\n  useEffect(() => {\r\n    if (playerReady) {\r\n      player.current.seekTo(sequence.start, \"seconds\");\r\n      setPlaying(true);\r\n    }\r\n  }, [playerReady]);\r\n\r\n  const handleReplay = () => {\r\n    player.current.seekTo(sequence.start, \"seconds\");\r\n    setPlaying(true);\r\n  };\r\n\r\n  const handleProgress = ({ playedSeconds }) => {\r\n    if (sequence.stop && playedSeconds >= sequence.stop) {\r\n      setPlaying(false);\r\n      setGlobalState(MODAL, {\r\n        component: \"replay\",\r\n        props: {\r\n          onReplay: handleReplay\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"sequence_viewer\">\r\n      <ReactPlayer\r\n        className={\"player_viewer\"}\r\n        height=\"100%\"\r\n        width=\"100%\"\r\n        playing={playing}\r\n        ref={ref}\r\n        url={sequence.url}\r\n        onReady={handleReady}\r\n        onProgress={handleProgress}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"./Viewer.scss\";\r\n\r\nimport { PlaylistViewer } from \"../components/Viewer/PlaylistViewer\";\r\nimport { VideoViewer } from \"../components/Viewer/VideoViewer\";\r\nimport { SequenceViewer } from \"../components/Viewer/SequenceViewer\";\r\nimport { request } from \"../utils/request\";\r\n\r\nexport const Viewer = ({\r\n  match: {\r\n    params: { type, id }\r\n  }\r\n}) => {\r\n  const [item, setItem] = useState();\r\n\r\n  const getItem = async () => {\r\n    if (type === \"playlist\") {\r\n      const playlist = await getPlaylist(id);\r\n      setItem(playlist);\r\n    } else if (type === \"video\") {\r\n      const video = await getVideo(id);\r\n      setItem(video);\r\n    } else {\r\n      const sequence = await getSequence(id);\r\n      setItem(sequence);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (type && id) {\r\n      getItem();\r\n    } else {\r\n      alert(\"Type and Id needs to be provided: /video/someid323423\");\r\n    }\r\n  }, [type, id]);\r\n\r\n  useEffect(() => {\r\n    console.log(item);\r\n  }, [item]);\r\n\r\n  return (\r\n    <div className=\"viewer grid overflow-h\">\r\n      {!item ? (\r\n        <div className=\"centered-grid bg-grey-dark\">Loading...</div>\r\n      ) : type === \"playlist\" ? (\r\n        <PlaylistViewer {...item} />\r\n      ) : type === \"video\" ? (\r\n        <VideoViewer video={item} />\r\n      ) : (\r\n        <SequenceViewer sequence={item} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Have these request locally to not conflict with other states and request handlers\r\n// Viewer should always work completely independent\r\n// Will move to own app later\r\nconst getPlaylist = async (id) => {\r\n  try {\r\n    const res = await request(\"viewer\", \"/playlist/\" + id);\r\n    const data = await res.json();\r\n    return data;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return error;\r\n  }\r\n};\r\nconst getVideo = async (id) => {\r\n  try {\r\n    const res = await request(\"viewer\", \"/video/\" + id);\r\n    const data = await res.json();\r\n    return data;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return error;\r\n  }\r\n};\r\nconst getSequence = async (id) => {\r\n  try {\r\n    const res = await request(\"viewer\", \"/sequence/\" + id);\r\n    const data = await res.json();\r\n    return data;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return error;\r\n  }\r\n};\r\n","import React from \"react\";\r\n\r\nexport const ErrorPage404 = () => {\r\n  return <div>404: Page Not Found</div>;\r\n};\r\n","import React from \"react\";\r\n\r\nexport const ErrorPage403 = () => {\r\n  return <div>403: You have no permission to access this page.</div>;\r\n};\r\n","import React from \"react\";\r\n\r\nexport const Impressum = () => {\r\n  return (\r\n    <div className=\"impressum\">\r\n      <h1>Impressum</h1>\r\n      <p>Angaben gemäß § 5 TMG</p>\r\n      <p>\r\n        Jan-Philipp Marks <br />\r\n        34%2C Ella-Kay-Straße\r\n        <br />\r\n        10405 Berlin <br />\r\n      </p>\r\n      <p>\r\n        <strong>Vertreten durch: </strong>\r\n        <br />\r\n        Jan-Philipp Marks\r\n        <br />\r\n      </p>\r\n      <p>\r\n        <strong>Kontakt:</strong>\r\n        <br />\r\n        Telefon: %2B49-015780270862\r\n        <br />\r\n        E-Mail: <a href=\"mailto:contact@jpmarks.dev\">contact@jpmarks.dev</a>\r\n        <br />\r\n      </p>\r\n      <p>\r\n        <strong>Haftungsausschluss: </strong>\r\n        <br />\r\n        <br />\r\n        <strong>Haftung für Inhalte</strong>\r\n        <br />\r\n        <br />\r\n        Die Inhalte unserer Seiten wurden mit größter Sorgfalt erstellt. Für die\r\n        Richtigkeit, Vollständigkeit und Aktualität der Inhalte können wir\r\n        jedoch keine Gewähr übernehmen. Als Diensteanbieter sind wir gemäß § 7\r\n        Abs.1 TMG für eigene Inhalte auf diesen Seiten nach den allgemeinen\r\n        Gesetzen verantwortlich. Nach §§ 8 bis 10 TMG sind wir als\r\n        Diensteanbieter jedoch nicht verpflichtet, übermittelte oder\r\n        gespeicherte fremde Informationen zu überwachen oder nach Umständen zu\r\n        forschen, die auf eine rechtswidrige Tätigkeit hinweisen.\r\n        Verpflichtungen zur Entfernung oder Sperrung der Nutzung von\r\n        Informationen nach den allgemeinen Gesetzen bleiben hiervon unberührt.\r\n        Eine diesbezügliche Haftung ist jedoch erst ab dem Zeitpunkt der\r\n        Kenntnis einer konkreten Rechtsverletzung möglich. Bei Bekanntwerden von\r\n        entsprechenden Rechtsverletzungen werden wir diese Inhalte umgehend\r\n        entfernen.\r\n        <br />\r\n        <br />\r\n        <strong>Haftung für Links</strong>\r\n        <br />\r\n        <br />\r\n        Unser Angebot enthält Links zu externen Webseiten Dritter, auf deren\r\n        Inhalte wir keinen Einfluss haben. Deshalb können wir für diese fremden\r\n        Inhalte auch keine Gewähr übernehmen. Für die Inhalte der verlinkten\r\n        Seiten ist stets der jeweilige Anbieter oder Betreiber der Seiten\r\n        verantwortlich. Die verlinkten Seiten wurden zum Zeitpunkt der\r\n        Verlinkung auf mögliche Rechtsverstöße überprüft. Rechtswidrige Inhalte\r\n        waren zum Zeitpunkt der Verlinkung nicht erkennbar. Eine permanente\r\n        inhaltliche Kontrolle der verlinkten Seiten ist jedoch ohne konkrete\r\n        Anhaltspunkte einer Rechtsverletzung nicht zumutbar. Bei Bekanntwerden\r\n        von Rechtsverletzungen werden wir derartige Links umgehend entfernen.\r\n        <br />\r\n        <br />\r\n        <strong>Urheberrecht</strong>\r\n        <br />\r\n        <br />\r\n        Die durch die Seitenbetreiber erstellten Inhalte und Werke auf diesen\r\n        Seiten unterliegen dem deutschen Urheberrecht. Die Vervielfältigung,\r\n        Bearbeitung, Verbreitung und jede Art der Verwertung außerhalb der\r\n        Grenzen des Urheberrechtes bedürfen der schriftlichen Zustimmung des\r\n        jeweiligen Autors bzw. Erstellers. Downloads und Kopien dieser Seite\r\n        sind nur für den privaten, nicht kommerziellen Gebrauch gestattet.\r\n        Soweit die Inhalte auf dieser Seite nicht vom Betreiber erstellt wurden,\r\n        werden die Urheberrechte Dritter beachtet. Insbesondere werden Inhalte\r\n        Dritter als solche gekennzeichnet. Sollten Sie trotzdem auf eine\r\n        Urheberrechtsverletzung aufmerksam werden, bitten wir um einen\r\n        entsprechenden Hinweis. Bei Bekanntwerden von Rechtsverletzungen werden\r\n        wir derartige Inhalte umgehend entfernen.\r\n        <br />\r\n        <br />\r\n        <strong>Datenschutz</strong>\r\n        <br />\r\n        <br />\r\n        Die Nutzung unserer Webseite ist in der Regel ohne Angabe\r\n        personenbezogener Daten möglich. Soweit auf unseren Seiten\r\n        personenbezogene Daten (beispielsweise Name, Anschrift oder\r\n        eMail-Adressen) erhoben werden, erfolgt dies, soweit möglich, stets auf\r\n        freiwilliger Basis. Diese Daten werden ohne Ihre ausdrückliche\r\n        Zustimmung nicht an Dritte weitergegeben. <br />\r\n        Wir weisen darauf hin, dass die Datenübertragung im Internet (z.B. bei\r\n        der Kommunikation per E-Mail) Sicherheitslücken aufweisen kann. Ein\r\n        lückenloser Schutz der Daten vor dem Zugriff durch Dritte ist nicht\r\n        möglich. <br />\r\n        Der Nutzung von im Rahmen der Impressumspflicht veröffentlichten\r\n        Kontaktdaten durch Dritte zur Übersendung von nicht ausdrücklich\r\n        angeforderter Werbung und Informationsmaterialien wird hiermit\r\n        ausdrücklich widersprochen. Die Betreiber der Seiten behalten sich\r\n        ausdrücklich rechtliche Schritte im Falle der unverlangten Zusendung von\r\n        Werbeinformationen, etwa durch Spam-Mails, vor.\r\n        <br />\r\n      </p>\r\n      <br />\r\n      Website Impressum von{\" \"}\r\n      <a href=\"https://www.impressum-generator.de\">impressum-generator.de</a>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\n\r\nexport const Datenschutz = () => {\r\n  return (\r\n    <div>\r\n      <h1>Datenschutzerklärung</h1>\r\n      <p>\r\n        Verantwortlicher im Sinne der Datenschutzgesetze, insbesondere der\r\n        EU-Datenschutzgrundverordnung (DSGVO), ist:\r\n      </p>\r\n      <p>Jan-Philipp Marks</p>\r\n      <h2>Ihre Betroffenenrechte</h2>\r\n      <p>\r\n        Unter den angegebenen Kontaktdaten unseres Datenschutzbeauftragten\r\n        können Sie jederzeit folgende Rechte ausüben:\r\n      </p>\r\n      <ul>\r\n        <li>\r\n          Auskunft über Ihre bei uns gespeicherten Daten und deren Verarbeitung\r\n          (Art. 15 DSGVO),\r\n        </li>\r\n        <li>\r\n          Berichtigung unrichtiger personenbezogener Daten (Art. 16 DSGVO),\r\n        </li>\r\n        <li>Löschung Ihrer bei uns gespeicherten Daten (Art. 17 DSGVO),</li>\r\n        <li>\r\n          Einschränkung der Datenverarbeitung, sofern wir Ihre Daten aufgrund\r\n          gesetzlicher Pflichten noch nicht löschen dürfen (Art. 18 DSGVO),\r\n        </li>\r\n        <li>\r\n          Widerspruch gegen die Verarbeitung Ihrer Daten bei uns (Art. 21 DSGVO)\r\n          und\r\n        </li>\r\n        <li>\r\n          Datenübertragbarkeit, sofern Sie in die Datenverarbeitung eingewilligt\r\n          haben oder einen Vertrag mit uns abgeschlossen haben (Art. 20 DSGVO).\r\n        </li>\r\n      </ul>\r\n      <p>\r\n        Sofern Sie uns eine Einwilligung erteilt haben, können Sie diese\r\n        jederzeit mit Wirkung für die Zukunft widerrufen.\r\n      </p>\r\n      <p>\r\n        Sie können sich jederzeit mit einer Beschwerde an eine Aufsichtsbehörde\r\n        wenden, z. B. an die zuständige Aufsichtsbehörde des Bundeslands Ihres\r\n        Wohnsitzes oder an die für uns als verantwortliche Stelle zuständige\r\n        Behörde.\r\n      </p>\r\n      <p>\r\n        Eine Liste der Aufsichtsbehörden (für den nichtöffentlichen Bereich) mit\r\n        Anschrift finden Sie unter:{\" \"}\r\n        <a\r\n          href=\"https://www.bfdi.bund.de/DE/Infothek/Anschriften_Links/anschriften_links-node.html\"\r\n          target=\"_blank\"\r\n          rel=\"nofollow noopener\"\r\n        >\r\n          https://www.bfdi.bund.de/DE/Infothek/Anschriften_Links/anschriften_links-node.html\r\n        </a>\r\n        .\r\n      </p>\r\n      <p></p>\r\n      <h2>Registrierung auf unserer Website</h2>\r\n      <h3>Art und Zweck der Verarbeitung:</h3>\r\n      <p>\r\n        Bei der Registrierung für die Nutzung unserer personalisierten\r\n        Leistungen werden einige personenbezogene Daten erhoben, wie Name,\r\n        Anschrift, Kontakt- und Kommunikationsdaten (z. B. Telefonnummer und\r\n        E-Mail-Adresse). Sind Sie bei uns registriert, können Sie auf Inhalte\r\n        und Leistungen zugreifen, die wir nur registrierten Nutzern anbieten.\r\n        Angemeldete Nutzer haben zudem die Möglichkeit, bei Bedarf die bei\r\n        Registrierung angegebenen Daten jederzeit zu ändern oder zu löschen.\r\n        Selbstverständlich erteilen wir Ihnen darüber hinaus jederzeit Auskunft\r\n        über die von uns über Sie gespeicherten personenbezogenen Daten.\r\n      </p>\r\n      <h3>Rechtsgrundlage:</h3>\r\n      <p>\r\n        Die Verarbeitung der bei der Registrierung eingegebenen Daten erfolgt\r\n        auf Grundlage einer Einwilligung des Nutzers (Art. 6 Abs. 1 lit. a\r\n        DSGVO).\r\n      </p>\r\n      <p>\r\n        Dient die Registrierung der Erfüllung eines Vertrages, dessen\r\n        Vertragspartei die betroffene Person ist oder der Durchführung\r\n        vorvertraglicher Maßnahmen, so ist zusätzliche Rechtsgrundlage für die\r\n        Verarbeitung der Daten Art. 6 Abs. 1 lit. b DSGVO.\r\n      </p>\r\n      <h3>Empfänger:</h3>\r\n      <p>\r\n        Empfänger der Daten sind ggf. technische Dienstleister, die für den\r\n        Betrieb und die Wartung unserer Website als Auftragsverarbeiter tätig\r\n        werden.\r\n      </p>\r\n      <h3>Speicherdauer:</h3>\r\n      <p>\r\n        Daten werden in diesem Zusammenhang nur verarbeitet, solange die\r\n        entsprechende Einwilligung vorliegt. Danach werden sie gelöscht, soweit\r\n        keine gesetzlichen Aufbewahrungspflichten entgegenstehen. Zur\r\n        Kontaktaufnahme in diesem Zusammenhang nutzen Sie bitte die am Ende\r\n        dieser Datenschutzerklärung angegebenen Kontaktdaten.\r\n      </p>\r\n      <h3>Bereitstellung vorgeschrieben oder erforderlich:</h3>\r\n      <p>\r\n        Die Bereitstellung Ihrer personenbezogenen Daten erfolgt freiwillig,\r\n        allein auf Basis Ihrer Einwilligung. Ohne die Bereitstellung Ihrer\r\n        personenbezogenen Daten können wir Ihnen keinen Zugang auf unsere\r\n        angebotenen Inhalte und Leistungen gewähren.\r\n      </p>\r\n      <p></p>\r\n      <h2>Erbringung kostenpflichtiger Leistungen</h2>\r\n      <h3>Art und Zweck der Verarbeitung:</h3>\r\n      <p>\r\n        Zur Erbringung kostenpflichtiger Leistungen werden von uns zusätzliche\r\n        Daten erfragt, wie z.B. Zahlungsangaben, um Ihre Bestellung ausführen zu\r\n        können.\r\n      </p>\r\n      <h3>Rechtsgrundlage:</h3>\r\n      <p>\r\n        Die Verarbeitung der Daten, die für den Abschluss des Vertrages\r\n        erforderlich ist, basiert auf Art. 6 Abs. 1 lit. b DSGVO.\r\n      </p>\r\n      <h3>Empfänger:</h3>\r\n      <p>Empfänger der Daten sind ggf. Auftragsverarbeiter.</p>\r\n      <h3>Speicherdauer:</h3>\r\n      <p>\r\n        Wir speichern diese Daten in unseren Systemen bis die gesetzlichen\r\n        Aufbewahrungsfristen abgelaufen sind. Diese betragen grundsätzlich 6\r\n        oder 10 Jahre aus Gründen der ordnungsmäßigen Buchführung und\r\n        steuerrechtlichen Anforderungen.\r\n      </p>\r\n      <h3>Bereitstellung vorgeschrieben oder erforderlich:</h3>\r\n      <p>\r\n        Die Bereitstellung Ihrer personenbezogenen Daten erfolgt freiwillig.\r\n        Ohne die Bereitstellung Ihrer personenbezogenen Daten können wir Ihnen\r\n        keinen Zugang auf unsere angebotenen Inhalte und Leistungen gewähren.\r\n      </p>\r\n      <p></p>\r\n      <h2>Kontaktformular</h2>\r\n      <h3>Art und Zweck der Verarbeitung:</h3>\r\n      <p>\r\n        Die von Ihnen eingegebenen Daten werden zum Zweck der individuellen\r\n        Kommunikation mit Ihnen gespeichert. Hierfür ist die Angabe einer\r\n        validen E-Mail-Adresse sowie Ihres Namens erforderlich. Diese dient der\r\n        Zuordnung der Anfrage und der anschließenden Beantwortung derselben. Die\r\n        Angabe weiterer Daten ist optional.\r\n      </p>\r\n      <h3>Rechtsgrundlage:</h3>\r\n      <p>\r\n        Die Verarbeitung der in das Kontaktformular eingegebenen Daten erfolgt\r\n        auf der Grundlage eines berechtigten Interesses (Art. 6 Abs. 1 lit. f\r\n        DSGVO).\r\n      </p>\r\n      <p>\r\n        Durch Bereitstellung des Kontaktformulars möchten wir Ihnen eine\r\n        unkomplizierte Kontaktaufnahme ermöglichen. Ihre gemachten Angaben\r\n        werden zum Zwecke der Bearbeitung der Anfrage sowie für mögliche\r\n        Anschlussfragen gespeichert.\r\n      </p>\r\n      <p>\r\n        Sofern Sie mit uns Kontakt aufnehmen, um ein Angebot zu erfragen,\r\n        erfolgt die Verarbeitung der in das Kontaktformular eingegebenen Daten\r\n        zur Durchführung vorvertraglicher Maßnahmen (Art. 6 Abs. 1 lit. b\r\n        DSGVO).\r\n      </p>\r\n      <h3>Empfänger:</h3>\r\n      <p>Empfänger der Daten sind ggf. Auftragsverarbeiter.</p>\r\n      <h3>Speicherdauer:</h3>\r\n      <p>\r\n        Daten werden spätestens 6 Monate nach Bearbeitung der Anfrage gelöscht.\r\n      </p>\r\n      <p>\r\n        Sofern es zu einem Vertragsverhältnis kommt, unterliegen wir den\r\n        gesetzlichen Aufbewahrungsfristen nach HGB und löschen Ihre Daten nach\r\n        Ablauf dieser Fristen.{\" \"}\r\n      </p>\r\n      <h3>Bereitstellung vorgeschrieben oder erforderlich:</h3>\r\n      <p>\r\n        Die Bereitstellung Ihrer personenbezogenen Daten erfolgt freiwillig. Wir\r\n        können Ihre Anfrage jedoch nur bearbeiten, sofern Sie uns Ihren Namen,\r\n        Ihre E-Mail-Adresse und den Grund der Anfrage mitteilen.\r\n      </p>\r\n      <p></p>\r\n      <h2>Verwendung von Scriptbibliotheken (Google Webfonts)</h2>\r\n      <h3>Art und Zweck der Verarbeitung:</h3>\r\n      <p>\r\n        Um unsere Inhalte browserübergreifend korrekt und grafisch ansprechend\r\n        darzustellen, verwenden wir auf dieser Website „Google Web Fonts“ der\r\n        Google LLC (1600 Amphitheatre Parkway, Mountain View, CA 94043, USA;\r\n        nachfolgend „Google“) zur Darstellung von Schriften.\r\n      </p>\r\n      <p>\r\n        Die Datenschutzrichtlinie des Bibliothekbetreibers Google finden Sie\r\n        hier:{\" \"}\r\n        <a href=\"https://www.google.com/policies/privacy/\">\r\n          https://www.google.com/policies/privacy/\r\n        </a>\r\n      </p>\r\n      <h3>Rechtsgrundlage:</h3>\r\n      <p>\r\n        Rechtsgrundlage für die Einbindung von Google Webfonts und dem damit\r\n        verbundenen Datentransfer zu Google ist Ihre Einwilligung (Art. 6 Abs. 1\r\n        lit. a DSGVO).{\" \"}\r\n      </p>\r\n      <h3>Empfänger:</h3>\r\n      <p>\r\n        Der Aufruf von Scriptbibliotheken oder Schriftbibliotheken löst\r\n        automatisch eine Verbindung zum Betreiber der Bibliothek aus. Dabei ist\r\n        es theoretisch möglich – aktuell allerdings auch unklar ob und ggf. zu\r\n        welchen Zwecken – dass der Betreiber in diesem Fall Google Daten erhebt.\r\n      </p>\r\n      <h3>Speicherdauer:</h3>\r\n      <p>\r\n        Wir erheben keine personenbezogenen Daten, durch die Einbindung von\r\n        Google Webfonts.\r\n      </p>\r\n      <p>\r\n        Weitere Informationen zu Google Web Fonts finden Sie unter{\" \"}\r\n        <a href=\"https://developers.google.com/fonts/faq\">\r\n          https://developers.google.com/fonts/faq\r\n        </a>{\" \"}\r\n        und in der Datenschutzerklärung von Google:{\" \"}\r\n        <a href=\"https://www.google.com/policies/privacy/\">\r\n          https://www.google.com/policies/privacy/\r\n        </a>\r\n        .\r\n      </p>\r\n      <h3>Drittlandtransfer:</h3>\r\n      <p>\r\n        Google verarbeitet Ihre Daten in den USA und hat sich dem EU_US Privacy\r\n        Shield unterworfen{\" \"}\r\n        <a href=\"https://www.privacyshield.gov/EU-US-Framework\">\r\n          https://www.privacyshield.gov/EU-US-Framework\r\n        </a>\r\n        .\r\n      </p>\r\n      <h3>Bereitstellung vorgeschrieben oder erforderlich:</h3>\r\n      <p>\r\n        Die Bereitstellung der personenbezogenen Daten ist weder gesetzlich,\r\n        noch vertraglich vorgeschrieben. Allerdings kann ggfs. die korrekte\r\n        Darstellung der Inhalte durch Standardschriften nicht möglich sein.\r\n      </p>\r\n      <h3>Widerruf der Einwilligung:</h3>\r\n      <p>\r\n        Zur Darstellung der Inhalte wird regelmäßig die Programmiersprache\r\n        JavaScript verwendet. Sie können der Datenverarbeitung daher\r\n        widersprechen, indem Sie die Ausführung von JavaScript in Ihrem Browser\r\n        deaktivieren oder einen JavaScript-Blocker installieren. Bitte beachten\r\n        Sie, dass es hierdurch zu Funktionseinschränkungen auf der Website\r\n        kommen kann.\r\n      </p>\r\n      <p></p>\r\n      <h2>Eingebettete YouTube-Videos</h2>\r\n      <h3>Art und Zweck der Verarbeitung:</h3>\r\n      <p>\r\n        Auf einigen unserer Webseiten betten wir YouTube-Videos ein. Betreiber\r\n        der entsprechenden Plugins ist die YouTube, LLC, 901 Cherry Ave., San\r\n        Bruno, CA 94066, USA (nachfolgend „YouTube“). Wenn Sie eine Seite mit\r\n        dem YouTube-Plugin besuchen, wird eine Verbindung zu Servern von YouTube\r\n        hergestellt. Dabei wird YouTube mitgeteilt, welche Seiten Sie besuchen.\r\n        Wenn Sie in Ihrem YouTube-Account eingeloggt sind, kann YouTube Ihr\r\n        Surfverhalten Ihnen persönlich zuzuordnen. Dies verhindern Sie, indem\r\n        Sie sich vorher aus Ihrem YouTube-Account ausloggen.\r\n      </p>\r\n      <p>\r\n        Wird ein YouTube-Video gestartet, setzt der Anbieter Cookies ein, die\r\n        Hinweise über das Nutzerverhalten sammeln.\r\n      </p>\r\n      <p>\r\n        Weitere Informationen zu Zweck und Umfang der Datenerhebung und ihrer\r\n        Verarbeitung durch YouTube erhalten Sie in den Datenschutzerklärungen\r\n        des Anbieters, Dort erhalten Sie auch weitere Informationen zu Ihren\r\n        diesbezüglichen Rechten und Einstellungsmöglichkeiten zum Schutze Ihrer\r\n        Privatsphäre (\r\n        <a href=\"https://policies.google.com/privacy\">\r\n          https://policies.google.com/privacy\r\n        </a>\r\n        ). Google verarbeitet Ihre Daten in den USA und hat sich dem EU-US\r\n        Privacy Shield unterworfen https://www.privacyshield.gov/EU-US-Framework\r\n      </p>\r\n      <h3>Rechtsgrundlage:</h3>\r\n      <p>\r\n        Rechtsgrundlage für die Einbindung von YouTube und dem damit verbundenen\r\n        Datentransfer zu Google ist Ihre Einwilligung (Art. 6 Abs. 1 lit. a\r\n        DSGVO).\r\n      </p>\r\n      <h3>Empfänger:</h3>\r\n      <p>\r\n        Der Aufruf von YouTube löst automatisch eine Verbindung zu Google aus.\r\n      </p>\r\n      <h3>Speicherdauer und Widerruf der Einwilligung:</h3>\r\n      <p>\r\n        Wer das Speichern von Cookies für das Google-Ad-Programm deaktiviert\r\n        hat, wird auch beim Anschauen von YouTube-Videos mit keinen solchen\r\n        Cookies rechnen müssen. YouTube legt aber auch in anderen Cookies\r\n        nicht-personenbezogene Nutzungsinformationen ab. Möchten Sie dies\r\n        verhindern, so müssen Sie das Speichern von Cookies im Browser\r\n        blockieren.\r\n      </p>\r\n      <p>\r\n        Weitere Informationen zum Datenschutz bei „YouTube“ finden Sie in der\r\n        Datenschutzerklärung des Anbieters unter:{\" \"}\r\n        <a href=\"https://www.google.de/intl/de/policies/privacy/\">\r\n          https://www.google.de/intl/de/policies/privacy/{\" \"}\r\n        </a>\r\n      </p>\r\n      <h3>Drittlandtransfer:</h3>\r\n      <p>\r\n        Google verarbeitet Ihre Daten in den USA und hat sich dem EU_US Privacy\r\n        Shield unterworfen{\" \"}\r\n        <a href=\"https://www.privacyshield.gov/EU-US-Framework\">\r\n          https://www.privacyshield.gov/EU-US-Framework\r\n        </a>\r\n        .\r\n      </p>\r\n      <h3>Bereitstellung vorgeschrieben oder erforderlich:</h3>\r\n      <p>\r\n        Die Bereitstellung Ihrer personenbezogenen Daten erfolgt freiwillig,\r\n        allein auf Basis Ihrer Einwilligung. Sofern Sie den Zugriff unterbinden,\r\n        kann es hierdurch zu Funktionseinschränkungen auf der Website kommen.\r\n      </p>\r\n      <p></p>\r\n      <h2>SSL-Verschlüsselung</h2>\r\n      <p>\r\n        Um die Sicherheit Ihrer Daten bei der Übertragung zu schützen, verwenden\r\n        wir dem aktuellen Stand der Technik entsprechende\r\n        Verschlüsselungsverfahren (z. B. SSL) über HTTPS.\r\n      </p>\r\n      <p></p>\r\n      <h2>Änderung unserer Datenschutzbestimmungen</h2>\r\n      <p>\r\n        Wir behalten uns vor, diese Datenschutzerklärung anzupassen, damit sie\r\n        stets den aktuellen rechtlichen Anforderungen entspricht oder um\r\n        Änderungen unserer Leistungen in der Datenschutzerklärung umzusetzen,\r\n        z.B. bei der Einführung neuer Services. Für Ihren erneuten Besuch gilt\r\n        dann die neue Datenschutzerklärung.\r\n      </p>\r\n      <h2>Fragen an den Datenschutzbeauftragten</h2>\r\n      <p>\r\n        Wenn Sie Fragen zum Datenschutz haben, schreiben Sie uns bitte eine\r\n        E-Mail oder wenden Sie sich direkt an die für den Datenschutz\r\n        verantwortliche Person in unserer Organisation:\r\n      </p>\r\n      <p></p>\r\n      <p>\r\n        <em>\r\n          Die Datenschutzerklärung wurde mithilfe der activeMind AG erstellt,\r\n          den Experten für{\" \"}\r\n          <a\r\n            href=\"https://www.activemind.de/datenschutz/datenschutzbeauftragter/\"\r\n            target=\"_blank\"\r\n            rel=\"noopener\"\r\n          >\r\n            externe Datenschutzbeauftragte\r\n          </a>{\" \"}\r\n          (Version #2019-04-10).\r\n        </em>\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\nimport \"./App.scss\";\nimport \"./forms/forms.scss\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\n\nimport { Auth } from \"./views/Auth\";\nimport { Dashboard } from \"./views/Dashboard\";\nimport { useGlobalState } from \"react-global-state-hook\";\nimport { Modal } from \"./components/Modal\";\nimport { Sequencer } from \"./views/Sequencer\";\nimport { Landing } from \"./views/Landing\";\nimport { Viewer } from \"./views/Viewer\";\nimport { AUTH } from \"./services/auth\";\nimport { ErrorPage404 } from \"./views/404\";\nimport { ErrorPage403 } from \"./views/403\";\nimport { Payment } from \"./views/Payment\";\nimport { Impressum } from \"./views/Impressum\";\nimport { Datenschutz } from \"./views/Datenschutz\";\n\nconst App = () => {\n  const [auth] = useGlobalState(AUTH, \"pending\");\n\n  return (\n    <div className=\"app\">\n      <BrowserRouter>\n        <Switch>\n          <Route exact path=\"/\" component={Landing} />\n          <Route exact path=\"/viewer/:type/:id\" component={Viewer} />\n          <Route exact path=\"/auth/:type\" component={Auth} />\n          <Route exact path=\"/impressum\" component={Impressum} />\n          <Route exact path=\"/datenschutz\" component={Datenschutz} />\n          {auth === \"pending\" ? (\n            <div className=\"centered-grid\">\n              <h3>Loading App...</h3>\n            </div>\n          ) : (\n            auth === true && (\n              <>\n                <Route exact path=\"/dashboard\" component={Dashboard} />\n                <Route exact path=\"/sequencer/:id\" component={Sequencer} />\n                {/* <Route exact path=\"/profile/payment\" component={Payment} /> */}\n              </>\n            )\n          )}{\" \"}\n          <Route exact path=\"/403\" component={ErrorPage403} />\n          <Route path={[\"*\", \"/404\"]} component={ErrorPage404} />\n        </Switch>\n        <Modal />\n      </BrowserRouter>\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { initFirebase, setAuthObserver } from \"./services/auth\";\n\ninitFirebase();\nsetAuthObserver();\n\n// @ts-ignore\nString.prototype.capitalize = function () {\n  return this.charAt(0).toUpperCase() + this.slice(1);\n};\n// @ts-ignore\nArray.prototype.move = function (from, to) {\n  this.splice(to, 0, this.splice(from, 1)[0]);\n};\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}