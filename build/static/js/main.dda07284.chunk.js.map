{"version":3,"sources":["views/dropbox.png","views/soundcloud.png","views/streamable.png","services/auth.ts","views/Auth.tsx","utils/request.ts","stores/folder.ts","components/Hint.tsx","stores/sequences.ts","stores/videos.ts","stores/playlists.ts","components/Dashboard/MenuFolder.tsx","components/Dashboard/Path.tsx","components/Dashboard/MenuItem.tsx","components/Modal.tsx","forms/Folder.tsx","forms/Video.tsx","forms/Playlist.tsx","forms/New.tsx","forms/SelectFolder.tsx","forms/Share.tsx","forms/Replay.tsx","components/Profile.tsx","components/Dashboard/DashboardHeader.tsx","components/Dashboard/Menu.tsx","components/Dashboard/DirectoryItem.tsx","components/Dashboard/Directory.tsx","stores/playlist_items.ts","components/Dashboard/Player.tsx","components/Dashboard/ListActions.tsx","components/Dashboard/ListSelection.tsx","components/Dashboard/ListList.tsx","components/Dashboard/List.tsx","views/Dashboard.tsx","utils/secondsToTime.ts","components/Sequencer/Tagger.tsx","components/Sequencer/SequencerListHeader.tsx","components/Sequencer/SequencerVideo.tsx","components/Sequencer/SequencerList.tsx","components/Sequencer/SequencerHeader.tsx","components/Sequencer/SequencerControls.tsx","components/Sequencer/SequencerActions.tsx","views/Sequencer.tsx","views/Landing.tsx","components/Viewer/PlaylistViewer.tsx","components/Viewer/VideoViewer.tsx","components/Viewer/SequenceViewer.tsx","views/Viewer.tsx","views/404.tsx","views/403.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","initFirebase","a","firebase","console","log","register","email","password","createUserWithEmailAndPassword","login","signInWithEmailAndPassword","currentUser","getIdToken","idToken","localStorage","setItem","setGlobalState","logout","signOut","removeItem","Auth","match","params","type","push","history","useState","values","setValues","loading","setLoading","error","setError","handleChange","target","name","value","handleSubmit","e","preventDefault","className","onSubmit","capitalize","onChange","placeholder","alt","disabled","to","APIS","folders","videos","playlists","sequences","viewer","request","api","path","options","url","fetch","headers","authorization","getItem","FOLDERS","DIRECTORY_TYPES","PLAYLIST","VIDEO","SEQUENCE","getFolders","res","json","data","postFolder","body","method","JSON","stringify","text","id","getGlobalState","patchFolder","newFolder","folder","map","f","deleteFolder","filter","showHint","msg","hints","setTimeout","h","closeHint","closest","Hint","useGlobalState","length","onClick","SEQUENCES","moveSequences","folderId","ids","p","includes","addFolder","getSequences","postSequence","start","Number","stop","i","patchSequence","s","deleteSequences","sequence","find","status","alert","VIDEOS","moveVideos","getVideo","video","getVideos","postVideo","label","patchVideo","v","deleteVideo","PLAYLISTS","movePlaylists","getPlaylists","postPlaylist","patchPlaylist","deletePlaylist","handleDragStart","directory","classList","dataTransfer","setData","MenuFolder","handleOpenFolder","handleSelectFolder","handleDrop","openFolders","selectedFolder","selectedDirectory","childFolders","open","selected","count","useMemo","getItemsCount","onDrop","onDragOver","draggable","onDragStart","stopPropagation","MODAL","component","props","key","getPath","parentFolder","Path","setSelectedFolder","playlistOpen","setPlaylistOpen","toLowerCase","dropFolderId","dropFolder","parse","getData","dragFolderId","dragFolder","isOutOfPath","every","MenuItem","setSelectedDirectory","rootFolders","toUpperCase","INITIAL_CONFIG","COMPONENTS","FOLDER","closeModal","setLabel","deletable","reduce","prev","curr","Array","from","Set","handleDelete","window","confirm","folderLabel","setUrl","keywords","setKeywords","keyword","setKeyword","folderName","setFolderName","useEffect","usedPlaylistVideoIds","videoIds","items","split","usedSequenceVideoIds","videoId","VIDEO_DETECTED","ReactPlayer","canPlay","k","word","w","setItems","item","NEW","SELECTFOLDER","onSelect","selectedFolderId","SHARE","navigator","clipboard","writeText","REPLAY","onReplay","PROFILE","useHistory","handleLogout","Modal","modal","setModal","onClose","Object","keys","document","style","overflow","contains","SelectedComponent","renderComponent","Header","menuOpen","setMenuOpen","addEventListener","onFocus","removeEventListener","readText","addUrl","add","handlePaste","data-active","Menu","DirectoryItem","handleSelect","handleEdit","onShare","handleKeywordClick","data-selected","handleShare","Directory","selectedPlaylists","setSelectedPlaylists","selectedVideos","setSelectedVideos","selectedSequences","setSelectedSequences","labelSort","setLabelSort","itemId","playlist","urls","newUrls","sortedItems","copy","sort","b","nameA","nameB","allSelected","targetSelection","setSelection","localSelection","index","PLAYER_COUNT","openPlayer","Player","playing","setPlaying","playerReady","setPlayerReady","maximized","setMaximized","player","useRef","lastUrl","startPlayer","current","seekTo","undefined","height","width","pip","ref","onReady","onProgress","playedSeconds","event","CustomEvent","detail","dispatchEvent","onPlayerEnd","controls","ListActions","move","up","nextItem","currentIndex","findIndex","_","handleAdd","ListSelection","activePlaylist","selectedItems","updatedItems","selection","handlePlayerDone","itemIndex","ListList","filteredItems","setSelectedItems","position","Playlist","setActivePlaylist","search","setSearch","pItems","addSequences","useCallback","newSeqs","addVideos","newVids","addPlaylists","newItems","itemsToAdd","addVideoToPlaylist","newVideos","addSequenceToPlaylist","sequenceIds","newSequences","addPlaylistsToPlaylist","draggedItemIds","newDraggedItemIds","handleClose","getUserData","Promise","all","Dashboard","initialized","secondsToTime","secs","minutes","Math","floor","String","ms","seconds","slice","handleControls","activeTime","setStart","setStop","resetTagger","editingSequence","SEQUENCER_VIDEO","handleStartClick","PLAYER_PROGRESS","time","toFixed","handleStopClick","handleDismiss","Tagger","setActiveTime","progress","ta","getElementById","focus","SequencerListHeader","filtered","ready","timeout","lastSort","SequencerVideo","selectedVideo","handleProgress","playingSequences","playerState","progressInterval","SequencerList","sequenceId","activeSequenceId","setActiveSequenceId","playingSequenceIds","setEditingSequence","sortTime","setSortTime","sortLabel","setSortLabel","seekToSequence","editSequence","handleClick","clearTimeout","sortedSequences","sorted","allIds","active","editing","data-playing","data-editing","data-loading","SequencerHeader","targetFolderId","SequencerControls","SequencerActions","KEY_EVENTS","0","10","127","37","38","39","40","handleKeyPress","keyCode","ctrlKey","Sequencer","location","q","videoSequences","dropbox","require","soundcloud","streamable","Landing","viewBox","preserveAspectRatio","focusable","pointerEvents","display","fill","d","points","xmlns","data-name","src","fillRule","PlaylistViewer","activeItemId","setActiveItemId","counter","setCounter","currentItem","playNext","newItem","it","onEnded","VideoViewer","handleReplay","SequenceViewer","Viewer","getPlaylist","getSequence","ErrorPage404","ErrorPage403","App","auth","exact","Boolean","hostname","onAuthStateChanged","user","then","prototype","this","charAt","ReactDOM","render","serviceWorker","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.dda07284.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/dropbox.bf6dfc1d.png\";","module.exports = __webpack_public_path__ + \"static/media/soundcloud.a9415b93.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAABGCAYAAAB2Zan9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAEIFJREFUeNrsXQ2MXFUVPq0gwQgMFiFIwCn/hEKngj+A2FnBX8TuVqsYhM6KCJpgdxET/8juEgMa0N3FkIgEd6qiokC3/GhUwk4DKshPBwpREOhUtPwE2yGCKD/Wc/rOZd++3nPffW/ezM7Mni852fbNe/fd3++ec969587btm0bKBQKRSdgnhKWQqFQwlIoFAolLIVCoYSlUCgUSlgKhUKhhKVQKJSwkuGoo46yXd4Z5RiWRSgHorwFZU+UN9J7UZ5H2YryJMrjKA+h3ItyD8p/tWkUiu7Hhg0bEt2/U4bvfh3KR1H6UE5ignJhd77nyMj1p1FuQ5lkeUmbVaFQZEVYe6N8AaUf5YAM0tsH5VMsm1FWo1yB8g9tLoVCTcK0puB8/PMNlC+zmddMkIn4HZSL1FxUKOauSTg/JVmdgn8eRhlpAVkRdkH5GsojKMu1mRWKuYnEhIVkNYZ/bkY5eBbySybn9ShXatMpFGoSuohqAf65CeW4Nsn7epRTQX1bCoWahBGy2p8J4rg2KusSlCrKodrsCoWahIas9sM/96Hs34b53wuCtVuHaFMqFHOcsJCs9sA/dzMxtCvI6X8nBMshFIq5iimUbRGZ6uD3pNKwKij7dkBjvQnldu2zCsUc1bBQu7oc/xQ6qCxkFq6epXf3oozyTLM1MvOsQRlAyWt3UyiaQFhIVkvxz3kdWJ4zIfhy2Eqi2hgipSJKLvR7MURmdN9Eh00CCkVHaFi/7OAy/RSCfY3NRI5Jak1CzakEwdfWUU9fQVhK2l0VSlg7alcX4p83d3CZyAn/rSa/Y4o1p7QYYOLKCb8XLfJW7a4KJayZZEWDfaQN8vUUBF/+7kD5C8p/Ej5/QRNJdyjGrKtB8LGiot1LocgWO1kG+jzPZ/+OcgsEX+doj98WfpaI4giU90AQbmbPBPkhpzn5ef4IM8PKUESId6Asg8BP9XqPtGhj9qommILDwm90fRylHrlO5LaSTTqjUdE9fZZ7DfLaNRWKeJPQZ4A/i3IuyoEbNmygv9dAsFbrMZRHmWx+yAN0IcpXIT6m1VNs9tAz6yz3PwPB/sWzIdjDWPbI5zmexJYEJeF6P2umNgKi1fiDXBeTfK2PNTEJav4pFC7C4ggMuZj7b0A5DInqSpSXPdJ/DgJ/0uEgO/L/jHI0E5UPnmCCOD3mPorw8PGM62uxYAL6EKjRqno8zMWcdk2Fwm0Sfjrm3suRpNKaWBtZE1thIZ9jUf6dIk36Gvg3cC8YPZ3vywp5gbCSoCIQVCFkQtoc+kUhvXWRNOm+pZF7RixpreR3FVgLrPJEIKGXTfJCKK81lrVM2vUUddrL+TXp5kJpV7l8vmmXItrpJstk0hsqez6kBVfYpJfas8AWSDHhcy4UuE5NmvnQ5GbSXp0ybVsfK4XaMBfqj2tZ+6+1iHeMm6SAilIxUmaSceQaa162R2vgYHz/dMzs12ECK2w/CDHdo1jA5PKGyPWFGVTSxyh/wm8U7I98aC9mVNFTFuKoQzI/HQhklHZ7w3CEkIZgRz+bqWdq31HBtK2w9mcjlFGI96tRPYyB30ebPA/+kqc2WWezupywfcJtQ4Mkbh2c7T2uOkuavzBxrAJ/X+UYp5+0b5o2pT4x4FHXwx7t53qPD1GNOibfMKguB5F36jaT8BhHYbZIZBXC21A+wSbYkZbf11jI6vQYsiLn/aEelXw9m6qSWXh8hjODpB1NtLkmned8utZzVS3XJsB/rZn5IDERk48J1rgHwN/0NXVcSqFVGM1rCuIX7Zr3FEMDzGcNXPQ56Z4hLvsoJPuwMpCyj9H4Ws/t4lPXw03syyXOSzHB/VOoEOVshPUux4PnSD9gYqfhn/shiJhwLfupHoRgOcL7+bYzUE6MPHqTw1RbyBoTqfMPs2Y2yaQo4XOO396ZYaXf76pcaO+ve6MxA3adhaxKKTumtDB2JTS2ADbNToEhfi6X4j1TCd83EaNdDEN6/2SJiSvpM4UUzww1gazSEGEhankYk/AHEHyBi+JR1K4OEcjqMvzzpZgXXsqZDa+JepFNRJuZdgLK71B2FdJb4TD/fiz44X4OwYEWWWFjDDFNst9hMmHDjMb4q2qCRro6YorYTMKKYMpWQ/6zsHk+IJBOnd+1NqQxrRTya/u4kOP6y1nKNhnyU0l+PFO/fQnMFRDKDQlm+6iG7Xquz9H2kksh7D/Kc9lzQt73bKDsk6Gyu+rY5a5JahIWWLOSzL61XK4c+9dsE9ow8tBImLBuheBoriguxBu/KWhWP0s54CVH+P6sVcWtAzuQO30UH0L5leX6XTEaZLP8TdTY45DOGb0tpX9BIqxovgYjgyoXymMe7Kvw6f5+oSy2GVTqxOZeM1BHhIFhZtdcg4Mpzj/lo0UNw8w1dmZrVjGhvykf6ruTnKbkZpDy1S/4ylxll9qu4DD5y2D/CJOUsNZbymE+8FSjEUeRW2ztTvleSP4sYxLu62BtqQHT4F6HKXgr+C1avUy4TmvBXrVc3ztj9bYC7q9p4c5JWspWD/9Gq0AdZYlFA6hHCC9nec610LVsGXhFx0AY43z0g+zHrDo0qULKcpct5e6L0caWwI5r7Oop82Ymix5+vuJ4b49Q34sTlr3f0XauOu7NoL/ZTFJTdzafKYVMrnL/iBJ4b9iHZVMzafA/YtGuiNwOS1mA0xymo2+oYyrsHpbrtKD1CWG2yhrlmAEs+bhm28/V75FnW0cd9Eh7XNBGQUiv5jk5NDpoazz4a47fJeLokQYW56uSgkzHwG/bVtr0o/VX9iDzsjBuGp1klwnlr6XoS0vDhGU7qouWOWyxXE8b0I+0jUdt7jAItgT5grSwox2NHMXOTRr8k2yaJDH5iqwil2aBrIYdgy+cP5t25TPAbGlnsWK/2uCgrXm0TyXBu+Oey3KCbLTsvpAWbS9tMN1eTzKKall1C6ltn+hdJz//T/ClPJUi46T9nC/8dl2K9HYTru/UYhKos9ZCGoNZVxSnQYWXQZRbmNdxj3uWJhjMNmKwEaDvZnrj/DeLSF0zfDfuBChyuRdzHyoI5WxG2atNqOei8J56gv6Uj6ZnBvgLFhJYwBneEmG/zWgWPgLJTqv5iHD9PEh36s0mgaz2s1x/uQWdrc4Dc4RJa6WHOj3KZFBr0YDw6Si22XsAkn9O90UeZq48n0swfpllkI2/qBmE1UibFIRrM5Qgz4Xnr8GYhFsFU+og4blLEryDnLh3CQ02nqIi6BzChyzXifhsvrjnWtz4ZfZ9LInRoHKQfTSJLAZRK5CH6QWkozC3yCq8gHSiDciqWdijGYkawnpS+P0EwcakgejzaZ8Wk14k/EbrpualyPPXhesnC9efmcVZi8zFhY4ZrLfLB6e0BCLOj0eaJzlnhyHej9RJMGuShh2Tg3GC0z2ToJjRl4xJ+DjKey03rYQdPzGGCeJ6x6CjEDNnCb+d4jATXaAtONJBE+cm8K20EjXWuGzravIstTbuKBVIH4xwnYWsJhya6VrLIC12yYBzrSurwPRi4+gSk1ZMarkWjZ0apPfbbgoT1kNSJaONeSJqVLdbtCxyyvfh78shWEm+mNOjtK5CuVFIc3fYMdQMqcdn8qxykvAcmQ7nOzSVI4TfHmyT2WFcGKztRFgVgSBGMhoUo0In7usyTUrqvzlLvxiE1n58kcg0a8JaJ/T1kQiPJErUENadjntokB0co/XckOCdv4Ydt958FoL9hyez9vUBCFa0UyC/B1iTc5XsKsdvd7VJh611wKDaJHTmHKQLHRPVrmwz+Vwgq4JjIii3Qf6WCdfvb0J/Lzagsb/mw7oH5V/CPQehFvXdDGeZ4y2m422h/1PY5S+yybictS4XWdE+SOlkavpC+PuMG9eYNUkd1HmHz6KdzD+bZlTKIO3Fwvu6naxcGsxYm+SvN0F/SEJYNtJq6EPTfFbLXsE/v3HcN4ik1einbQqVHE2DiPKsBtIkYjs7ZgC+kGHDFmE6ikHSnfyrhEatCyakb6fPWgu0ddKhDN6fT2lG5qHzkXYBbSvaXDrkdzIDrboskGPqCTAc0/2aOO0ISevSlO+h/X8XexbIF6R5xS2LuCbDhjUbRcP/Xw/x+wTzYN8A6ip/VWjoVgzeEYE4fEO7SAOgJkwAOUd9t3vInkZMbZdmYzZXN+pwL4Lddxa2FqRQQOMZlHtcIL1Rn7JRNFKUXomwbnSYhQYXYAL3obwvgRlAzjcpDM0lLLsmqAQKEPhbiI/ZQ+bgtRl1ONOBckKjmyPq13C+hrhRiKg2CgO97ugUa4XrJphckWWgCbNwBeyf010EXeC8mHVVQwn8IdEzHguhuuuW9VmS2Wu09VxocjP1mNXXwXC79ML0aeRrQP5iW4Fk25Wkvlh3TID0fgrQ1xsO0of/zqOUUMze2xmEuj28TOhmIo+veFbEHdyx/wDBiTnPMQHSXsNjuVJ841DROrCreaBShbwS+Z0WhNKaMIpqeoZnmt9H+XzGdn4a35UEV9ykPNhD6EiaZlyI5O1tnZCgpxokjCWRzi3FwkpLqj0C+RU974UM6izJcz7xqnzRzPS3h3JxmIMlcAfjm+cg5rSgUMljUQ2L8O0EibybTT0iLIoK+gTLY6zZJAmaRyRH5wjezabD7azx3cJ+LlKpb0pAVoSLMp4lJ3kQVjLoEP3gXhRIdeDrkC1C9jDhTRpxiK/ynG3j8tHXJVrWYMpnGmmDcsp2r8dMFhDjAomiv0H3zyqbSWh2SV+cIkGKnU5RRRdk0LD7MRmeivJhCOLN75YwjStAXr3fCGrcoP0pO5KZ7cuendXnvmKTBpiJBTWc4rlhYYCOJSDiMsw8y7EbzEKf8D6mnyzhuqo3+D7fd1Y9J6laTJ/IC9ddcbni+kGP1SQMmYZboXN3xNNJObQ49aUWvMscV1R0mE/h45rSkFyJTY+80HkqMDNqZ4nzFEVPA+XMc5q9IPvjKjB93JcPya6y+GlMFNLxSF1F9xtWBUK07Uusemg3aesszXN5mF7BbovqGg2vbXtHj0fZKyGN1uxbLVn6URWmI+Mm9Y3ZTv4ZjJmUzKZvV4CA1/pS9NQcibA+CMECz07EJ1F+MUvvzocasAbZLhbNWQZtfZbKGT0/sJZBWlnXVyfA9Jc6tG49WriPVjLuC2n6ZDg/dY44KsJKWExa5AT/TId1AIqttQIUCkVHIOnWHJGwmLToGPnDO6Ts5PA/QLuAQtG9hDU/5neK/ri1A8pNR92fqM2vUHQ35sewH8WSooNIn2/jMtCaLdqfuEmbU6GYw4TFpPVXCBaCPtuG+ScifTs0tqtcoVB0C2ExadGR8bTN5oE2yjvFlacvFFVtRoVCCStKWptRiLSuboN802GsiyBYVa9QKJSwROKiYHt0IOrmWcgvmaUlCI67f1mbT6FQwvIhLdorSKfU0N7DV1uUV1o9ewjIMd0VCkWXw7kOywcUDgKC8wUpJvteGeePVs3+BOV7EPisFApFFyHrdVg+qEEQ74o2qtL+oEYjFVJMrpshiES6kMlQyUqhUGR6tDstMfgRCx2iSMsNaDnEIiaeffj6Lnw/bU6mGFpPM+nRaTsUSuZP0BmLVRUKRaeZhAqFQqGEpVAoFEpYCoVCCUuhUCiUsBQKhUIJS6FQKGEpFApFc/B/AQYA85FnN3ogElMAAAAASUVORK5CYII=\"","import * as firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\n\r\nimport { setGlobalState } from \"react-global-state-hook\";\r\n\r\nexport const AUTH = \"AUTH\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyB6BP4nchauDnzgyP02JY8w4HlKq-Hn0Co\",\r\n  authDomain: \"streaming-manager-dc49e.firebaseapp.com\",\r\n  databaseURL: \"https://streaming-manager-dc49e.firebaseio.com\",\r\n  projectId: \"streaming-manager-dc49e\",\r\n  storageBucket: \"streaming-manager-dc49e.appspot.com\",\r\n  messagingSenderId: \"1020740834639\",\r\n  appId: \"1:1020740834639:web:d1f9d9f36f771d1c97213a\",\r\n  measurementId: \"G-G26G4NTPC7\"\r\n};\r\n\r\nexport const getUser = () => firebase.auth().currentUser;\r\n\r\nexport const setAuthObserver = () => {\r\n  firebase.auth().onAuthStateChanged(async (user) => {\r\n    if (user) {\r\n      user.getIdToken().then(async (idToken) => {\r\n        localStorage.setItem(\"ID_TOKEN\", idToken);\r\n        setGlobalState(AUTH, true);\r\n      });\r\n    } else {\r\n      localStorage.removeItem(\"ID_TOKEN\");\r\n      setGlobalState(AUTH, false);\r\n    }\r\n  });\r\n};\r\n\r\nexport const initFirebase = async () => {\r\n  try {\r\n    // @ts-ignore\r\n    await firebase.initializeApp(firebaseConfig);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const register = async ({ email, password }) => {\r\n  try {\r\n    await firebase.auth().createUserWithEmailAndPassword(email, password);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const login = async ({ email, password }) => {\r\n  try {\r\n    await firebase.auth().signInWithEmailAndPassword(email, password);\r\n    // @ts-ignore\r\n    const idToken = await firebase.auth().currentUser.getIdToken(false);\r\n    localStorage.setItem(\"ID_TOKEN\", idToken);\r\n    setGlobalState(AUTH, true);\r\n  } catch (error) {\r\n    setGlobalState(AUTH, false);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const logout = async () => {\r\n  try {\r\n    await firebase.auth().signOut();\r\n    localStorage.removeItem(\"ID_TOKEN\");\r\n    setGlobalState(AUTH, false);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport default {\r\n  register,\r\n  login,\r\n  logout\r\n};\r\n","import React, { useState } from \"react\";\r\nimport \"./Auth.scss\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { register, login } from \"../services/auth\";\r\n\r\nexport const Auth = ({\r\n  match: {\r\n    params: { type = \"login\" }\r\n  },\r\n  history: { push }\r\n}: any) => {\r\n  const [values, setValues] = useState({ email: \"\", password: \"\" });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleChange = ({ target: { name, value } }) =>\r\n    setValues({ ...values, [name]: value });\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    if (type === \"login\") {\r\n      try {\r\n        await login(values);\r\n        push(\"/dashboard\");\r\n      } catch (error) {\r\n        setError(\"Auth Failed\");\r\n        push(\"/auth/login\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    } else {\r\n      try {\r\n        await register(values);\r\n        push(\"/auth/login\");\r\n      } catch (error) {\r\n        setError(\"Failed to register\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <main className=\"auth\">\r\n      <form\r\n        className=\"rounded grid gap-m pd-2 shadow-m\"\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <h2>{type.capitalize()}</h2>\r\n        <label className=\"form-field\">\r\n          Email\r\n          <input\r\n            type=\"email\"\r\n            value={values.email}\r\n            onChange={handleChange}\r\n            name=\"email\"\r\n            placeholder='\"something@web.com\"'\r\n            alt=\"enter your email\"\r\n          />\r\n        </label>\r\n        <label className=\"form-field\">\r\n          Password\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Aa-1****\"\r\n            alt=\"enter your password\"\r\n            value={values.password}\r\n            onChange={handleChange}\r\n            name=\"password\"\r\n          />\r\n        </label>\r\n        {error && <p className=\"error\">{error}</p>}\r\n        <button\r\n          className=\"rounded bg-grey-light pd-1010\"\r\n          disabled={loading}\r\n          type=\"submit\"\r\n        >\r\n          {loading ? \"Submitting..\" : \"Submit\"}\r\n        </button>\r\n        <Link to={type === \"login\" ? \"/auth/register\" : \"/auth/login\"}>\r\n          {type === \"login\" ? \"Register\" : \"Login\"}\r\n        </Link>\r\n      </form>\r\n    </main>\r\n  );\r\n};\r\n","import { getUser } from \"./../services/auth\";\r\n\r\nconst APIS =\r\n  process.env.NODE_ENV === \"development\"\r\n    ? {\r\n        folders: \"http://localhost:4000\",\r\n        videos: \"http://localhost:4001\",\r\n        playlists: \"http://localhost:4002\",\r\n        sequences: \"http://localhost:4004\",\r\n        viewer: \"http://localhost:4005\"\r\n      }\r\n    : {\r\n        folders:\r\n          \"https://us-central1-streaming-manager-dc49e.cloudfunctions.net/folder\",\r\n        videos:\r\n          \"https://us-central1-streaming-manager-dc49e.cloudfunctions.net/video\",\r\n        playlists:\r\n          \"https://us-central1-streaming-manager-dc49e.cloudfunctions.net/playlist\",\r\n        sequences:\r\n          \"https://us-central1-streaming-manager-dc49e.cloudfunctions.net/sequence\",\r\n        viewer:\r\n          \"https://us-central1-streaming-manager-dc49e.cloudfunctions.net/viewer\"\r\n      };\r\n\r\nexport const request = (api: string, path: string = \"\", options: any = {}) => {\r\n  const url = APIS[api];\r\n  // use\r\n  // const user = getUser();\r\n  // console.log(user);\r\n\r\n  return fetch(`${url}${path}`, {\r\n    ...options,\r\n    headers: {\r\n      ...options.headers,\r\n      \"Content-Type\": \"application/json\",\r\n      authorization: localStorage.getItem(\"ID_TOKEN\")\r\n    }\r\n  });\r\n};\r\n","import { request } from \"../utils/request\";\r\nimport { setGlobalState, getGlobalState } from \"react-global-state-hook\";\r\n\r\nexport const FOLDERS = \"FOLDERS\";\r\nexport const SELECTED_FOLDER = \"SELECTED_FOLDER\";\r\nexport const OPEN_FOLDERS = \"OPEN_FOLDERS\";\r\n\r\nexport const SELECTED_FOLDER_VIDEO = \"SELECTED_FOLDER_VIDEO\";\r\nexport const SELECTED_FOLDER_PLAYLIST = \"SELECTED_FOLDER_PLAYLIST\";\r\nexport const SELECTED_FOLDER_SEQUENCE = \"SELECTED_FOLDER_SEQUENCE\";\r\n\r\nexport const SELECTED_DIRECTORY = \"SELECTED_DIRECTORY\";\r\nexport const DIRECTORY_TYPES = {\r\n  PLAYLIST: \"PLAYLIST\",\r\n  VIDEO: \"VIDEO\",\r\n  SEQUENCE: \"SEQUENCE\"\r\n};\r\n\r\nsetGlobalState(FOLDERS, []);\r\nsetGlobalState(OPEN_FOLDERS, []);\r\n\r\nsetGlobalState(SELECTED_DIRECTORY, DIRECTORY_TYPES.PLAYLIST);\r\n\r\nexport const getFolders = async () => {\r\n  try {\r\n    const res = await request(\"folders\");\r\n    const data = await res.json();\r\n    setGlobalState(FOLDERS, data);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const postFolder = async (body) => {\r\n  try {\r\n    const res = await request(\"folders\", \"\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(body)\r\n    });\r\n    const id = await res.text();\r\n    const folders = getGlobalState(FOLDERS);\r\n    setGlobalState(FOLDERS, [...folders, { ...body, id }]);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const patchFolder = async ({ id, ...body }) => {\r\n  try {\r\n    await request(\"folders\", \"/\" + id, {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(body)\r\n    });\r\n    const folders = getGlobalState(FOLDERS);\r\n    let newFolder = { ...body, id, folder: body.folder };\r\n    if (body.folder === \"root\") {\r\n      delete newFolder.folder;\r\n    }\r\n    console.log(newFolder);\r\n\r\n    setGlobalState(\r\n      FOLDERS,\r\n      folders.map(({ folder, ...f }) =>\r\n        f.id === id ? { ...f, ...newFolder } : { ...f, folder }\r\n      )\r\n    );\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const deleteFolder = async (id) => {\r\n  try {\r\n    await request(\"folders\", \"/\" + id, { method: \"DELETE\" });\r\n    const folders = getGlobalState(FOLDERS);\r\n    setGlobalState(\r\n      FOLDERS,\r\n      folders.filter((f) => f.id !== id)\r\n    );\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport \"./Hint.scss\";\r\nimport {\r\n  useGlobalState,\r\n  setGlobalState,\r\n  getGlobalState\r\n} from \"react-global-state-hook\";\r\n\r\nconst HINTS = \"HINTS\";\r\n\r\nexport const showHint = (msg) => {\r\n  const hints = getGlobalState(HINTS);\r\n  setGlobalState(HINTS, [...hints, msg]);\r\n  setTimeout(() => {\r\n    const hints = getGlobalState(HINTS);\r\n    setGlobalState(\r\n      HINTS,\r\n      hints.filter((h) => h !== msg)\r\n    );\r\n  }, 3000);\r\n};\r\n\r\nconst closeHint = (e) => {\r\n  const msg = e.target.closest(\"li\").id;\r\n  const hints = getGlobalState(HINTS);\r\n  setGlobalState(\r\n    HINTS,\r\n    hints.filter((h) => h !== msg)\r\n  );\r\n};\r\n\r\nexport const Hint = () => {\r\n  const [hints] = useGlobalState(HINTS, []);\r\n\r\n  if (hints.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"hint\">\r\n      <ul className=\"grid\">\r\n        {hints.map((h) => (\r\n          <li\r\n            className=\"rounded shadow-m bg-grey-light aligned-grid pd-1311\"\r\n            id={h}\r\n          >\r\n            {h}\r\n            <i onClick={closeHint} className=\"material-icons\">\r\n              close\r\n            </i>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n","import { setGlobalState } from \"react-global-state-hook\";\r\nimport { getGlobalState } from \"react-global-state-hook\";\r\nimport { request } from \"../utils/request\";\r\n\r\nexport const SEQUENCES = \"SEQUENCES\";\r\nexport const FILTERED_SEQUENCES = \"FILTERED_SEQUENCES\";\r\nexport const SELECTED_SEQUENCES = \"SELECTED_SEQUENCES\";\r\nexport const SEQUENCER_TARGET = \"SEQUENCER_TARGET\";\r\nexport const EDITING_SEQUENCE = \"EDITING_SEQUENCE\";\r\n\r\nsetGlobalState(SEQUENCES, []);\r\nsetGlobalState(FILTERED_SEQUENCES, []);\r\nsetGlobalState(SELECTED_SEQUENCES, []);\r\nsetGlobalState(SEQUENCER_TARGET, null);\r\nsetGlobalState(EDITING_SEQUENCE, null);\r\n\r\nexport const moveSequences = async ({ folderId, ids, type }) => {\r\n  try {\r\n    await request(\"sequences\", `/moveTo/${folderId || \"root\"}`, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ ids, type })\r\n    });\r\n    const sequences = getGlobalState(SEQUENCES);\r\n    setGlobalState(\r\n      SEQUENCES,\r\n      sequences.map(({ folder, ...p }) => {\r\n        if (ids.includes(p.id)) {\r\n          const addFolder = folderId === \"root\" ? {} : { folder: folderId };\r\n          return {\r\n            ...p,\r\n            ...addFolder\r\n          };\r\n        } else {\r\n          return { ...p, folder };\r\n        }\r\n      })\r\n    );\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const getSequences = async () => {\r\n  try {\r\n    const res = await request(\"sequences\");\r\n    const data = await res.json();\r\n    setGlobalState(SEQUENCES, data);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const postSequence = async (body) => {\r\n  try {\r\n    let sequences = getGlobalState(SEQUENCES);\r\n    setGlobalState(SEQUENCES, [...sequences, body]);\r\n    const res = await request(\"sequences\", \"\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        ...body,\r\n        start: Number(body.start),\r\n        stop: Number(body.stop)\r\n      })\r\n    });\r\n    const id = await res.text();\r\n    sequences = getGlobalState(SEQUENCES);\r\n    setGlobalState(\r\n      SEQUENCES,\r\n      sequences.map((i) => {\r\n        if (!i.id && JSON.stringify(i) === JSON.stringify(body)) {\r\n          return { ...i, id };\r\n        }\r\n        return i;\r\n      })\r\n    );\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const patchSequence = async ({ id, ...body }) => {\r\n  try {\r\n    await request(\"sequences\", \"/\" + id, {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(body)\r\n    });\r\n    const sequences = getGlobalState(SEQUENCES);\r\n    setGlobalState(\r\n      SEQUENCES,\r\n      sequences.map((s) => (s.id === id ? { ...body, id } : s))\r\n    );\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const deleteSequences = async (id) => {\r\n  try {\r\n    const sequences = getGlobalState(SEQUENCES);\r\n    setGlobalState(\r\n      SEQUENCES,\r\n      sequences.map(({ id, ...sequence }) => {\r\n        if (id === id) {\r\n          return sequence;\r\n        }\r\n        return { id, ...sequence };\r\n      })\r\n    );\r\n    const { id: sequenceId, ...body } = sequences.find((s) => s.id === id);\r\n    const res = await request(\"sequences\", \"/\" + id, {\r\n      method: \"DELETE\"\r\n    });\r\n    if (res.status != 403) {\r\n      const folders = getGlobalState(SEQUENCES);\r\n      setGlobalState(\r\n        SEQUENCES,\r\n        folders.filter(\r\n          (f) => f.id && JSON.stringify(f) !== JSON.stringify(body)\r\n        )\r\n      );\r\n    } else {\r\n      alert(\r\n        \"Sequences not deletable. At least one sequence is existing in at least one of your Playlist\"\r\n      );\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","import { showHint } from \"./../components/Hint\";\r\nimport { SEQUENCES } from \"./sequences\";\r\nimport { request } from \"./../utils/request\";\r\nimport { setGlobalState, getGlobalState } from \"react-global-state-hook\";\r\n\r\nexport const VIDEOS = \"VIDEOS\";\r\n\r\nsetGlobalState(VIDEOS, []);\r\n\r\nexport const moveVideos = async ({ folderId, ids, type }) => {\r\n  try {\r\n    await request(\"videos\", `/moveTo/${folderId || \"root\"}`, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ ids, type })\r\n    });\r\n    const videos = getGlobalState(VIDEOS);\r\n    setGlobalState(\r\n      VIDEOS,\r\n      videos.map(({ folder, ...p }) => {\r\n        if (ids.includes(p.id)) {\r\n          const addFolder = folderId === \"root\" ? {} : { folder: folderId };\r\n          return {\r\n            ...p,\r\n            ...addFolder\r\n          };\r\n        } else {\r\n          return { ...p, folder };\r\n        }\r\n      })\r\n    );\r\n    showHint(\"Successfully moved Videos.\");\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const getVideo = async (id) => {\r\n  try {\r\n    const res = await request(\"videos\", \"/\" + id);\r\n    const data = await res.json();\r\n    setGlobalState(VIDEOS, [data.video]);\r\n    setGlobalState(SEQUENCES, data.sequences);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const getVideos = async () => {\r\n  try {\r\n    const res = await request(\"videos\");\r\n    const data = await res.json();\r\n    setGlobalState(VIDEOS, data);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const postVideo = async (values) => {\r\n  try {\r\n    const res = await request(\"videos\", \"\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(values)\r\n    });\r\n    const id = await res.text();\r\n    const videos = getGlobalState(VIDEOS);\r\n    setGlobalState(VIDEOS, [...videos, { id, ...values }]);\r\n    showHint(`Created new Video: \"${values.label}\".`);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const patchVideo = async ({ id, ...values }) => {\r\n  try {\r\n    await request(\"videos\", \"/\" + id, {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(values)\r\n    });\r\n    const videos = getGlobalState(VIDEOS);\r\n    setGlobalState(\r\n      VIDEOS,\r\n      videos.map((v) => (v.id === id ? { id, ...values } : v))\r\n    );\r\n    showHint(`Videos \"${values.label}\" successfully updated.`);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const deleteVideo = async (id) => {\r\n  try {\r\n    await request(\"videos\", \"/\" + id, {\r\n      method: \"DELETE\"\r\n    });\r\n    const videos = getGlobalState(VIDEOS);\r\n    setGlobalState(\r\n      VIDEOS,\r\n      videos.filter((v) => v.id !== id)\r\n    );\r\n    showHint(\"Video deleted successfully.\");\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","import { VIDEOS } from \"./videos\";\r\nimport { showHint } from \"./../components/Hint\";\r\nimport { request } from \"../utils/request\";\r\nimport { setGlobalState, getGlobalState } from \"react-global-state-hook\";\r\n\r\nexport const PLAYLISTS = \"PLAYLISTS\";\r\nexport const PLAYLIST_OPEN = \"PLAYLIST_OPEN\";\r\nexport const ACTIVE_PLAYLIST = \"ACTIVE_PLAYLIST\";\r\n\r\nsetGlobalState(PLAYLISTS, []);\r\nsetGlobalState(PLAYLIST_OPEN, true);\r\nsetGlobalState(ACTIVE_PLAYLIST, null);\r\n\r\nexport const movePlaylists = async ({ folderId, ids, type }) => {\r\n  try {\r\n    await request(\"folders\", `/moveTo/${folderId || \"root\"}`, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ ids, type })\r\n    });\r\n    const playlists = getGlobalState(PLAYLISTS);\r\n    setGlobalState(\r\n      PLAYLISTS,\r\n      playlists.map(({ folder, ...p }) => {\r\n        if (ids.includes(p.id)) {\r\n          const addFolder = folderId === \"root\" ? {} : { folder: folderId };\r\n          return {\r\n            ...p,\r\n            ...addFolder\r\n          };\r\n        } else {\r\n          return { ...p, folder };\r\n        }\r\n      })\r\n    );\r\n    showHint(`Successfully moved playlists.`);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\n// this is only used\r\nexport const getPlaylist = async (id) => {\r\n  try {\r\n    const res = await request(\"playlists\", \"/\" + id);\r\n    const data = await res.json();\r\n    // playlist should either exist because when the user loads the app it gets all users objects\r\n    // otherwise the user is directly put to the sequencer and the certain object needs to be fetched and added to store\r\n    setGlobalState(VIDEOS, data.videos);\r\n    setGlobalState(PLAYLISTS, [data.playlist]);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const getPlaylists = async () => {\r\n  try {\r\n    const res = await request(\"playlists\");\r\n    const data = await res.json();\r\n    setGlobalState(PLAYLISTS, data);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const postPlaylist = async (values) => {\r\n  try {\r\n    const res = await request(\"playlists\", \"\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(values)\r\n    });\r\n    const id = await res.text();\r\n    const playlists = getGlobalState(PLAYLISTS);\r\n    setGlobalState(PLAYLISTS, [...playlists, { id, ...values }]);\r\n    setGlobalState(ACTIVE_PLAYLIST, id);\r\n    showHint(`Created new playlist \"${values.label}\".`);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const patchPlaylist = async ({ id, ...values }) => {\r\n  try {\r\n    await request(\"playlists\", \"/\" + id, {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(values)\r\n    });\r\n    const playlists = getGlobalState(PLAYLISTS);\r\n    setGlobalState(\r\n      PLAYLISTS,\r\n      playlists.map((v) => (v.id === id ? { id, ...values } : v))\r\n    );\r\n    showHint(`Playlist \"${values.label}\" updated successfully.`);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const deletePlaylist = async (id) => {\r\n  try {\r\n    await request(\"playlists\", \"/\" + id, { method: \"DELETE\" });\r\n    const playlists = getGlobalState(PLAYLISTS);\r\n    setGlobalState(\r\n      PLAYLISTS,\r\n      playlists.filter((f) => f.id !== id)\r\n    );\r\n    showHint(`Playlist deleted successfully.`);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","import React, { useMemo } from \"react\";\r\nimport {\r\n  useGlobalState,\r\n  setGlobalState,\r\n  getGlobalState\r\n} from \"react-global-state-hook\";\r\nimport {\r\n  OPEN_FOLDERS,\r\n  DIRECTORY_TYPES,\r\n  SELECTED_DIRECTORY\r\n} from \"../../stores/folder\";\r\nimport { MODAL } from \"../Modal\";\r\nimport { VIDEOS } from \"../../stores/videos\";\r\nimport { PLAYLISTS } from \"../../stores/playlists\";\r\nimport { SEQUENCES } from \"../../stores/sequences\";\r\n\r\nconst handleDragStart = (e) => {\r\n  const folderId = e.target.closest(\".folder\").id;\r\n  const directory = e.target.closest(\".folder\").classList[0];\r\n\r\n  e.dataTransfer.setData(\r\n    \"text/plain\",\r\n    JSON.stringify({ ids: [folderId], type: \"FOLDER\", directory })\r\n  );\r\n};\r\n\r\nconst getItemsCount = (directory, folderId) => {\r\n  if (directory === DIRECTORY_TYPES.VIDEO) {\r\n    return getGlobalState(VIDEOS).filter((v) => v.folder === folderId).length;\r\n  } else if (directory === DIRECTORY_TYPES.PLAYLIST) {\r\n    return getGlobalState(PLAYLISTS).filter((p) => p.folder === folderId)\r\n      .length;\r\n  } else {\r\n    return getGlobalState(SEQUENCES).filter((s) => s.folder === folderId)\r\n      .length;\r\n  }\r\n};\r\n\r\nexport const MenuFolder = ({\r\n  folders,\r\n  id,\r\n  folder,\r\n  label,\r\n  directory,\r\n  handleOpenFolder,\r\n  handleSelectFolder,\r\n  handleDrop\r\n}) => {\r\n  const [openFolders] = useGlobalState(OPEN_FOLDERS);\r\n  const [selectedFolder] = useGlobalState(\r\n    `SELECTED_FOLDER_${DIRECTORY_TYPES[directory]}`\r\n  );\r\n  const [selectedDirectory] = useGlobalState(SELECTED_DIRECTORY);\r\n\r\n  const childFolders = folders.filter((f) => f.folder === id);\r\n\r\n  const open = openFolders.includes(id);\r\n  const selected = selectedFolder === id && directory === selectedDirectory;\r\n\r\n  const handleEdit = () => {\r\n    setGlobalState(MODAL, {\r\n      component: \"folder\",\r\n      props: { id, label, folder, directory }\r\n    });\r\n  };\r\n\r\n  const handleSelect = (e) => {\r\n    e.stopPropagation();\r\n    handleSelectFolder(id, directory);\r\n    setGlobalState(SELECTED_DIRECTORY, DIRECTORY_TYPES[directory]);\r\n  };\r\n\r\n  const count = useMemo(() => getItemsCount(directory, id), [directory, id]);\r\n\r\n  return (\r\n    <div\r\n      onDrop={handleDrop}\r\n      onDragOver={(e) => e.preventDefault()}\r\n      className={`${directory} folder ${open ? \"open\" : \"\"} ${\r\n        selected ? \"selected\" : \"\"\r\n      }`}\r\n      id={id}\r\n    >\r\n      <div\r\n        draggable={true}\r\n        onDragStart={handleDragStart}\r\n        onClick={handleSelect}\r\n        className=\"folder_header pd-051 aligned-grid grid-tc-mm1m gap-m bg-white\"\r\n      >\r\n        {childFolders.length !== 0 ? (\r\n          <i onClick={() => handleOpenFolder(id)} className=\"material-icons\">\r\n            keyboard_arrow_right\r\n          </i>\r\n        ) : (\r\n          <i className=\"material-icons no_child_folder centered-grid\">\r\n            keyboard_arrow_right\r\n          </i>\r\n        )}\r\n        <label>{label}</label>\r\n        <small>({count})</small>\r\n        <i onClick={handleEdit} className=\"material-icons\">\r\n          more_vert\r\n        </i>\r\n      </div>\r\n      <div className=\"folder_folders\">\r\n        {open &&\r\n          childFolders.map((f, i) => (\r\n            <MenuFolder\r\n              {...f}\r\n              handleOpenFolder={handleOpenFolder}\r\n              handleSelectFolder={handleSelectFolder}\r\n              handleDrop={handleDrop}\r\n              key={i}\r\n              folders={folders}\r\n              directory={directory}\r\n            />\r\n          ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport \"./Path.scss\";\r\n\r\nimport { useGlobalState } from \"react-global-state-hook\";\r\nimport {\r\n  FOLDERS,\r\n  SELECTED_DIRECTORY,\r\n  DIRECTORY_TYPES\r\n} from \"../../stores/folder\";\r\nimport { PLAYLIST_OPEN } from \"../../stores/playlists\";\r\n\r\nexport const getPath = (\r\n  id: string | null,\r\n  folders: {\r\n    id: string;\r\n    label: string;\r\n  }[],\r\n  path: { id: string | null; label: string }[] = []\r\n) => {\r\n  const folder: any = folders.find((f) => f.id === id);\r\n\r\n  if (!folder) {\r\n    return path;\r\n  }\r\n  if (folder && !folder.folder) {\r\n    return [{ id, label: folder.label }, ...path];\r\n  }\r\n  const parentFolder = folders.find((f) => f.id === folder.folder) || {\r\n    id: null,\r\n    label: \"Root\"\r\n  };\r\n\r\n  return getPath(parentFolder.id, folders, [\r\n    { id: folder.folder, label: folder.label },\r\n    ...path\r\n  ]);\r\n};\r\n\r\nexport const Path = () => {\r\n  const [selectedDirectory] = useGlobalState(SELECTED_DIRECTORY);\r\n  const [folders] = useGlobalState(FOLDERS);\r\n  const [selectedFolder, setSelectedFolder] = useGlobalState(\r\n    `SELECTED_FOLDER_${DIRECTORY_TYPES[selectedDirectory]}`\r\n  );\r\n  const [playlistOpen, setPlaylistOpen] = useGlobalState(PLAYLIST_OPEN);\r\n\r\n  const path = getPath(selectedFolder, folders);\r\n\r\n  const handleDirClick = () => setSelectedFolder(null);\r\n\r\n  return (\r\n    <div className=\"path aligned-grid grid-tc-1m gap-m bg-white\">\r\n      <div className=\"aligned-grid gap-m pd-051\">\r\n        <div className=\"grid gap-s\" onClick={handleDirClick}>\r\n          <i className=\"material-icons\">\r\n            {selectedDirectory === DIRECTORY_TYPES.PLAYLIST\r\n              ? \"playlist_play\"\r\n              : selectedDirectory === DIRECTORY_TYPES.VIDEO\r\n              ? \"subscriptions\"\r\n              : \"open_in_full\"}\r\n          </i>\r\n          <h4>{`${selectedDirectory.toLowerCase().capitalize()}s`}</h4>\r\n        </div>\r\n        {path.map((p, i) => {\r\n          return (\r\n            <div\r\n              className=\"aligned-grid gap-m\"\r\n              key={i}\r\n              onClick={() => setSelectedFolder(p.id)}\r\n            >\r\n              <i className=\"material-icons\">keyboard_arrow_right</i>\r\n              {p.label}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <button className=\"pd-01\" onClick={() => setPlaylistOpen(!playlistOpen)}>\r\n        <i className=\"material-icons\">\r\n          {playlistOpen ? \"keyboard_arrow_right\" : \"keyboard_arrow_left\"}\r\n        </i>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useMemo } from \"react\";\r\nimport {\r\n  getGlobalState,\r\n  setGlobalState,\r\n  useGlobalState\r\n} from \"react-global-state-hook\";\r\nimport {\r\n  OPEN_FOLDERS,\r\n  SELECTED_DIRECTORY,\r\n  DIRECTORY_TYPES,\r\n  FOLDERS,\r\n  SELECTED_FOLDER,\r\n  patchFolder\r\n} from \"../../stores/folder\";\r\nimport { movePlaylists, PLAYLISTS } from \"../../stores/playlists\";\r\nimport { moveVideos, VIDEOS } from \"../../stores/videos\";\r\nimport { moveSequences, SEQUENCES } from \"../../stores/sequences\";\r\nimport { MenuFolder } from \"./MenuFolder\";\r\nimport { getPath } from \"./Path\";\r\n\r\nconst handleSelectFolder = (id, directory) => {\r\n  setGlobalState(SELECTED_FOLDER, id);\r\n  setGlobalState(`SELECTED_FOLDER_${DIRECTORY_TYPES[directory]}`, id);\r\n};\r\n\r\nconst handleDrop = async (e) => {\r\n  e.stopPropagation();\r\n  const folders = getGlobalState(FOLDERS);\r\n  const dropFolderId = e.target.closest(\".folder\").id;\r\n  const dropFolder = folders.find((f) => f.id === dropFolderId);\r\n\r\n  const { ids, type, directory } = JSON.parse(\r\n    e.dataTransfer.getData(\"text/plain\")\r\n  );\r\n\r\n  if (type === \"FOLDER\") {\r\n    //  drop folder on folder, need to check if fodler types are matching\r\n    const dragFolderId = ids[0];\r\n    const dragFolder = folders.find((f) => f.id === dragFolderId);\r\n\r\n    const path = getPath(dropFolderId, folders, []);\r\n    const isOutOfPath = path.every((p) => p.id !== dragFolderId);\r\n    if (dragFolderId === dropFolderId) {\r\n      alert(\"Cant push into own folder\");\r\n    } else if (!isOutOfPath) {\r\n      alert(\"Cant push into own path\");\r\n    } else if (directory === dragFolder.directory) {\r\n      patchFolder({ id: dragFolderId, folder: dropFolderId || \"root\" });\r\n    }\r\n  } else if (\r\n    !dropFolderId ||\r\n    type === directory ||\r\n    type === dropFolder.directory\r\n  ) {\r\n    // restricts movement into different directory\r\n    if (type === DIRECTORY_TYPES.PLAYLIST) {\r\n      movePlaylists({ folderId: dropFolderId, ids, type });\r\n    } else if (type === DIRECTORY_TYPES.VIDEO) {\r\n      moveVideos({ folderId: dropFolderId, ids, type });\r\n    } else {\r\n      moveSequences({ folderId: dropFolderId, ids, type });\r\n    }\r\n  }\r\n};\r\n\r\nconst handleOpenFolder = (id) => {\r\n  const openFolders = getGlobalState(OPEN_FOLDERS);\r\n  if (openFolders.includes(id)) {\r\n    setGlobalState(\r\n      OPEN_FOLDERS,\r\n      openFolders.filter((f) => f !== id)\r\n    );\r\n  } else {\r\n    setGlobalState(OPEN_FOLDERS, [...openFolders, id]);\r\n  }\r\n};\r\n\r\nconst getItemsCount = (directory) => {\r\n  if (directory === DIRECTORY_TYPES.VIDEO) {\r\n    return getGlobalState(VIDEOS).length;\r\n  } else if (directory === DIRECTORY_TYPES.PLAYLIST) {\r\n    return getGlobalState(PLAYLISTS).length;\r\n  } else {\r\n    return getGlobalState(SEQUENCES).length;\r\n  }\r\n};\r\n\r\nexport const MenuItem = ({ folders, directory }) => {\r\n  const [selectedDirectory, setSelectedDirectory] = useGlobalState(\r\n    SELECTED_DIRECTORY\r\n  );\r\n  const rootFolders = folders.filter(\r\n    (f) => !f.folder && f.directory === directory\r\n  );\r\n\r\n  const handleSelect = () => {\r\n    handleOpenFolder(null);\r\n    handleSelectFolder(null, directory);\r\n    setSelectedDirectory(DIRECTORY_TYPES[directory]);\r\n  };\r\n\r\n  const count = useMemo(() => getItemsCount(directory), [directory]);\r\n\r\n  return (\r\n    <div\r\n      onDrop={handleDrop}\r\n      onDragOver={(e) => e.preventDefault()}\r\n      onClick={handleSelect}\r\n      id=\"\"\r\n      className={`menu_item folder ${\r\n        selectedDirectory === DIRECTORY_TYPES[directory.toUpperCase()]\r\n          ? \"selected\"\r\n          : \"\"\r\n      }`}\r\n    >\r\n      <div className=\"menu_item_header pd-01501 aligned-grid grid-tc-mm1 gap-m\">\r\n        <i className=\"material-icons\">\r\n          {directory === DIRECTORY_TYPES.PLAYLIST\r\n            ? \"playlist_play\"\r\n            : directory === DIRECTORY_TYPES.VIDEO\r\n            ? \"subscriptions\"\r\n            : \"open_in_full\"}\r\n        </i>\r\n        <label>\r\n          {DIRECTORY_TYPES[directory].toLowerCase().capitalize() + \"s\"}\r\n        </label>\r\n        <small>({count})</small>\r\n      </div>\r\n      <div className=\"folder_folders\">\r\n        {rootFolders.map((f, i) => {\r\n          return (\r\n            <MenuFolder\r\n              {...f}\r\n              handleOpenFolder={handleOpenFolder}\r\n              handleSelectFolder={handleSelectFolder}\r\n              handleDrop={handleDrop}\r\n              key={i}\r\n              folders={folders}\r\n              directory={directory}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport \"./Modal.scss\";\r\nimport { useGlobalState, setGlobalState } from \"react-global-state-hook\";\r\nimport { Folder } from \"../forms/Folder\";\r\nimport { Video } from \"../forms/Video\";\r\nimport { Playlist } from \"../forms/Playlist\";\r\nimport { New } from \"../forms/New\";\r\nimport { SelectFolder } from \"../forms/SelectFolder\";\r\nimport { Share } from \"../forms/Share\";\r\nimport { Replay } from \"../forms/Replay\";\r\nimport { Profile } from \"./Profile\";\r\n\r\nexport const MODAL = \"MODAL\";\r\n\r\nconst INITIAL_CONFIG = {\r\n  component: \"\",\r\n  props: {}\r\n};\r\n\r\nconst COMPONENTS = {\r\n  FOLDER: Folder,\r\n  VIDEO: Video,\r\n  PLAYLIST: Playlist,\r\n  NEW: New,\r\n  SELECTFOLDER: SelectFolder,\r\n  SHARE: Share,\r\n  REPLAY: Replay,\r\n  PROFILE: Profile\r\n};\r\n\r\nexport const Modal = () => {\r\n  const [modal, setModal] = useGlobalState(MODAL, INITIAL_CONFIG);\r\n\r\n  const component = modal.component.toUpperCase();\r\n\r\n  const closeModal = () => {\r\n    if (modal.onClose) {\r\n      modal.onClose();\r\n    }\r\n    setGlobalState(MODAL, INITIAL_CONFIG);\r\n  };\r\n\r\n  if (!Object.keys(COMPONENTS).includes(component)) {\r\n    document.body.style.overflow = \"auto\";\r\n    return null;\r\n  }\r\n\r\n  const handleClick = (e) => {\r\n    if (e.target.classList.contains(\"modal\")) {\r\n      setModal(INITIAL_CONFIG);\r\n    }\r\n  };\r\n\r\n  const renderComponent = (component: string) => {\r\n    const SelectedComponent = COMPONENTS[component];\r\n\r\n    return (\r\n      <SelectedComponent\r\n        onClick={(e) => e.stopPropagation()}\r\n        {...modal.props}\r\n        closeModal={closeModal}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div onClick={handleClick} className=\"modal centered-grid full-screen\">\r\n      {renderComponent(component)}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useMemo } from \"react\";\r\nimport {\r\n  patchFolder,\r\n  postFolder,\r\n  deleteFolder,\r\n  FOLDERS,\r\n  DIRECTORY_TYPES\r\n} from \"../stores/folder\";\r\nimport { getGlobalState, useGlobalState } from \"react-global-state-hook\";\r\n\r\nexport const Folder = ({ onSubmit, closeModal, id, directory, ...values }) => {\r\n  const [folders] = useGlobalState(FOLDERS);\r\n  const [folder] = useState(\r\n    id\r\n      ? values.folder\r\n      : getGlobalState(`SELECTED_FOLDER_${DIRECTORY_TYPES[directory]}`)\r\n  );\r\n  const [label, setLabel] = useState(values.label || \"\");\r\n\r\n  const deletable = useMemo(() => {\r\n    const usedFolderIds = getGlobalState(\r\n      DIRECTORY_TYPES[directory] + \"S\"\r\n    ).reduce((prev, curr) => {\r\n      return Array.from(new Set([...prev, curr.folder]));\r\n    }, []);\r\n    return !usedFolderIds.includes(id);\r\n  }, [id, directory]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const addFolder = !folder ? {} : { folder };\r\n    if (id) {\r\n      await patchFolder({ id, label, ...addFolder });\r\n      closeModal();\r\n    } else {\r\n      await postFolder({ label, directory, ...addFolder });\r\n      closeModal();\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (deletable) {\r\n      const confirmed = window.confirm(\"Deleting Folder\");\r\n      if (confirmed) {\r\n        await deleteFolder(id);\r\n        closeModal();\r\n      }\r\n    } else {\r\n      alert(\r\n        \"Folder is not empty. Please move or delete all playlists in this folder before you delete it.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const { label: folderLabel } = folders.find((f) => f.id === folder) || {\r\n    label: directory.toLowerCase().capitalize() + \"s\"\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div className=\"form-header\">\r\n        <h3>\r\n          {`${id ? \"Edit Folder in\" : \"Add Folder to\"} ${folderLabel}`}\r\n          <button onClick={handleDelete} disabled={!deletable} type=\"button\">\r\n            <i className=\"material-icons\">delete</i>\r\n          </button>\r\n        </h3>\r\n      </div>\r\n      <div className=\"form-body\">\r\n        <label>\r\n          Label\r\n          <input\r\n            name=\"folderName\"\r\n            alt=\"enter folder name\"\r\n            type=\"text\"\r\n            value={label}\r\n            onChange={({ target: { value } }) => setLabel(value)}\r\n          />\r\n        </label>\r\n        <button type=\"submit\">Save</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n","import React, { useState, useEffect, useMemo } from \"react\";\r\nimport { patchVideo, postVideo, deleteVideo } from \"../stores/videos\";\r\nimport { getGlobalState, setGlobalState } from \"react-global-state-hook\";\r\nimport ReactPlayer from \"react-player\";\r\nimport { VIDEO_DETECTED } from \"../components/Dashboard/DashboardHeader\";\r\nimport {\r\n  SELECTED_FOLDER_VIDEO,\r\n  FOLDERS,\r\n  DIRECTORY_TYPES\r\n} from \"../stores/folder\";\r\nimport { PLAYLISTS } from \"../stores/playlists\";\r\nimport { SEQUENCES } from \"../stores/sequences\";\r\n\r\nexport const Video = ({ onSubmit, closeModal, id, ...values }) => {\r\n  const [label, setLabel] = useState(values.label || \"\");\r\n  const [url, setUrl] = useState(values.url || \"\");\r\n  const [keywords, setKeywords] = useState(values.keywords || []);\r\n  const [keyword, setKeyword] = useState(\"\");\r\n  const [folderName, setFolderName] = useState(\"\");\r\n\r\n  const folderId = getGlobalState(SELECTED_FOLDER_VIDEO) || \"root\";\r\n  const folder = getGlobalState(FOLDERS).find((f) => f.id === folderId);\r\n\r\n  useEffect(() => {\r\n    const folders = getGlobalState(FOLDERS);\r\n    const folder = folders.find((f) => f.id === values.folder);\r\n    if (folder) {\r\n      setFolderName(folder.label);\r\n    } else {\r\n      setFolderName(\"Root Directory\");\r\n    }\r\n  }, [values]);\r\n\r\n  const deletable = useMemo(() => {\r\n    const usedPlaylistVideoIds = getGlobalState(PLAYLISTS).reduce(\r\n      (prev, curr) => {\r\n        const videoIds = curr.items\r\n          .filter((i) => i.split(\":\")[0] === DIRECTORY_TYPES.VIDEO)\r\n          .map((i) => i.split(\":\")[1]);\r\n        return Array.from(new Set([...prev, ...videoIds]));\r\n      },\r\n      []\r\n    );\r\n    const usedSequenceVideoIds = getGlobalState(SEQUENCES).reduce(\r\n      (prev, curr) => {\r\n        return Array.from(new Set([...prev, curr.videoId]));\r\n      },\r\n      []\r\n    );\r\n\r\n    const isUnused = !Array.from(\r\n      new Set([...usedPlaylistVideoIds, ...usedSequenceVideoIds])\r\n    ).includes(id);\r\n    return isUnused;\r\n  }, [id]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (id) {\r\n      await patchVideo({ id, url, label, keywords });\r\n      closeModal();\r\n    } else {\r\n      const addFolder = folderId === \"root\" ? {} : { folder: folderId };\r\n      await postVideo({\r\n        url,\r\n        label,\r\n        keywords,\r\n        ...addFolder\r\n      });\r\n      closeModal();\r\n      setGlobalState(VIDEO_DETECTED, false);\r\n    }\r\n  };\r\n\r\n  const handleAddKeyword = (e) => {\r\n    e.preventDefault();\r\n    setKeywords([...keywords, keyword]);\r\n    setKeyword(\"\");\r\n  };\r\n\r\n  const handleRemove = (word) =>\r\n    setKeywords(keywords.filter((w) => w !== word));\r\n\r\n  const handleChangeUrl = ({ target: { value } }) => {\r\n    if (ReactPlayer.canPlay(value) || value === \"\") {\r\n      setUrl(value);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (\r\n      deletable &&\r\n      window.confirm(\"Are you sure you want to delete this video?\")\r\n    ) {\r\n      await deleteVideo(id);\r\n      closeModal();\r\n    } else {\r\n      alert(\"Video is used in playlists and/or sequences\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div className=\"form-header\">\r\n        <h3>\r\n          {`${id ? \"Edit Video\" : \"Post Video\"} to ${\r\n            folder ? folder.label : \"Root\"\r\n          }`}\r\n          {/* type = \"button\" otehrwise itll submit form */}\r\n          <button type=\"button\" onClick={handleDelete} disabled={!deletable}>\r\n            <i className=\"material-icons\">delete</i>\r\n          </button>\r\n        </h3>\r\n        <div className=\"form-folder\">\r\n          <i className=\"material-icons\">folder</i>\r\n          {folderName}\r\n        </div>\r\n      </div>\r\n      <div className=\"form-body\">\r\n        <label>\r\n          Label\r\n          <input\r\n            placeholder=\"Add Label...\"\r\n            name=\"videoName\"\r\n            alt=\"enter video name\"\r\n            type=\"text\"\r\n            value={label}\r\n            onChange={({ target: { value } }) => setLabel(value)}\r\n          />\r\n        </label>\r\n        <label>\r\n          Url\r\n          <input\r\n            disabled={!!id}\r\n            name=\"url\"\r\n            alt=\"enter url name\"\r\n            placeholder=\"Insert Video Link\"\r\n            type=\"text\"\r\n            value={url}\r\n            onChange={handleChangeUrl}\r\n          />\r\n        </label>\r\n        <label className=\"keywords\">\r\n          Keywords\r\n          <input\r\n            type=\"text\"\r\n            value={keyword}\r\n            placeholder=\"Add keyword..\"\r\n            alt=\"add keyword\"\r\n            onChange={({ target: { value } }) => setKeyword(value)}\r\n          />\r\n          <button onClick={handleAddKeyword}>\r\n            <i className=\"material-icons\">add</i>\r\n          </button>\r\n        </label>\r\n        <ul className=\"keywords-list\">\r\n          {keywords.map((k, i) => (\r\n            <li key={i}>\r\n              {k}\r\n              <i onClick={() => handleRemove(k)} className=\"material-icons\">\r\n                close\r\n              </i>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        <button type=\"submit\">Save</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  patchPlaylist,\r\n  postPlaylist,\r\n  deletePlaylist\r\n} from \"../stores/playlists\";\r\nimport { getGlobalState, useGlobalState } from \"react-global-state-hook\";\r\nimport { FOLDERS, DIRECTORY_TYPES } from \"../stores/folder\";\r\nimport { VIDEOS } from \"../stores/videos\";\r\nimport { SEQUENCES } from \"../stores/sequences\";\r\n\r\nexport const Playlist = ({ onSubmit, closeModal, id, ...values }) => {\r\n  const [label, setLabel] = useState(values.label || \"\");\r\n  const [items, setItems] = useState(values.items || []);\r\n  const [keywords, setKeywords] = useState(values.keywords || []);\r\n  const [keyword, setKeyword] = useState(\"\");\r\n  const [folderName, setFolderName] = useState(\"\");\r\n  const [videos] = useGlobalState(VIDEOS);\r\n  const [sequences] = useGlobalState(SEQUENCES);\r\n\r\n  useEffect(() => {\r\n    const folders = getGlobalState(FOLDERS);\r\n    const folder = folders.find((f) => f.id === values.folder);\r\n    if (folder) {\r\n      setFolderName(folder.label);\r\n    } else {\r\n      setFolderName(\"Root Directory\");\r\n    }\r\n  }, [values]);\r\n\r\n  const handleAddKeyword = (e) => {\r\n    e.preventDefault();\r\n    setKeywords([...keywords, keyword]);\r\n    setKeyword(\"\");\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    const confirmed = window.confirm(\"Deleting Playlist\");\r\n    if (confirmed) {\r\n      await deletePlaylist(id);\r\n      closeModal();\r\n    }\r\n  };\r\n\r\n  const handleRemove = (word) =>\r\n    setKeywords(keywords.filter((w) => w !== word));\r\n\r\n  const removeItem = (id) =>\r\n    setItems(items.filter((i) => i.split(\":\")[0] !== id));\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (id) {\r\n      await patchPlaylist({\r\n        id,\r\n        items,\r\n        label,\r\n        keywords\r\n      });\r\n      closeModal();\r\n    } else {\r\n      await postPlaylist({ items, label, keywords });\r\n      closeModal();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div className=\"form-header\">\r\n        <h3>\r\n          {`${id ? \"Edit Playlist\" : \"Post Playlist\"}`}{\" \"}\r\n          <i onClick={handleDelete} className=\"material-icons\">\r\n            delete\r\n          </i>\r\n        </h3>\r\n        <div className=\"form-folder\">\r\n          <i className=\"material-icons\">folder</i>\r\n          {folderName}\r\n        </div>\r\n      </div>\r\n      <div className=\"form-body\">\r\n        <label>\r\n          Label\r\n          <input\r\n            name=\"playlistName\"\r\n            placeholder=\"'My Playlist'\"\r\n            alt=\"enter playlist name\"\r\n            type=\"text\"\r\n            value={label}\r\n            onChange={({ target: { value } }) => setLabel(value)}\r\n          />\r\n        </label>\r\n        <ul className=\"links\">\r\n          {items.length === 0 ? (\r\n            <li>No Videos selected</li>\r\n          ) : (\r\n            items.map((item, i) => {\r\n              const [type, id] = item.split(\":\");\r\n              const { label } =\r\n                type === DIRECTORY_TYPES.VIDEO\r\n                  ? videos.find((v) => v.id === id)\r\n                  : sequences.find((s) => s.id === id);\r\n              return (\r\n                <li id={i}>\r\n                  {label}\r\n                  <i\r\n                    onClick={() => removeItem(item)}\r\n                    className=\"material-icons\"\r\n                  >\r\n                    close\r\n                  </i>\r\n                </li>\r\n              );\r\n            })\r\n          )}\r\n        </ul>\r\n        <label className=\"keywords\">\r\n          Keywords\r\n          <input\r\n            type=\"text\"\r\n            value={keyword}\r\n            placeholder=\"Add keyword..\"\r\n            alt=\"add keyword\"\r\n            onChange={({ target: { value } }) => setKeyword(value)}\r\n          />\r\n          <button onClick={handleAddKeyword}>\r\n            <i className=\"material-icons\">add</i>\r\n          </button>\r\n        </label>\r\n        <ul className=\"keywords-list\">\r\n          {keywords.map((k, i) => (\r\n            <li key={i}>\r\n              {k}\r\n              <i onClick={() => handleRemove(k)} className=\"material-icons\">\r\n                close\r\n              </i>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        <button type=\"submit\">Save</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { setGlobalState } from \"react-global-state-hook\";\r\nimport { MODAL } from \"../components/Modal\";\r\nimport { DIRECTORY_TYPES } from \"../stores/folder\";\r\n\r\nexport const New = ({ closeModal }) => {\r\n  const openFolder = () => {\r\n    closeModal();\r\n    setGlobalState(MODAL, {\r\n      component: \"folder\"\r\n    });\r\n  };\r\n\r\n  const openVideo = () => {\r\n    closeModal();\r\n    setGlobalState(MODAL, {\r\n      component: DIRECTORY_TYPES.VIDEO\r\n    });\r\n  };\r\n\r\n  return (\r\n    <form className=\"form-new\">\r\n      <div className=\"form-header\">\r\n        <h3>Add New</h3>\r\n      </div>\r\n      <div className=\"form-body\">\r\n        <div onClick={openFolder}>\r\n          <i className=\"material-icons\">folder</i>\r\n          <label>Folder</label>\r\n        </div>\r\n        <div onClick={openVideo}>\r\n          <i className=\"material-icons\">ondemand_video</i>\r\n          <label>Video</label>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n","import React, { useMemo, useEffect } from \"react\";\r\nimport { MenuItem } from \"../components/Dashboard/MenuItem\";\r\nimport {\r\n  DIRECTORY_TYPES,\r\n  FOLDERS,\r\n  SELECTED_FOLDER_SEQUENCE\r\n} from \"../stores/folder\";\r\nimport { useGlobalState } from \"react-global-state-hook\";\r\n\r\nexport const SelectFolder = ({ onSelect }) => {\r\n  const [folders] = useGlobalState(FOLDERS);\r\n  const [selectedFolderId] = useGlobalState(SELECTED_FOLDER_SEQUENCE);\r\n\r\n  const selectedFolder = useMemo(\r\n    () => folders.find((f) => f.id === selectedFolderId),\r\n    [folders, selectedFolderId]\r\n  );\r\n\r\n  useEffect(() => {\r\n    onSelect(selectedFolderId);\r\n  }, [selectedFolderId, onSelect]);\r\n\r\n  return (\r\n    <div className=\"select-folder\">\r\n      <h3>{`${\r\n        selectedFolder ? selectedFolder.label : \"Root Folder\"\r\n      } Selected`}</h3>\r\n      <MenuItem directory={DIRECTORY_TYPES.SEQUENCE} folders={folders} />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useMemo } from \"react\";\r\nimport { DIRECTORY_TYPES } from \"../stores/folder\";\r\nimport { getGlobalState } from \"react-global-state-hook\";\r\nimport { VIDEOS } from \"../stores/videos\";\r\nimport { SEQUENCES } from \"../stores/sequences\";\r\nimport { PLAYLISTS } from \"../stores/playlists\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport const Share = ({ type, id, closeModal }) => {\r\n  const item = useMemo(() => {\r\n    if (type === DIRECTORY_TYPES.VIDEO) {\r\n      return getGlobalState(VIDEOS).find((v) => v.id === id);\r\n    } else if (type === DIRECTORY_TYPES.SEQUENCE) {\r\n      return getGlobalState(SEQUENCES).find((s) => s.id === id);\r\n    } else if (type === DIRECTORY_TYPES.PLAYLIST) {\r\n      return getGlobalState(PLAYLISTS).find((p) => p.id);\r\n    }\r\n  }, [type, id]);\r\n\r\n  const url = `http://localhost:3000`;\r\n  const path = `/viewer/${type.toLowerCase()}/${id}`;\r\n\r\n  const handleCopy = () => navigator.clipboard.writeText(url + path);\r\n\r\n  return (\r\n    <form className=\"share\">\r\n      <h2>{`Share ${type.toLowerCase().capitalize()}: ${item.label}`}</h2>\r\n      <div>\r\n        <small>Share this Link with someone :)</small>\r\n        <p>{url + path}</p>\r\n        <i onClick={handleCopy} className=\"material-icons\">\r\n          content_copy\r\n        </i>\r\n      </div>\r\n      <Link to={path} onClick={closeModal}>\r\n        Open Link\r\n        <i className=\"material-icons\">open_in_new</i>\r\n      </Link>\r\n    </form>\r\n  );\r\n};\r\n","import React from \"react\";\r\n\r\nexport const Replay = ({ closeModal, onReplay }) => {\r\n  const handleReplay = () => {\r\n    onReplay();\r\n    closeModal();\r\n  };\r\n  // can add feedback textfield\r\n  // when logged in add save button\r\n  // if not logged in show login button with info text\r\n  // that you could save this if you were logged in\r\n\r\n  return (\r\n    <form className=\"viewer_modal\">\r\n      <button type=\"button\" onClick={handleReplay}>\r\n        <i className=\"material-icons\">replay</i>\r\n        Replay\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport \"./Profile.scss\";\r\nimport { logout } from \"../services/auth\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport const Profile = ({ closeModal }) => {\r\n  const { push } = useHistory();\r\n\r\n  const handleLogout = async () => {\r\n    await logout();\r\n    push(\"/auth/login\");\r\n    closeModal();\r\n  };\r\n\r\n  return (\r\n    <div className=\"centered-grid pd-2 bg-white\">\r\n      <button onClick={handleLogout}>Logout</button>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport \"./DashboardHeader.scss\";\r\n\r\nimport {\r\n  useGlobalState,\r\n  setGlobalState,\r\n  getGlobalState\r\n} from \"react-global-state-hook\";\r\nimport { MODAL } from \"../Modal\";\r\nimport ReactPlayer from \"react-player\";\r\nimport { postVideo, VIDEOS } from \"../../stores/videos\";\r\nimport { DIRECTORY_TYPES } from \"../../stores/folder\";\r\n\r\nexport const VIDEO_DETECTED = \"VIDEO_DETECTED\";\r\n\r\nexport const Header = ({ push }) => {\r\n  const [menuOpen, setMenuOpen] = useGlobalState(\"MENU_OPEN\", true);\r\n  const [url, setUrl] = useGlobalState(VIDEO_DETECTED);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"focus\", onFocus);\r\n    return () => {\r\n      window.removeEventListener(\"focus\", onFocus);\r\n    };\r\n  });\r\n\r\n  const onFocus = async () => {\r\n    const url = await navigator.clipboard.readText();\r\n    addUrl(url);\r\n  };\r\n\r\n  const handleChangeUrl = ({ target: { value } }) => {\r\n    addUrl(value);\r\n  };\r\n\r\n  const addUrl = (url) => {\r\n    const videos = getGlobalState(VIDEOS);\r\n    const add = videos.every((v) => v.url !== url);\r\n    if (ReactPlayer.canPlay(url) && add) {\r\n      setUrl(url);\r\n    }\r\n  };\r\n\r\n  const handleVideoAdd = () => {\r\n    setGlobalState(MODAL, {\r\n      component: DIRECTORY_TYPES.VIDEO,\r\n      props: {\r\n        url,\r\n        onSubmit: (values) => postVideo(values)\r\n      }\r\n    });\r\n  };\r\n\r\n  const handlePaste = async () => {\r\n    const url = await navigator.clipboard.readText();\r\n    addUrl(url);\r\n  };\r\n\r\n  const handleProfileClick = () =>\r\n    setGlobalState(MODAL, {\r\n      component: \"profile\",\r\n      onClose: () => {\r\n        push(\"/auth/login\");\r\n      }\r\n    });\r\n\r\n  const handleClearSearch = () => setUrl(\"\");\r\n\r\n  return (\r\n    <header className=\"centered-grid grid-tc-m11m bg-grey shadow-s z1\">\r\n      <div\r\n        onClick={() => setMenuOpen(!menuOpen)}\r\n        className={`header_menu ${menuOpen ? \"open\" : \"\"}`}\r\n      >\r\n        <i className=\"material-icons\">{menuOpen ? \"menu_open\" : \"menu\"}</i>\r\n      </div>\r\n      {/* <Add /> */}\r\n      <div className=\"header_add grid grid-tc-m1mm\" data-active={!!url}>\r\n        <i className=\"material-icons rounded\">ondemand_video</i>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Paste video url here:\"\r\n          value={url}\r\n          onChange={handleChangeUrl}\r\n        />\r\n        <i onClick={handleClearSearch} className=\"material-icons\">\r\n          clear\r\n        </i>\r\n        {url ? (\r\n          <button disabled={!url} onClick={handleVideoAdd}>\r\n            <i className=\"material-icons\">add</i>\r\n          </button>\r\n        ) : (\r\n          <button onClick={handlePaste}>\r\n            <i className=\"material-icons\">content_paste</i>\r\n          </button>\r\n        )}\r\n      </div>\r\n      <div className=\"header_search\">\r\n        {/* <i className=\"material-icons\">search</i> */}\r\n      </div>\r\n      <div className=\"header_profile stretched-grid\">\r\n        <div onClick={handleProfileClick}>\r\n          <i className=\"material-icons\">person</i>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nconst Add = () => {\r\n  const openNew = () => {\r\n    setGlobalState(MODAL, {\r\n      component: \"new\"\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"menu-add\">\r\n      <button onClick={openNew}>\r\n        <i className=\"material-icons\">add</i>\r\n        New\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport \"./Menu.scss\";\r\n\r\nimport { useGlobalState } from \"react-global-state-hook\";\r\nimport { DIRECTORY_TYPES, FOLDERS } from \"../../stores/folder\";\r\nimport { MenuItem } from \"./MenuItem\";\r\n\r\nexport const MENU_OPEN = \"MENU_OPEN\";\r\n\r\nexport const Menu = () => {\r\n  const [folders] = useGlobalState(FOLDERS);\r\n  const [menuOpen] = useGlobalState(MENU_OPEN, true);\r\n\r\n  return (\r\n    <div\r\n      className={`menu ${\r\n        menuOpen ? \"open\" : \"\"\r\n      } overflow-h bg-grey-light gap-s grid`}\r\n    >\r\n      <h3 className=\"aligned-grid pd-005\">Directory</h3>\r\n      <MenuItem directory={DIRECTORY_TYPES.PLAYLIST} folders={folders} />\r\n      <MenuItem directory={DIRECTORY_TYPES.VIDEO} folders={folders} />\r\n      <MenuItem directory={DIRECTORY_TYPES.SEQUENCE} folders={folders} />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useMemo } from \"react\";\r\nimport { DIRECTORY_TYPES } from \"../../stores/folder\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getGlobalState } from \"react-global-state-hook\";\r\nimport { SEQUENCES } from \"../../stores/sequences\";\r\n\r\nconst getSequenceCount = (videoId) => {\r\n  return getGlobalState(SEQUENCES).filter((s) => s.videoId === videoId).length;\r\n};\r\n\r\nexport const DirectoryItem = ({\r\n  id,\r\n  type,\r\n  label,\r\n  keywords,\r\n  items,\r\n  selected,\r\n  handleDrop,\r\n  onDragOver,\r\n  onDragStart,\r\n  handleSelect,\r\n  handleEdit,\r\n  onShare,\r\n  ...item\r\n}) => {\r\n  const handleKeywordClick = (e) => {};\r\n\r\n  const handleVideosClick = (e) => {};\r\n\r\n  const handleShare = () => onShare(DIRECTORY_TYPES[type], id);\r\n\r\n  const count = useMemo(\r\n    () => (type === DIRECTORY_TYPES.VIDEO ? getSequenceCount(id) : 0),\r\n    [type, id]\r\n  );\r\n\r\n  return (\r\n    <li\r\n      id={id}\r\n      onDrop={handleDrop}\r\n      onDragStart={onDragStart}\r\n      onDragOver={onDragOver}\r\n      draggable={true}\r\n      onClick={handleSelect}\r\n      data-selected={selected ? \"selected\" : \"\"}\r\n      className={`${DIRECTORY_TYPES[type]} directory_item grid pd-051 gap-l`}\r\n    >\r\n      <div className=\"directory_item-header aligned-grid grid-tc-m1 cgap-m\">\r\n        <h4>{label}</h4>\r\n        <ul className=\"directory_item-keywords aligned-grid cgap-s\">\r\n          {type !== DIRECTORY_TYPES.SEQUENCE && (\r\n            <>\r\n              <li>\r\n                <small>#</small>\r\n              </li>\r\n              {keywords.length === 0 ? (\r\n                <li>\r\n                  <small>No keywords</small>\r\n                </li>\r\n              ) : (\r\n                keywords.map((k, i) => (\r\n                  <li onClick={handleKeywordClick} key={i}>\r\n                    {k}\r\n                  </li>\r\n                ))\r\n              )}\r\n            </>\r\n          )}\r\n        </ul>\r\n      </div>\r\n      <div\r\n        className=\"directory_item-videos aligned-grid gap-m\"\r\n        onClick={handleVideosClick}\r\n      >\r\n        {type === DIRECTORY_TYPES.PLAYLIST ? (\r\n          <>\r\n            <i className=\"material-icons\">ondemand_video</i>\r\n            <span>\r\n              {`${items.length} ${items.length === 1 ? \"Video\" : \"Videos\"}`}\r\n            </span>\r\n          </>\r\n        ) : (\r\n          type === DIRECTORY_TYPES.VIDEO && (\r\n            <>\r\n              <i className=\"material-icons\">open_in_full</i>\r\n              <span>\r\n                {`${count} ${count === 1 ? \"Sequence\" : \"Sequences\"}`}\r\n              </span>\r\n            </>\r\n          )\r\n        )}\r\n      </div>\r\n      <div className=\"directory_item-footer aligned-grid gap-l\">\r\n        <i onClick={handleShare} className=\"material-icons\">\r\n          share\r\n        </i>\r\n        {type === DIRECTORY_TYPES.VIDEO ? (\r\n          <Link to={`/sequencer/${id}`}>\r\n            <i className=\"material-icons\">open_in_new</i>\r\n          </Link>\r\n        ) : (\r\n          type === DIRECTORY_TYPES.SEQUENCE && (\r\n            <Link to={`/sequencer/${item.videoId}?sequenceId=${id}`}>\r\n              <i className=\"material-icons\">open_in_new</i>\r\n            </Link>\r\n          )\r\n        )}\r\n        {type !== DIRECTORY_TYPES.SEQUENCE && (\r\n          <i onClick={handleEdit} className=\"material-icons\">\r\n            more_vert\r\n          </i>\r\n        )}\r\n        <i className=\"material-icons\">\r\n          {selected ? \"check_box\" : \"check_box_outline_blank\"}\r\n        </i>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n","import React, { useState, useMemo } from \"react\";\r\nimport \"./Directory.scss\";\r\nimport { Path } from \"./Path\";\r\nimport { useGlobalState, setGlobalState } from \"react-global-state-hook\";\r\nimport { VIDEOS } from \"../../stores/videos\";\r\nimport {\r\n  SELECTED_DIRECTORY,\r\n  SELECTED_FOLDER,\r\n  DIRECTORY_TYPES\r\n} from \"../../stores/folder\";\r\nimport { PLAYLISTS, patchPlaylist } from \"../../stores/playlists\";\r\nimport { MODAL } from \"../Modal\";\r\nimport { SEQUENCES } from \"../../stores/sequences\";\r\nimport { DirectoryItem } from \"./DirectoryItem\";\r\n\r\nconst onDragOver = (e) => {\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n};\r\n\r\nexport const handleShare = (type, id) => {\r\n  setGlobalState(MODAL, {\r\n    component: \"share\",\r\n    props: { type, id }\r\n  });\r\n};\r\n\r\nexport const Directory = () => {\r\n  const [videos] = useGlobalState(VIDEOS);\r\n  const [playlists] = useGlobalState(PLAYLISTS);\r\n  const [sequences] = useGlobalState(SEQUENCES);\r\n\r\n  const [selectedDirectory] = useGlobalState(SELECTED_DIRECTORY);\r\n  const [selectedFolder] = useGlobalState(SELECTED_FOLDER);\r\n\r\n  const [selectedPlaylists, setSelectedPlaylists]: any = useState([]);\r\n  const [selectedVideos, setSelectedVideos]: any = useState([]);\r\n  const [selectedSequences, setSelectedSequences]: any = useState([]);\r\n\r\n  const [labelSort, setLabelSort] = useState({\r\n    SEQUENCE: null,\r\n    VIDEO: null,\r\n    PLAYLIST: null\r\n  });\r\n\r\n  const items = useMemo(() => {\r\n    if (selectedDirectory === DIRECTORY_TYPES.VIDEO) {\r\n      return videos.filter((v) =>\r\n        !selectedFolder ? !v.folder : v.folder === selectedFolder\r\n      );\r\n    } else if (selectedDirectory === DIRECTORY_TYPES.SEQUENCE) {\r\n      return sequences.filter((s) =>\r\n        !selectedFolder ? !s.folder : s.folder === selectedFolder\r\n      );\r\n    } else {\r\n      return playlists.filter((p) =>\r\n        !selectedFolder ? !p.folder : p.folder === selectedFolder\r\n      );\r\n    }\r\n  }, [selectedDirectory, videos, playlists, selectedFolder, sequences]);\r\n\r\n  const onDragStart = (e) => {\r\n    const type = DIRECTORY_TYPES[e.target.closest(\"li\").classList[0]];\r\n    const itemId = e.target.closest(\"li\").id;\r\n    const ids =\r\n      type === DIRECTORY_TYPES.VIDEO\r\n        ? [...selectedVideos, itemId]\r\n        : type === DIRECTORY_TYPES.PLAYLIST\r\n        ? [...selectedPlaylists, itemId]\r\n        : [...selectedSequences, itemId];\r\n\r\n    e.dataTransfer.setData(\"text/plain\", JSON.stringify({ ids, type }));\r\n    // Now this will break every drop event\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    const id = e.target.closest(\"li\").id;\r\n    const { ids, type } = JSON.parse(e.dataTransfer.getData(\"text/plain\"));\r\n    if (type === \"list\") {\r\n      const playlist = playlists.find((p) => p.id === id);\r\n      const urls = videos.filter((v) => ids.includes(v.id)).map((v) => v.url);\r\n      // @ts-ignore\r\n      const newUrls = [...new Set([...playlist.urls, ...urls])];\r\n      patchPlaylist({ ...playlist, urls: newUrls });\r\n    }\r\n  };\r\n\r\n  const handleSelect = (e) => {\r\n    const id = e.target.closest(\"li\").id;\r\n    if (selectedDirectory === DIRECTORY_TYPES.VIDEO) {\r\n      if (selectedVideos.includes(id)) {\r\n        setSelectedVideos(selectedVideos.filter((v) => v !== id));\r\n      } else {\r\n        setSelectedVideos([...selectedVideos, id]);\r\n      }\r\n    } else if (selectedDirectory === DIRECTORY_TYPES.PLAYLIST) {\r\n      if (selectedPlaylists.includes(id)) {\r\n        setSelectedPlaylists(selectedPlaylists.filter((p) => p !== id));\r\n      } else {\r\n        setSelectedPlaylists([...selectedPlaylists, id]);\r\n      }\r\n    } else if (selectedDirectory === DIRECTORY_TYPES.SEQUENCE) {\r\n      if (selectedSequences.includes(id)) {\r\n        setSelectedSequences(selectedSequences.filter((s) => s !== id));\r\n      } else {\r\n        setSelectedSequences([...selectedSequences, id]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEdit = (e) => {\r\n    const id = e.target.closest(\"li\").id;\r\n    if (selectedDirectory === DIRECTORY_TYPES.VIDEO) {\r\n      const video = videos.find((f) => f.id === id);\r\n      setGlobalState(MODAL, {\r\n        component: \"video\",\r\n        props: video\r\n      });\r\n    } else if (selectedDirectory === DIRECTORY_TYPES.PLAYLIST) {\r\n      const playlist = playlists.find((p) => p.id === id);\r\n      setGlobalState(MODAL, {\r\n        component: \"playlist\",\r\n        props: playlist\r\n      });\r\n    } else if (selectedDirectory === DIRECTORY_TYPES.SEQUENCE) {\r\n      alert(\r\n        \"Sequences cant be edited. Open the corresponding video or project in the sequencer and edit sequence there\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleAdd = () => {\r\n    setGlobalState(MODAL, {\r\n      component: \"folder\",\r\n      props: {\r\n        directory: selectedDirectory,\r\n        folder: selectedFolder\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleSort = () => {\r\n    const sort = labelSort[selectedDirectory];\r\n    const to = !sort ? \"asc\" : sort === \"asc\" ? \"desc\" : null;\r\n    setLabelSort({\r\n      ...labelSort,\r\n      [selectedDirectory]: to\r\n    });\r\n  };\r\n\r\n  const sortedItems = useMemo(() => {\r\n    const copy = [...items];\r\n    const sort = labelSort[selectedDirectory];\r\n    if (!sort) {\r\n      return copy;\r\n    } else if (sort === \"asc\") {\r\n      return copy.sort((a, b) => {\r\n        var nameA = a.label.toUpperCase(); // ignore upper and lowercase\r\n        var nameB = b.label.toUpperCase(); // ignore upper and lowercase\r\n        if (nameA < nameB) {\r\n          return -1;\r\n        }\r\n        if (nameA > nameB) {\r\n          return 1;\r\n        }\r\n\r\n        // names must be equal\r\n        return 0;\r\n      });\r\n    } else {\r\n      return copy.sort((a, b) => {\r\n        var nameA = a.label.toUpperCase(); // ignore upper and lowercase\r\n        var nameB = b.label.toUpperCase(); // ignore upper and lowercase\r\n        if (nameA > nameB) {\r\n          return -1;\r\n        }\r\n        if (nameA < nameB) {\r\n          return 1;\r\n        }\r\n\r\n        // names must be equal\r\n        return 0;\r\n      });\r\n    }\r\n  }, [labelSort, items, selectedDirectory]);\r\n\r\n  const handleSelectAll = () => {\r\n    const [targetSelection, setSelection] =\r\n      selectedDirectory === DIRECTORY_TYPES.PLAYLIST\r\n        ? [selectedPlaylists, setSelectedPlaylists]\r\n        : selectedDirectory === DIRECTORY_TYPES.VIDEO\r\n        ? [selectedVideos, setSelectedVideos]\r\n        : [selectedSequences, setSelectedSequences];\r\n    console.log({ targetSelection, setSelection });\r\n\r\n    const localSelection = targetSelection.filter((id) =>\r\n      items.find((i) => i.id === id)\r\n    );\r\n    if (localSelection.length !== items.length) {\r\n      setSelection(\r\n        Array.from(new Set([...targetSelection, ...items.map((i) => i.id)]))\r\n      );\r\n    } else {\r\n      setSelection(\r\n        targetSelection.filter((id) => !localSelection.includes(id))\r\n      );\r\n    }\r\n  };\r\n\r\n  const allSelected = useMemo(() => {\r\n    if (items.length === 0) {\r\n      return false;\r\n    }\r\n    const targetSelection =\r\n      selectedDirectory === DIRECTORY_TYPES.PLAYLIST\r\n        ? selectedPlaylists\r\n        : selectedDirectory === DIRECTORY_TYPES.VIDEO\r\n        ? selectedVideos\r\n        : selectedSequences;\r\n\r\n    const localSelection = targetSelection.filter((id) =>\r\n      items.find((i) => i.id === id)\r\n    );\r\n    return localSelection.length === items.length;\r\n  }, [\r\n    items,\r\n    selectedDirectory,\r\n    selectedPlaylists,\r\n    selectedVideos,\r\n    selectedSequences\r\n  ]);\r\n\r\n  return (\r\n    <div className=\"directory grid gap-s overflow-a grid-tr-mm1 bg-grey-light\">\r\n      <Path />\r\n      <div className=\"directory_header aligned-grid grid-tc-m1m gap-m bg-grey-light\">\r\n        <button className=\"aligned-grid pd-01\" onClick={handleAdd}>\r\n          <i className=\"material-icons\">add</i>\r\n          Folder\r\n        </button>\r\n        <div className=\"grid gap-m\">\r\n          <label>Sort by:</label>\r\n          <span className=\"grid gap-s\" onClick={handleSort}>\r\n            Label\r\n            <i className=\"material-icons\">\r\n              {!labelSort[selectedDirectory]\r\n                ? \"unfold_more\"\r\n                : labelSort[selectedDirectory] === \"desc\"\r\n                ? \"expand_less\"\r\n                : \"expand_more\"}\r\n            </i>\r\n          </span>\r\n        </div>\r\n        <div className=\"grid gap-m\">\r\n          <label>Select all:</label>\r\n          <i className=\"material-icons\" onClick={handleSelectAll}>\r\n            {allSelected ? \"check_box\" : \"check_box_outline_blank\"}\r\n          </i>\r\n        </div>\r\n      </div>\r\n      <ul className=\"directory_items grid gap-xs\">\r\n        {sortedItems.map((item, index) => {\r\n          const selected = (selectedDirectory === DIRECTORY_TYPES.PLAYLIST\r\n            ? selectedPlaylists\r\n            : selectedDirectory === DIRECTORY_TYPES.VIDEO\r\n            ? selectedVideos\r\n            : selectedSequences\r\n          ).includes(item.id);\r\n\r\n          return (\r\n            <DirectoryItem\r\n              key={item.id}\r\n              {...item}\r\n              type={selectedDirectory}\r\n              handleSelect={handleSelect}\r\n              handleEdit={handleEdit}\r\n              selected={selected}\r\n              onDragOver={onDragOver}\r\n              onDragStart={onDragStart}\r\n              handleDrop={handleDrop}\r\n              onShare={handleShare}\r\n            />\r\n          );\r\n        })}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n","import { getGlobalState, setGlobalState } from \"react-global-state-hook\";\r\n\r\nexport const PLAYLIST_ITEMS = \"PLAYLIST_ITEMS\";\r\n\r\nsetGlobalState(PLAYLIST_ITEMS, []);\r\n\r\nexport const addItem = (item) => {\r\n  const items = getGlobalState(PLAYLIST_ITEMS);\r\n  setGlobalState(PLAYLIST_ITEMS, [...items, item]);\r\n};\r\n\r\nexport const removeItems = (itemIds) => {\r\n  const items = getGlobalState(PLAYLIST_ITEMS);\r\n  setGlobalState(\r\n    PLAYLIST_ITEMS,\r\n    items.filter(({ id }) => !itemIds.includes(id))\r\n  );\r\n};\r\n","import React, { useState, useEffect, useMemo, useRef } from \"react\";\r\nimport \"./Player.scss\";\r\nimport {\r\n  useGlobalState,\r\n  setGlobalState,\r\n  getGlobalState\r\n} from \"react-global-state-hook\";\r\nimport ReactPlayer from \"react-player\";\r\nimport { PLAYLIST_ITEMS } from \"../../stores/playlist_items\";\r\nimport { DIRECTORY_TYPES } from \"../../stores/folder\";\r\n\r\nexport const PLAYER = \"PLAYER\";\r\nexport const PLAYER_POSITION = \"PLAYER_POSITION\";\r\nexport const PLAYER_PLAYING = \"PLAYER_PLAYING\";\r\nexport const PLAYER_POSITION_CLICK_COUNT = \"PLAYER_POSITION_CLICK_COUNT\";\r\nexport const PLAYER_ITEM = \"PLAYER_ITEM\";\r\n\r\nsetGlobalState(PLAYER_PLAYING, false);\r\n\r\nconst onPlayerEnd = (id) => {\r\n  const event = new CustomEvent(\"playerdone\", {\r\n    detail: {\r\n      id\r\n    }\r\n  });\r\n  document.dispatchEvent(event);\r\n};\r\n\r\nexport const togglePlay = () => {\r\n  const playing = getGlobalState(PLAYER_PLAYING);\r\n  setGlobalState(PLAYER_PLAYING, !playing);\r\n};\r\n\r\n// when clicked on a video, the player needs to change urls if neccessary\r\n// if correct url is used, player.seekTo(0)\r\n\r\n// when a sequence is clicked, the player need to change urls if neccessary\r\n// if correct url is used, player.seekTo(start)\r\nlet PLAYER_COUNT = 0;\r\n\r\nexport const openPlayer = (e) => {\r\n  PLAYER_COUNT++;\r\n  const items = getGlobalState(PLAYLIST_ITEMS);\r\n  console.log(typeof e);\r\n\r\n  const item = items.find(\r\n    (i) => i.id === (typeof e == \"string\" ? e : e.target.closest(\"li\").id)\r\n  );\r\n  setGlobalState(PLAYER_ITEM, { ...item, count: PLAYER_COUNT });\r\n};\r\n\r\nexport const Player = () => {\r\n  const [item, setItem] = useGlobalState(PLAYER_ITEM);\r\n\r\n  const [playing, setPlaying] = useGlobalState(PLAYER_PLAYING);\r\n  const [playerReady, setPlayerReady] = useState(false);\r\n\r\n  const [maximized, setMaximized] = useState(false);\r\n\r\n  const player = useRef();\r\n  const ref = (p) => (player.current = p);\r\n\r\n  const handleReady = () => setPlayerReady(true);\r\n\r\n  const lastUrl = useRef();\r\n  const url = useMemo(() => (item ? item.url : \"\"), [item]);\r\n\r\n  useEffect(() => {\r\n    if (playerReady) {\r\n      startPlayer();\r\n    }\r\n  }, [playerReady]);\r\n\r\n  useEffect(() => {\r\n    if (playerReady && item && lastUrl.current === item.url) {\r\n      startPlayer();\r\n    }\r\n    return () => (lastUrl.current = item ? item.url : \"\");\r\n  }, [item, playerReady]);\r\n\r\n  const startPlayer = () => {\r\n    //\r\n    const Player: ReactPlayer | any = player.current;\r\n    if (Player) {\r\n      if (item.type === DIRECTORY_TYPES.VIDEO) {\r\n        Player.seekTo(0);\r\n      } else if (item.type === DIRECTORY_TYPES.SEQUENCE) {\r\n        Player.seekTo(item.start, \"seconds\");\r\n      }\r\n      setPlaying(true);\r\n    } else {\r\n      console.log(\"PLAYER NOT READY ON START PLAYER\");\r\n    }\r\n  };\r\n\r\n  const stopPlayer = () => {\r\n    player.current = undefined;\r\n    setPlayerReady(false);\r\n    setPlaying(false);\r\n    setItem();\r\n  };\r\n\r\n  const handleProgress = ({ playedSeconds }) => {\r\n    if (item.stop && playedSeconds >= item.stop) {\r\n      setPlaying(false);\r\n      onPlayerEnd(item.id);\r\n    }\r\n  };\r\n\r\n  const handleResize = () => {\r\n    setMaximized(!maximized);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`video-preview bg-white overflow-h shadow-l ${\r\n        maximized ? \"\" : \"minimized\"\r\n      } ${url ? \"open\" : \"\"}`}\r\n    >\r\n      {url && (\r\n        <>\r\n          <div className=\"video-preview__header aligned-grid pd-05 grid-tc-1mm z1\">\r\n            <h4>{item ? item.label : \"Loading Player\"}</h4>\r\n            <i onClick={handleResize} className=\"material-icons\">\r\n              {maximized ? \"minimize\" : \"maximize\"}\r\n            </i>\r\n            <i onClick={stopPlayer} className=\"material-icons\">\r\n              close\r\n            </i>\r\n          </div>\r\n          <ReactPlayer\r\n            className={\"player\"}\r\n            height=\"calc(100% - 45px)\"\r\n            width=\"auto\"\r\n            pip={true}\r\n            playing={playing}\r\n            ref={ref}\r\n            url={url}\r\n            onReady={handleReady}\r\n            onProgress={handleProgress}\r\n            controls={true}\r\n          />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useGlobalState } from \"react-global-state-hook\";\r\nimport { PLAYER_PLAYING, PLAYER_ITEM } from \"./Player\";\r\n\r\nexport const ListActions = ({ items }) => {\r\n  const [playing, setPlaying] = useGlobalState(PLAYER_PLAYING);\r\n  const [item, setItem] = useGlobalState(PLAYER_ITEM);\r\n\r\n  const handlePlay = () => {\r\n    if (!item) {\r\n      setItem(items[0]);\r\n    } else {\r\n      setPlaying(!playing);\r\n    }\r\n  };\r\n\r\n  const move = (up) => {\r\n    if (item && items.length !== 1) {\r\n      const currentIndex = items.findIndex((i) => i.id === item.id);\r\n      let nextItem;\r\n      if (up && currentIndex !== 0) {\r\n        nextItem = items.find((_, i) => i === currentIndex - 1);\r\n      } else if (currentIndex !== items.length - 1) {\r\n        nextItem = items.find((_, i) => i === currentIndex + 1);\r\n      }\r\n      setItem(nextItem);\r\n    } else {\r\n      console.log(\"ONLY ONE ITEM PRESENT OR PLAYER IS NOT ACTIVE\");\r\n    }\r\n  };\r\n\r\n  const handleUp = () => move(true);\r\n\r\n  const handleDown = () => move(false);\r\n\r\n  return (\r\n    <div className=\"playlist_controls-actions stretched-grid bg-grey\">\r\n      <button onClick={handlePlay}>\r\n        {/* show loading when player isnt ready yet, otherwise first play press might fail */}\r\n        <i className=\"material-icons\">{playing ? \"pause\" : \"play_arrow\"}</i>\r\n      </button>\r\n      <button onClick={handleUp}>\r\n        <i className=\"material-icons\">keyboard_arrow_up</i>\r\n      </button>\r\n      <button onClick={handleDown}>\r\n        <i className=\"material-icons\">keyboard_arrow_down</i>\r\n      </button>\r\n      <button>\r\n        <i className=\"material-icons\">share</i>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { setGlobalState } from \"react-global-state-hook\";\r\nimport { MODAL } from \"../Modal\";\r\nimport { DIRECTORY_TYPES } from \"../../stores/folder\";\r\nimport { patchPlaylist } from \"../../stores/playlists\";\r\n\r\nconst handleAdd = () => {};\r\n\r\nexport const ListSelection = ({\r\n  activePlaylist,\r\n  playlist,\r\n  items,\r\n  setItems,\r\n  selectedItems\r\n}) => {\r\n  const handleSave = () => {\r\n    const selection = items\r\n      .filter((i) => selectedItems.includes(i.id))\r\n      .map((i) => `${i.type}:${i.id}`);\r\n\r\n    setGlobalState(MODAL, {\r\n      component: DIRECTORY_TYPES.PLAYLIST,\r\n      props: {\r\n        items: selection\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    const updatedItems = items\r\n      .filter((i) => !selectedItems.includes(i.id))\r\n      .map((i) => `${i.type}:${i.id}`);\r\n\r\n    patchPlaylist({ ...playlist, items: updatedItems });\r\n  };\r\n\r\n  const handleRemove = () =>\r\n    setItems(items.filter((i) => !selectedItems.includes(i.id)));\r\n\r\n  return (\r\n    <div className=\"playlist_controls-selection overflow-h stretched-grid bg-grey\">\r\n      <button>\r\n        {activePlaylist ? (\r\n          <i onClick={handleDelete} className=\"material-icons\">\r\n            delete\r\n          </i>\r\n        ) : (\r\n          <i onClick={handleRemove} className=\"material-icons\">\r\n            clear\r\n          </i>\r\n        )}\r\n      </button>\r\n      <button onClick={handleSave}>\r\n        <i className=\"material-icons\">playlist_add_check</i>\r\n      </button>\r\n      <button onClick={handleAdd}>\r\n        <i className=\"material-icons\">playlist_add</i>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport { useGlobalState, getGlobalState } from \"react-global-state-hook\";\r\nimport { PLAYER_POSITION, openPlayer } from \"./Player\";\r\nimport { DIRECTORY_TYPES } from \"../../stores/folder\";\r\nimport { PLAYLIST_ITEMS } from \"../../stores/playlist_items\";\r\n\r\nconst onDragOver = (e) => {\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n};\r\n\r\nconst handlePlayerDone = ({ detail: { id } }: any) => {\r\n  const items = getGlobalState(PLAYLIST_ITEMS);\r\n  const itemIndex = items.findIndex((i) => i.id === id);\r\n  // when item is the last in List, do nothing\r\n  // if not get the next id and openPlayer(id);\r\n\r\n  if (itemIndex < items.length - 1) {\r\n    const nextItem = items.find((i, index) => index === itemIndex + 1);\r\n    openPlayer(nextItem.id);\r\n  }\r\n};\r\n\r\nexport const ListList = ({\r\n  items,\r\n  filteredItems,\r\n  selectedItems,\r\n  setSelectedItems\r\n}) => {\r\n  const [position] = useGlobalState(PLAYER_POSITION);\r\n\r\n  const handleSelect = (e) => {\r\n    e.stopPropagation();\r\n    const id = e.target.closest(\"li\").id;\r\n    if (selectedItems.includes(id)) {\r\n      setSelectedItems(selectedItems.filter((i) => i !== id));\r\n    } else {\r\n      setSelectedItems([...selectedItems, id]);\r\n    }\r\n  };\r\n\r\n  const onDragStart = (e) => {\r\n    const id = e.target.closest(\"li\").id;\r\n    e.dataTransfer.setData(\r\n      \"text/plain\",\r\n      JSON.stringify({ items: [...selectedItems, id], type: \"list\" })\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"playerdone\", handlePlayerDone);\r\n    return () => document.removeEventListener(\"playerdone\", handlePlayerDone);\r\n  }, []);\r\n\r\n  return (\r\n    <ul className=\"bg-white overflow-a\">\r\n      {items.length === 0 ? (\r\n        <li className=\"no-items centered-grid pd-2\">\r\n          Nothing in selection. Drag video or playlist into here or open an\r\n          existing playlist.\r\n        </li>\r\n      ) : (\r\n        filteredItems.map(({ id, label, url, type, start, stop }, i) => {\r\n          const selected = selectedItems.includes(id);\r\n          return (\r\n            <li\r\n              onClick={openPlayer}\r\n              draggable={true}\r\n              onDragStart={onDragStart}\r\n              onDragOver={onDragOver}\r\n              className={`${\r\n                DIRECTORY_TYPES[type]\r\n              } grid grid-tc-m1m  pd-05 gap-m ${\r\n                i === position ? \"active\" : \"\"\r\n              }`}\r\n              id={id}\r\n              key={i}\r\n            >\r\n              <i onClick={handleSelect} className=\"material-icons\">\r\n                {/* here i need logic to display request states for saving, patching and deleting */}\r\n                {selected ? \"check_box\" : \"check_box_outline_blank\"}\r\n              </i>\r\n              <label>{label}</label>\r\n              {/* <i className=\"material-icons\">edit</i> */}\r\n            </li>\r\n          );\r\n        })\r\n      )}\r\n    </ul>\r\n  );\r\n};\r\n","import React, { useState, useEffect, useMemo, useCallback } from \"react\";\r\nimport \"./List.scss\";\r\nimport { useGlobalState, setGlobalState } from \"react-global-state-hook\";\r\nimport { PLAYLIST_ITEMS } from \"../../stores/playlist_items\";\r\nimport {\r\n  PLAYLIST_OPEN,\r\n  ACTIVE_PLAYLIST,\r\n  PLAYLISTS,\r\n  patchPlaylist\r\n} from \"../../stores/playlists\";\r\nimport { VIDEOS } from \"../../stores/videos\";\r\nimport { Player, PLAYER_ITEM } from \"./Player\";\r\nimport { ListActions } from \"./ListActions\";\r\nimport { ListSelection } from \"./ListSelection\";\r\nimport { ListList } from \"./ListList\";\r\nimport { DIRECTORY_TYPES } from \"../../stores/folder\";\r\nimport { SEQUENCES } from \"../../stores/sequences\";\r\n\r\nexport const SELECTED_LIST_ITEMS = \"SELECTED_LIST_ITEMS\";\r\n\r\nexport const Playlist = () => {\r\n  const [open] = useGlobalState(PLAYLIST_OPEN);\r\n  const [items, setItems] = useGlobalState(PLAYLIST_ITEMS);\r\n  const [videos] = useGlobalState(VIDEOS);\r\n  const [sequences] = useGlobalState(SEQUENCES);\r\n  const [playlists] = useGlobalState(PLAYLISTS);\r\n  const [selectedItems, setSelectedItems] = useGlobalState(\r\n    SELECTED_LIST_ITEMS,\r\n    []\r\n  );\r\n  const [activePlaylist, setActivePlaylist] = useGlobalState(ACTIVE_PLAYLIST);\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  const playlist = useMemo(() => {\r\n    return playlists.find((p) => p.id === activePlaylist);\r\n  }, [activePlaylist, playlists]);\r\n\r\n  useEffect(() => {\r\n    // In case a playlist is set\r\n    // Load all videos and sequences from that playlist into the list\r\n    if (playlist) {\r\n      const pItems = playlist.items.map((i) => {\r\n        const [type, id] = i.split(\":\");\r\n        const item = (type === DIRECTORY_TYPES.VIDEO ? videos : sequences).find(\r\n          (i) => i.id === id\r\n        );\r\n        return { type, ...item };\r\n      });\r\n      setItems(pItems);\r\n      setSelectedItems([]);\r\n    }\r\n  }, [playlist, sequences, videos, setItems, setSelectedItems]);\r\n\r\n  const filteredItems = useMemo(() => {\r\n    return items.filter(\r\n      (i) =>\r\n        i.type !== DIRECTORY_TYPES.PLAYLIST &&\r\n        i.label.toLowerCase().includes(search.toLowerCase())\r\n    );\r\n  }, [items, search]);\r\n\r\n  const addSequences = useCallback(\r\n    (ids) => {\r\n      const newSeqs = sequences\r\n        .filter((s) => ids.includes(s.id))\r\n        .filter((s) => !items.find((i) => i.id === s.id));\r\n      if (newSeqs.length === 0) {\r\n        alert(\"Sequences already exist in playlist\");\r\n      } else if (activePlaylist) {\r\n        patchPlaylist({\r\n          ...playlist,\r\n          items: [...items, ...newSeqs].map((i) => `${i.type}:${i.id}`)\r\n        });\r\n      } else {\r\n        setItems([\r\n          ...items,\r\n          ...newSeqs.map((s) => ({ type: DIRECTORY_TYPES.SEQUENCE, ...s }))\r\n        ]);\r\n        setSelectedItems([...selectedItems, ...newSeqs.map((s) => s.id)]);\r\n      }\r\n    },\r\n    [\r\n      sequences,\r\n      items,\r\n      activePlaylist,\r\n      playlist,\r\n      selectedItems,\r\n      setSelectedItems\r\n    ]\r\n  );\r\n\r\n  const addVideos = useCallback(\r\n    (ids) => {\r\n      const newVids = videos\r\n        .filter((v) => ids.includes(v.id))\r\n        .filter((v) => !items.find((i) => i.id === v.id));\r\n      if (newVids.length === 0) {\r\n        alert(\"Videos already in list\");\r\n      } else if (activePlaylist) {\r\n        // here the format \"type:id\" needs to be sent to backend\r\n        patchPlaylist({\r\n          ...playlist,\r\n          items: [...items, ...newVids].map((i) => `${i.type}:${i.id}`)\r\n        });\r\n      } else {\r\n        // here we keep the given format\r\n        // onle when sent to backend convert to item: [\"type:id\"]\r\n        setItems([\r\n          ...items,\r\n          ...newVids.map((v) => ({ type: DIRECTORY_TYPES.VIDEO, ...v }))\r\n        ]);\r\n        setSelectedItems([...selectedItems, ...newVids.map((v) => v.id)]);\r\n      }\r\n    },\r\n    [videos, items, activePlaylist, playlist, selectedItems, setSelectedItems]\r\n  );\r\n\r\n  const addPlaylists = useCallback(\r\n    (ids) => {\r\n      const listItems = playlists\r\n        .filter((p) => ids.includes(p.id))\r\n        .reduce(\r\n          (prev, curr) => Array.from(new Set([...prev, ...curr.items])),\r\n          []\r\n        );\r\n\r\n      const newItems = listItems\r\n        .filter((i) => {\r\n          const [type, id] = i.split(\":\");\r\n          return !items.find((v) => v.type === type && v.id === id);\r\n        })\r\n        .map((i) => {\r\n          const [type, id] = i.split(\":\");\r\n          return (type === DIRECTORY_TYPES.VIDEO ? videos : sequences).find(\r\n            (i) => i.id === id\r\n          );\r\n        });\r\n\r\n      const itemsToAdd = Array.from(new Set([...items, ...newItems]));\r\n\r\n      if (activePlaylist && (ids.length > 1 || ids[0] !== activePlaylist)) {\r\n        setActivePlaylist();\r\n        setSelectedItems(itemsToAdd.map((i) => i.id));\r\n      }\r\n      setItems(itemsToAdd);\r\n    },\r\n    [\r\n      playlists,\r\n      items,\r\n      setItems,\r\n      activePlaylist,\r\n      setActivePlaylist,\r\n      playlist,\r\n      selectedItems,\r\n      setSelectedItems\r\n    ]\r\n  );\r\n\r\n  const addVideoToPlaylist = useCallback(\r\n    (ids) => {\r\n      const videoIds = items\r\n        .filter((i) => i.type === DIRECTORY_TYPES.VIDEO)\r\n        .map((i) => i.id);\r\n\r\n      const newVideos = videos\r\n        .filter((v) => ids.includes(v.id) && !videoIds.includes(v.id))\r\n        .map((v) => `VIDEO:${v.id}`);\r\n\r\n      if (newVideos.length === 0) {\r\n        alert(\"All Videos already exist in Playlist\");\r\n      } else {\r\n        patchPlaylist({\r\n          ...playlist,\r\n          items: [...playlist.items, ...newVideos]\r\n        });\r\n      }\r\n    },\r\n    [items, videos, playlist]\r\n  );\r\n\r\n  const addSequenceToPlaylist = useCallback(\r\n    (ids) => {\r\n      const sequenceIds = items\r\n        .filter((i) => i.type === DIRECTORY_TYPES.SEQUENCE)\r\n        .map((i) => i.id);\r\n\r\n      const newSequences = sequences\r\n        .filter((s) => ids.includes(s.id) && !sequenceIds.includes(s.id))\r\n        .map((s) => `SEQUENCE:${s.id}`);\r\n\r\n      if (newSequences.length === 0) {\r\n        alert(\"All sequences already exist in playlist\");\r\n      } else {\r\n        patchPlaylist({\r\n          ...playlist,\r\n          items: [...playlist.items, ...newSequences]\r\n        });\r\n      }\r\n    },\r\n    [items, sequences, playlist]\r\n  );\r\n\r\n  const addPlaylistsToPlaylist = useCallback(\r\n    (ids) => {\r\n      const draggedPlaylists = playlists.filter((p) => ids.includes(p.id));\r\n      const draggedItemIds = draggedPlaylists.reduce((prev, curr) => {\r\n        return Array.from(new Set([...prev, ...curr.items]));\r\n      }, []);\r\n      const newDraggedItemIds = Array.from(\r\n        new Set([...playlist.items, ...draggedItemIds])\r\n      );\r\n      if (newDraggedItemIds.length > playlist.items.length) {\r\n        patchPlaylist({\r\n          ...playlist,\r\n          items: newDraggedItemIds\r\n        });\r\n      } else {\r\n        console.log(\"No New Items to add\");\r\n      }\r\n    },\r\n    [playlists, playlist]\r\n  );\r\n\r\n  const handleDrop = useCallback(\r\n    (e) => {\r\n      const { ids, type } = JSON.parse(e.dataTransfer.getData(\"text/plain\"));\r\n      if (playlist) {\r\n        if (type === DIRECTORY_TYPES.VIDEO) {\r\n          addVideoToPlaylist(ids);\r\n        } else if (type === DIRECTORY_TYPES.SEQUENCE) {\r\n          addSequenceToPlaylist(ids);\r\n        } else if (type === DIRECTORY_TYPES.PLAYLIST) {\r\n          addPlaylistsToPlaylist(ids);\r\n        }\r\n      } else {\r\n        if (type === DIRECTORY_TYPES.VIDEO) {\r\n          addVideos(ids);\r\n        } else if (type === DIRECTORY_TYPES.SEQUENCE) {\r\n          addSequences(ids);\r\n        } else if (type === DIRECTORY_TYPES.PLAYLIST) {\r\n          if (ids.length === 1 && items.length === 0) {\r\n            setActivePlaylist(ids[0]);\r\n          } else {\r\n            addPlaylists(ids);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    [\r\n      addVideoToPlaylist,\r\n      addSequenceToPlaylist,\r\n      addPlaylistsToPlaylist,\r\n      addVideos,\r\n      addSequences,\r\n      setActivePlaylist,\r\n      addPlaylists\r\n    ]\r\n  );\r\n\r\n  const handleClose = useCallback(() => {\r\n    setActivePlaylist();\r\n    setGlobalState(PLAYER_ITEM, undefined);\r\n    setItems([]);\r\n  }, [setActivePlaylist, setItems]);\r\n\r\n  return (\r\n    <div\r\n      onDrop={handleDrop}\r\n      onDragOver={(e) => e.preventDefault()}\r\n      className={`playlist ${open ? \"open\" : \"\"} grid grid-tr-1m`}\r\n    >\r\n      <div className=\"playlist_header stretched-grid overflow-h grid-tr-m1\">\r\n        <div className=\"stretched-grid bg-white\">\r\n          <h4 className=\"aligned-grid grid-tc-m1m gap-m pd-05\">\r\n            <i className=\"material-icons\">queue_music</i>\r\n            {!playlist ? \"No Playlist active\" : playlist.label}\r\n            {items.length !== 0 && (\r\n              <i onClick={handleClose} className=\"material-icons\">\r\n                close\r\n              </i>\r\n            )}\r\n          </h4>\r\n          {items.length !== 0 && (\r\n            <div className=\"stretched-grid\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search Playlist...\"\r\n                value={search}\r\n                onChange={({ target: { value } }) => setSearch(value)}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n        <ListList\r\n          items={items}\r\n          selectedItems={selectedItems}\r\n          filteredItems={filteredItems}\r\n          setSelectedItems={setSelectedItems}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"playlist_controls grid gap-xs z1\">\r\n        {items.length !== 0 && (\r\n          <>\r\n            {selectedItems.length !== 0 && (\r\n              <ListSelection\r\n                activePlaylist={activePlaylist}\r\n                items={items}\r\n                setItems={setItems}\r\n                selectedItems={selectedItems}\r\n                playlist={playlist}\r\n              />\r\n            )}\r\n            <ListActions items={items} />\r\n          </>\r\n        )}\r\n      </div>\r\n      <Player />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport \"./Dashboard.scss\";\r\n\r\nimport { Header } from \"../components/Dashboard/DashboardHeader\";\r\nimport { Menu } from \"../components/Dashboard/Menu\";\r\nimport { Directory } from \"../components/Dashboard/Directory\";\r\nimport { Playlist } from \"../components/Dashboard/List\";\r\nimport { getFolders } from \"../stores/folder\";\r\nimport { getVideos } from \"../stores/videos\";\r\nimport { getPlaylists } from \"../stores/playlists\";\r\nimport { Hint } from \"../components/Hint\";\r\nimport { getSequences } from \"../stores/sequences\";\r\nimport { setGlobalState, useGlobalState } from \"react-global-state-hook\";\r\n\r\nexport const INITIALIZED = \"INITIALIZED\";\r\n\r\nconst getUserData = async () => {\r\n  await Promise.all([\r\n    getFolders(),\r\n    getVideos(),\r\n    getPlaylists(),\r\n    getSequences()\r\n  ]);\r\n  setGlobalState(INITIALIZED, true);\r\n};\r\n\r\nexport const Dashboard = ({ history: { push } }) => {\r\n  const [initialized] = useGlobalState(INITIALIZED, false);\r\n\r\n  useEffect(() => {\r\n    getUserData();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"dashboard grid grid-tr-m1 grid-tc-m1m bg-grey-light gap-s overflow-h\">\r\n      {initialized ? (\r\n        <>\r\n          <Header push={push} />\r\n          <Menu />\r\n          <Directory />\r\n          <Playlist />\r\n          <Hint />\r\n        </>\r\n      ) : (\r\n        <div className=\"centered-grid\">Loading User Data...</div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","export const secondsToTime = (secs) => {\r\n  const minutes = Math.floor(secs / 60);\r\n  const [s, ms] = String(secs - minutes * 60).split(\".\");\r\n\r\n  const seconds = s.length === 1 ? \"0\" + s : s;\r\n  const miliseconds = ms ? String(ms).slice(0, 2) : 0;\r\n\r\n  return `${minutes > 9 ? minutes : \"0\" + minutes}:${seconds}`;\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport {\r\n  useGlobalState,\r\n  getGlobalState,\r\n  setGlobalState\r\n} from \"react-global-state-hook\";\r\nimport { PLAYER_PROGRESS, SEQUENCER_VIDEO } from \"../../views/Sequencer\";\r\nimport {\r\n  EDITING_SEQUENCE,\r\n  patchSequence,\r\n  postSequence\r\n} from \"../../stores/sequences\";\r\nimport { secondsToTime } from \"../../utils/secondsToTime\";\r\n\r\nexport const TAGGER_ACTIVE_TIME = \"TAGGER_ACTIVE_TIME\";\r\nexport const TAGGER_START = \"TAGGER_START\";\r\nexport const TAGGER_STOP = \"TAGGER_STOP\";\r\nexport const TAGGER_LABEL = \"TAGGER_LABEL\";\r\n\r\nconst handleControls = (e) => {\r\n  const event = e.detail;\r\n  if (event === \"tag\") {\r\n    const activeTime = getGlobalState(TAGGER_ACTIVE_TIME);\r\n    const start = getGlobalState(TAGGER_START);\r\n    if (!activeTime && !start) {\r\n      console.log(\"starting START\");\r\n      setGlobalState(TAGGER_ACTIVE_TIME, \"start\");\r\n    } else if (activeTime === \"start\") {\r\n      console.log(\"SETTING START\");\r\n      setStart();\r\n    } else if (activeTime === \"stop\") {\r\n      console.log(\"SETTING STOP\");\r\n      setStop();\r\n    } else {\r\n      console.log(\"SBMITTING\");\r\n      handleSubmit();\r\n    }\r\n  } else if (event === \"tagback\") {\r\n    const activeTime = getGlobalState(TAGGER_ACTIVE_TIME);\r\n    const start = getGlobalState(TAGGER_START);\r\n    // only when start has a value\r\n    console.log({ activeTime, start });\r\n\r\n    if (activeTime === \"start\") {\r\n      resetTagger();\r\n    } else if (activeTime === \"stop\") {\r\n      setGlobalState(TAGGER_ACTIVE_TIME, \"start\");\r\n    } else if (!activeTime && start) {\r\n      setGlobalState(TAGGER_ACTIVE_TIME, \"stop\");\r\n    }\r\n  }\r\n};\r\n\r\nconst handleSubmit = () => {\r\n  const editingSequence = getGlobalState(EDITING_SEQUENCE);\r\n  const start = getGlobalState(TAGGER_START);\r\n  const stop = getGlobalState(TAGGER_STOP);\r\n  const label = getGlobalState(TAGGER_LABEL);\r\n  if (!label) {\r\n    alert(\"Label required!\");\r\n  } else {\r\n    if (editingSequence) {\r\n      patchSequence({\r\n        ...editingSequence,\r\n        start,\r\n        stop,\r\n        label\r\n      });\r\n    } else {\r\n      const { id, url } = getGlobalState(SEQUENCER_VIDEO);\r\n      postSequence({\r\n        videoId: id,\r\n        start,\r\n        stop,\r\n        label,\r\n        url\r\n      });\r\n    }\r\n    resetTagger();\r\n  }\r\n};\r\n\r\nconst handleStartClick = (e) => {\r\n  if (e) e.stopPropagation();\r\n  setStart();\r\n};\r\n\r\nconst setStart = () => {\r\n  const { playedSeconds = 0 } = getGlobalState(PLAYER_PROGRESS);\r\n  const time = Number(playedSeconds.toFixed(2));\r\n  setGlobalState(TAGGER_START, time);\r\n  setGlobalState(TAGGER_ACTIVE_TIME, \"stop\");\r\n};\r\n\r\nconst handleStopClick = (e) => {\r\n  if (e) e.stopPropagation();\r\n  setStop();\r\n};\r\n\r\nconst setStop = () => {\r\n  const { playedSeconds } = getGlobalState(PLAYER_PROGRESS);\r\n  const time = Number(playedSeconds.toFixed(2));\r\n  setGlobalState(TAGGER_STOP, time);\r\n  setGlobalState(TAGGER_ACTIVE_TIME, undefined);\r\n};\r\n\r\nconst handleDismiss = () => {\r\n  resetTagger();\r\n  setGlobalState(EDITING_SEQUENCE, undefined);\r\n};\r\n\r\nconst resetTagger = () => {\r\n  setGlobalState(TAGGER_ACTIVE_TIME, \"start\");\r\n  setGlobalState(TAGGER_LABEL, \"\");\r\n  setGlobalState(TAGGER_START, undefined);\r\n  setGlobalState(TAGGER_STOP, undefined);\r\n};\r\n\r\nexport const Tagger = () => {\r\n  const [activeTime, setActiveTime]: any = useGlobalState(\r\n    TAGGER_ACTIVE_TIME,\r\n    \"start\"\r\n  );\r\n  const [editingSequence] = useGlobalState(EDITING_SEQUENCE);\r\n\r\n  const [label, setLabel] = useGlobalState(TAGGER_LABEL, \"\");\r\n  const [progress] = useGlobalState(PLAYER_PROGRESS);\r\n\r\n  const [start, setStart]: any = useGlobalState(TAGGER_START);\r\n  const [stop, setStop]: any = useGlobalState(TAGGER_STOP);\r\n\r\n  useEffect(() => {\r\n    const ta = document.getElementById(\"tagInput\");\r\n    if (ta) {\r\n      ta.focus();\r\n    }\r\n  }, [start, stop, activeTime]);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"controls\", handleControls);\r\n    return () => document.removeEventListener(\"controls\", handleControls);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (editingSequence) {\r\n      console.log(\"EDIETING\");\r\n\r\n      setStart(editingSequence.start);\r\n      setStop(editingSequence.stop);\r\n      setLabel(editingSequence.label);\r\n      setActiveTime();\r\n    }\r\n  }, [editingSequence, setStart, setStop, setLabel, setActiveTime]);\r\n\r\n  const activateStart = () =>\r\n    setActiveTime(activeTime === \"start\" ? \"\" : \"start\");\r\n  const activateStop = () => setActiveTime(activeTime === \"stop\" ? \"\" : \"stop\");\r\n  const handleLabelChange = ({ target: { value } }) => setLabel(value);\r\n\r\n  return (\r\n    <div className=\"sequencer_list-tagger shadow-l grid\">\r\n      <div className=\"sequencer_list-tagger-times grid bg-grey-light gap-xs\">\r\n        <div\r\n          className=\"bg-white centered-grid grid-tc-m1\"\r\n          onClick={activateStart}\r\n        >\r\n          <span className=\"pd-1\">\r\n            {activeTime === \"start\"\r\n              ? secondsToTime(progress.playedSeconds || 0)\r\n              : secondsToTime(start)}\r\n          </span>\r\n          {activeTime === \"start\" && (\r\n            <button className=\"pd-1 bg-grey\" onClick={handleStartClick}>\r\n              Set Tag\r\n            </button>\r\n          )}\r\n        </div>\r\n        {(start || start === 0) && (\r\n          <div\r\n            className=\"bg-white centered-grid grid-tc-m1\"\r\n            onClick={activateStop}\r\n          >\r\n            <span className=\"pd-1\">\r\n              {activeTime === \"stop\"\r\n                ? secondsToTime(progress.playedSeconds)\r\n                : secondsToTime(stop)}\r\n            </span>\r\n            {activeTime === \"stop\" && (\r\n              <button className=\"pd-1 bg-grey\" onClick={handleStopClick}>\r\n                Set Stop\r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n      {(start || start === 0) && (\r\n        <>\r\n          <textarea\r\n            className=\"pd-1\"\r\n            id=\"tagInput\"\r\n            onChange={handleLabelChange}\r\n            value={label}\r\n            placeholder=\"Add Label to Tag...\"\r\n          />\r\n          <div className=\"sequencer_list-tagger-buttons stretched-grid gap-xs bg-grey-light\">\r\n            <button className=\"bg-white pd-1\" onClick={handleDismiss}>\r\n              {editingSequence ? \"Dismiss\" : \"Close\"}\r\n            </button>\r\n            <button\r\n              className=\"bg-white pd-1\"\r\n              disabled={!start || !label}\r\n              onClick={handleSubmit}\r\n            >\r\n              Submit\r\n            </button>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { setGlobalState } from \"react-global-state-hook\";\r\nimport { FILTERED_SEQUENCES } from \"../../stores/sequences\";\r\n\r\nexport const SequencerListHeader = ({ sequences }) => {\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const filtered = sequences.filter((s) =>\r\n      s.label.toLowerCase().includes(search.toLowerCase())\r\n    );\r\n\r\n    setGlobalState(FILTERED_SEQUENCES, filtered);\r\n  }, [search, sequences]);\r\n\r\n  return (\r\n    <div className=\"sequencer_list-header grid grid-tc-1m shadow-s z1\">\r\n      <input\r\n        className=\"bg-grey-light\"\r\n        type=\"text\"\r\n        placeholder=\"Search sequences...\"\r\n        onChange={({ target: { value } }) => setSearch(value)}\r\n        value={search}\r\n      />\r\n      <i className=\"material-icons pd-005\">filter_list</i>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useCallback } from \"react\";\r\n\r\nimport ReactPlayer from \"react-player\";\r\n\r\nimport {\r\n  setGlobalState,\r\n  useGlobalState,\r\n  getGlobalState\r\n} from \"react-global-state-hook\";\r\nimport { PLAYER_PROGRESS } from \"../../views/Sequencer\";\r\n\r\nexport const SEQUENCER_PLAYER = \"SEQUENCER_PLAYER\";\r\nexport const SEQUENCER_PLAYER_PLAYING = \"SEQUENCER_PLAYER_PLAYING\";\r\nexport const SEQUENCER_PLAYING_SEQUENCES = \"SEQUENCER_PLAYING_SEQUENCES\";\r\n\r\nsetGlobalState(SEQUENCER_PLAYER, { ready: false, player: null });\r\nsetGlobalState(SEQUENCER_PLAYING_SEQUENCES, []);\r\n\r\nexport const SequencerVideo = ({ selectedVideo, sequences }) => {\r\n  const [playing] = useGlobalState(SEQUENCER_PLAYER_PLAYING, false);\r\n\r\n  const handleProgress = useCallback(\r\n    (progress) => {\r\n      const playedSeconds = Number(progress.playedSeconds.toFixed(2));\r\n      setGlobalState(PLAYER_PROGRESS, {\r\n        playedSeconds\r\n      });\r\n      const playingSequences = sequences\r\n        .filter(\r\n          ({ start, stop }) => start <= playedSeconds && stop >= playedSeconds\r\n        )\r\n        .map((s) => s.id);\r\n      setGlobalState(SEQUENCER_PLAYING_SEQUENCES, playingSequences);\r\n    },\r\n    [sequences]\r\n  );\r\n\r\n  console.log(playing);\r\n\r\n  const ref = (p) => {\r\n    const playerState = getGlobalState(SEQUENCER_PLAYER);\r\n    setGlobalState(SEQUENCER_PLAYER, { ...playerState, player: p });\r\n  };\r\n\r\n  const handleReady = () => {\r\n    const playerState = getGlobalState(SEQUENCER_PLAYER);\r\n    setGlobalState(SEQUENCER_PLAYER, { ...playerState, ready: true });\r\n  };\r\n\r\n  return (\r\n    <div className=\"sequencer_video\">\r\n      {selectedVideo ? (\r\n        <ReactPlayer\r\n          className={\"player\"}\r\n          height=\"100%\"\r\n          width=\"auto\"\r\n          pip={true}\r\n          playing={playing}\r\n          ref={ref}\r\n          url={selectedVideo.url}\r\n          onReady={handleReady}\r\n          progressInterval={100}\r\n          onProgress={handleProgress}\r\n          controls={true}\r\n        />\r\n      ) : (\r\n        \"Loading Video\"\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useMemo, useState, useEffect } from \"react\";\r\n\r\nimport {\r\n  useGlobalState,\r\n  setGlobalState,\r\n  getGlobalState\r\n} from \"react-global-state-hook\";\r\nimport {\r\n  FILTERED_SEQUENCES,\r\n  SELECTED_SEQUENCES,\r\n  EDITING_SEQUENCE\r\n} from \"../../stores/sequences\";\r\nimport {\r\n  SEQUENCER_PLAYER,\r\n  SEQUENCER_PLAYER_PLAYING,\r\n  SEQUENCER_PLAYING_SEQUENCES\r\n} from \"./SequencerVideo\";\r\nimport { secondsToTime } from \"../../utils/secondsToTime\";\r\n\r\nlet timeout;\r\nlet lastSort;\r\n\r\nexport const SequencerList = ({ sequences: seqs, sequenceId }) => {\r\n  const [selectedSequences, setSelectedSequences] = useGlobalState(\r\n    SELECTED_SEQUENCES\r\n  );\r\n  const [sequences] = useGlobalState(FILTERED_SEQUENCES);\r\n  // const [sequences] = useGlobalState(FILTERED_SEQUENCES);\r\n  const [activeSequenceId, setActiveSequenceId] = useState(sequenceId);\r\n  const [playingSequenceIds] = useGlobalState(SEQUENCER_PLAYING_SEQUENCES);\r\n  const [editingSequence, setEditingSequence] = useGlobalState(\r\n    EDITING_SEQUENCE\r\n  );\r\n  const [sortTime, setSortTime]: any = useState(\"asc\");\r\n  const [sortLabel, setSortLabel]: any = useState();\r\n\r\n  useEffect(() => {\r\n    lastSort = \"time\";\r\n  }, [sortTime]);\r\n\r\n  useEffect(() => {\r\n    lastSort = \"label\";\r\n  }, [sortLabel]);\r\n\r\n  useEffect(() => {\r\n    if (sequenceId) {\r\n      const sequence = sequences.find((s) => s.id === sequenceId);\r\n      if (sequence) {\r\n        seekToSequence(sequenceId);\r\n      }\r\n    }\r\n  }, [sequenceId, sequences]);\r\n\r\n  const handleSelect = (e) => {\r\n    e.stopPropagation();\r\n    const id = e.target.closest(\"li\").id;\r\n\r\n    if (selectedSequences.includes(id)) {\r\n      setSelectedSequences(selectedSequences.filter((s) => s !== id));\r\n    } else {\r\n      setSelectedSequences([...selectedSequences, id]);\r\n    }\r\n  };\r\n\r\n  const editSequence = (id) => {\r\n    const sequence = sequences.find((s) => s.id === id);\r\n    setEditingSequence(sequence);\r\n  };\r\n\r\n  const handleClick = (e) => {\r\n    const id = e.target.closest(\"li\").id;\r\n    if (timeout) {\r\n      editSequence(id);\r\n      clearTimeout(timeout);\r\n      timeout = undefined;\r\n    } else {\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(() => {\r\n        setActiveSequenceId(id);\r\n        // cant use an effect here because this will not fire when clicked on the same id\r\n        seekToSequence(id);\r\n        clearTimeout(timeout);\r\n        timeout = undefined;\r\n      }, 200);\r\n    }\r\n  };\r\n\r\n  const seekToSequence = (id) => {\r\n    const { player, ready } = getGlobalState(SEQUENCER_PLAYER);\r\n    if (player && ready) {\r\n      const sequence = sequences.find((s) => s.id === id);\r\n      if (sequence) {\r\n        player.seekTo(sequence.start, \"seconds\");\r\n        setGlobalState(SEQUENCER_PLAYER_PLAYING, true);\r\n      }\r\n    } else {\r\n      setTimeout(() => {\r\n        seekToSequence(id);\r\n      }, 500);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (e) => {\r\n    e.stopPropagation();\r\n    const id = e.target.closest(\"li\").id;\r\n    editSequence(id);\r\n  };\r\n\r\n  const sortedSequences = useMemo(() => {\r\n    let sorted = sequences.sort((a, b) => {\r\n      if (sortTime === \"asc\") {\r\n        return a.start - b.start;\r\n      }\r\n      return b.start - a.start;\r\n    });\r\n    if (!!sortLabel && lastSort === \"label\") {\r\n      sorted = sorted.sort((a, b) => {\r\n        var nameA = a.label.toUpperCase(); // ignore upper and lowercase\r\n        var nameB = b.label.toUpperCase(); // ignore upper and lowercase\r\n        if (nameA < nameB) {\r\n          return sortLabel === \"asc\" ? -1 : 1;\r\n        }\r\n        if (nameA > nameB) {\r\n          return sortLabel === \"asc\" ? 1 : -1;\r\n        }\r\n\r\n        // names must be equal\r\n        return 0;\r\n      });\r\n    }\r\n    return sorted;\r\n  }, [sequences, sortLabel, sortTime]);\r\n\r\n  const handleSortLabel = () => {\r\n    if (!sortLabel) {\r\n      setSortLabel(\"asc\");\r\n    } else if (sortLabel === \"asc\") {\r\n      setSortLabel(\"desc\");\r\n    } else {\r\n      setSortLabel();\r\n    }\r\n  };\r\n\r\n  const handleSortTime = () => {\r\n    if (sortTime === \"desc\") {\r\n      setSortTime(\"asc\");\r\n    } else {\r\n      setSortTime(\"desc\");\r\n    }\r\n  };\r\n\r\n  const allSelected = useMemo(() => {\r\n    return sequences.every((s) => selectedSequences.includes(s.id));\r\n  }, [selectedSequences, sequences]);\r\n\r\n  const handleSelectAll = () => {\r\n    if (allSelected) {\r\n      const allIds = sequences.map((s) => s.id);\r\n      setSelectedSequences(\r\n        selectedSequences.filter((s) => !allIds.includes(s))\r\n      );\r\n    } else {\r\n      setSelectedSequences(\r\n        Array.from(\r\n          new Set([...selectedSequences, ...sequences.map((s) => s.id)])\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ul className=\"sequencer_list-list\">\r\n      <li className=\"sequencer_list-list-sort stretched-grid gap-xs bg-grey-light\">\r\n        <span\r\n          className=\"centered-grid bg-white pd-05 gap-m\"\r\n          onClick={handleSortTime}\r\n        >\r\n          <i className=\"material-icons\">\r\n            {!sortTime\r\n              ? \"unfold_more\"\r\n              : sortTime === \"desc\"\r\n              ? \"expand_less\"\r\n              : \"expand_more\"}\r\n          </i>\r\n        </span>\r\n        <span\r\n          className=\"aligned-grid bg-white pd-05 gap-m\"\r\n          onClick={handleSortLabel}\r\n        >\r\n          <i className=\"material-icons\">\r\n            {!sortLabel\r\n              ? \"unfold_more\"\r\n              : sortLabel === \"desc\"\r\n              ? \"expand_less\"\r\n              : \"expand_more\"}\r\n          </i>\r\n        </span>\r\n        <i\r\n          onClick={handleSelectAll}\r\n          className=\"material-icons aligned-grid bg-white pd-05\"\r\n        >\r\n          {allSelected ? \"check_box\" : \"check_box_outline_blank\"}\r\n        </i>\r\n      </li>\r\n      {sortedSequences.map((s, i) => {\r\n        const selected = selectedSequences.includes(s.id);\r\n        const active = activeSequenceId === s.id;\r\n        const playing = playingSequenceIds.includes(s.id);\r\n        const editing = editingSequence && editingSequence.id === s.id;\r\n        return (\r\n          <li\r\n            data-active={active}\r\n            data-playing={playing}\r\n            data-editing={editing}\r\n            data-loading={!s.id}\r\n            onClick={handleClick}\r\n            id={s.id || i}\r\n            key={i}\r\n            className=\"stretched-grid gap-xs bg-grey-light\"\r\n          >\r\n            <div className=\"stretched-grid bg-white\">\r\n              <span className=\"centered-grid\">{secondsToTime(s.start)}</span>\r\n            </div>\r\n            <label className=\"aligned-grid bg-white pd-05 gap-m grid-tc-1m\">\r\n              {s.label}\r\n              <i onClick={handleEdit} className=\"material-icons\">\r\n                edit\r\n              </i>\r\n            </label>\r\n            <i\r\n              onClick={handleSelect}\r\n              className=\"material-icons aligned-grid bg-white pd-05\"\r\n            >\r\n              {!s.id\r\n                ? \"close\"\r\n                : selected\r\n                ? \"check_box\"\r\n                : \"check_box_outline_blank\"}\r\n            </i>\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n","import React, { useMemo } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { FOLDERS } from \"../../stores/folder\";\r\nimport { useGlobalState, setGlobalState } from \"react-global-state-hook\";\r\nimport { MODAL } from \"../Modal\";\r\n\r\nexport const SEQUENCER_TARGET_FOLDER = \"SEQUENCER_TARGET_FOLDER\";\r\n\r\nexport const SequencerHeader = ({ selectedVideo }) => {\r\n  const [targetFolderId, setTargetFolderId] = useGlobalState(\r\n    SEQUENCER_TARGET_FOLDER,\r\n    null\r\n  );\r\n  const [folders] = useGlobalState(FOLDERS);\r\n\r\n  const targetFolder = useMemo(() => {\r\n    return folders.find((f) => f.id === targetFolderId);\r\n  }, [targetFolderId, folders]);\r\n\r\n  const handleSelectFolder = () => {\r\n    setGlobalState(MODAL, {\r\n      component: \"selectFolder\",\r\n      props: {\r\n        onSelect: (id) => setTargetFolderId(id)\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleEdit = () => {\r\n    setGlobalState(MODAL, {\r\n      component: \"video\",\r\n      props: selectedVideo\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"sequencer_header aligned-grid grid-tc-m1m z2 gap-m\">\r\n      <Link to=\"/dashboard\" className=\"pd-01 centered-grid\">\r\n        <i className=\"material-icons\">home</i>\r\n      </Link>\r\n      <div className=\"sequencer_header-info aligned-grid grid-tc-m1m gap-m\">\r\n        <i className=\"material-icons\">ondemand_video</i>\r\n        {!selectedVideo ? \"Loading Video...\" : selectedVideo.label}\r\n        <i onClick={handleEdit} className=\"material-icons\">\r\n          more_vert\r\n        </i>\r\n      </div>\r\n      {/* <button className=\"pd-01 bg-grey\" onClick={handleSelectFolder}>\r\n        <i className=\"material-icons\">folder</i>\r\n        {!targetFolder ? \"Root Folder\" : targetFolder.label}\r\n      </button> */}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport {\r\n  useGlobalState,\r\n  setGlobalState,\r\n  getGlobalState\r\n} from \"react-global-state-hook\";\r\nimport { SEQUENCER_PLAYER_PLAYING, SEQUENCER_PLAYER } from \"./SequencerVideo\";\r\nimport { PLAYER_PROGRESS } from \"../../views/Sequencer\";\r\n\r\nconst handleControls = (e) => {\r\n  const event = e.detail;\r\n  if (event === \"play\") {\r\n    setGlobalState(\r\n      SEQUENCER_PLAYER_PLAYING,\r\n      !getGlobalState(SEQUENCER_PLAYER_PLAYING)\r\n    );\r\n  } else if (event === \"forward\" || event === \"rewind\") {\r\n    const { player } = getGlobalState(SEQUENCER_PLAYER);\r\n    if (player) {\r\n      const progress = getGlobalState(PLAYER_PROGRESS);\r\n      const to =\r\n        event === \"forward\"\r\n          ? progress.playedSeconds + 5\r\n          : progress.playedSeconds - 5;\r\n      player.seekTo(to, \"seconds\");\r\n    }\r\n  }\r\n};\r\n\r\nexport const SequencerControls = () => {\r\n  const [playing] = useGlobalState(SEQUENCER_PLAYER_PLAYING);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"controls\", handleControls);\r\n    return () => document.removeEventListener(\"controls\", handleControls);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"sequencer_controls z1 gap-xs bg-white stretched-grid\">\r\n      <button>\r\n        <i className=\"material-icons\">{playing ? \"pause\" : \"play_arrow\"}</i>\r\n      </button>\r\n      <button>\r\n        <i className=\"material-icons\">fast_rewind</i>\r\n      </button>\r\n      <button>\r\n        <i className=\"material-icons\">fast_forward</i>\r\n      </button>\r\n      <button>\r\n        <i className=\"material-icons\">keyboard_arrow_up</i>\r\n      </button>\r\n      <button>\r\n        <i className=\"material-icons\">keyboard_arrow_down</i>\r\n      </button>\r\n      <button>\r\n        <i className=\"material-icons\">slow_motion_video</i>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { SELECTED_SEQUENCES, deleteSequences } from \"../../stores/sequences\";\r\nimport { useGlobalState, setGlobalState } from \"react-global-state-hook\";\r\nimport { MODAL } from \"../Modal\";\r\nimport { DIRECTORY_TYPES } from \"../../stores/folder\";\r\nimport { handleShare } from \"../Dashboard/Directory\";\r\n\r\nexport const SequencerActions = () => {\r\n  const [selectedSequences, setSelectedSequences] = useGlobalState(\r\n    SELECTED_SEQUENCES\r\n  );\r\n\r\n  const disabled = selectedSequences.length === 0;\r\n\r\n  const handleSave = () =>\r\n    setGlobalState(MODAL, {\r\n      component: DIRECTORY_TYPES.PLAYLIST,\r\n      onClose: () => setSelectedSequences([]),\r\n      props: {\r\n        items: selectedSequences.map((s) => `${DIRECTORY_TYPES.SEQUENCE}:${s}`)\r\n      }\r\n    });\r\n\r\n  const handleRemove = () => {\r\n    // check with backend if its deletable\r\n    deleteSequences(selectedSequences[0]);\r\n    setSelectedSequences(selectedSequences.filter((s, i) => i !== 0));\r\n  };\r\n\r\n  const onShare = () =>\r\n    handleShare(DIRECTORY_TYPES.SEQUENCE, selectedSequences[0]);\r\n\r\n  return (\r\n    <div className=\"sequencer_actions stretched-grid\">\r\n      <button onClick={handleSave} disabled={disabled}>\r\n        <i className=\"material-icons\">playlist_add</i>\r\n      </button>\r\n      <button onClick={handleRemove} disabled={selectedSequences.length !== 1}>\r\n        <i className=\"material-icons\">delete</i>\r\n      </button>\r\n      <button onClick={onShare} disabled={selectedSequences.length !== 1}>\r\n        <i className=\"material-icons\">share</i>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useMemo } from \"react\";\r\nimport \"../components/Sequencer/Sequencer.scss\";\r\n\r\nimport { useGlobalState, setGlobalState } from \"react-global-state-hook\";\r\n\r\nimport { VIDEOS, getVideo } from \"../stores/videos\";\r\nimport { SEQUENCES } from \"../stores/sequences\";\r\nimport { Tagger } from \"../components/Sequencer/Tagger\";\r\nimport { SequencerListHeader } from \"../components/Sequencer/SequencerListHeader\";\r\nimport { SequencerList } from \"../components/Sequencer/SequencerList\";\r\nimport { SequencerHeader } from \"../components/Sequencer/SequencerHeader\";\r\nimport { SequencerVideo } from \"../components/Sequencer/SequencerVideo\";\r\nimport { SequencerControls } from \"../components/Sequencer/SequencerControls\";\r\nimport { SequencerActions } from \"../components/Sequencer/SequencerActions\";\r\nimport { getFolders } from \"../stores/folder\";\r\n\r\nexport const PLAYER_PROGRESS = \"PLAYER_PROGRESS\";\r\nexport const SEQUENCER_VIDEO = \"SEQUENCER_VIDEO\";\r\n\r\nconst KEY_EVENTS = {\r\n  0: \"play\",\r\n  10: \"tag\",\r\n  127: \"tagback\",\r\n  37: \"rewind\",\r\n  38: \"back\",\r\n  39: \"forward\",\r\n  40: \"next\"\r\n};\r\n\r\nconst handleKeyPress = (e) => {\r\n  const key = e.keyCode;\r\n  const ctrl = e.ctrlKey;\r\n  if (ctrl) {\r\n    if (KEY_EVENTS[key]) {\r\n      const event = new CustomEvent(\"controls\", { detail: KEY_EVENTS[key] });\r\n      document.dispatchEvent(event);\r\n    }\r\n  }\r\n};\r\n\r\nexport const Sequencer = ({\r\n  match: {\r\n    params: { id }\r\n  },\r\n  location: { search }\r\n}) => {\r\n  const [videos] = useGlobalState(VIDEOS);\r\n  const [sequences] = useGlobalState(SEQUENCES);\r\n\r\n  useEffect(() => {\r\n    // Need all folders to select target folder\r\n    // Maybe sequences should always be saved in seuqnces/videoName?\r\n    getFolders();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // listen to keyboard shortcuts\r\n    // Maybe move this to aservice like script?\r\n    document.addEventListener(\"keypress\", handleKeyPress);\r\n    document.addEventListener(\"keydown\", handleKeyPress);\r\n    return () => {\r\n      document.removeEventListener(\"keypress\", handleKeyPress);\r\n      document.removeEventListener(\"keydown\", handleKeyPress);\r\n    };\r\n  }, [id]);\r\n\r\n  const sequenceId = useMemo(() => {\r\n    // In case a initial sequence is set as query params\r\n    // This sequence needs to be selected and played from the beginning\r\n    return search\r\n      .slice(1, search.length)\r\n      .split(\"&\")\r\n      .filter((q) => q.split(\"=\")[0] === \"sequenceId\")\r\n      .map((q) => q.split(\"=\")[1])\r\n      .find((_, i) => i === 0);\r\n  }, [search]);\r\n\r\n  useEffect(() => {\r\n    // Only get the video if its not existing in videos\r\n    // Makes this view independent of Dashboard\r\n    if (!videos.find((v) => v.id === id)) {\r\n      getVideo(id);\r\n    }\r\n  }, [id, videos]);\r\n\r\n  const selectedVideo = useMemo(() => videos.find((v) => v.id === id), [\r\n    videos,\r\n    id\r\n  ]);\r\n\r\n  useEffect(() => setGlobalState(SEQUENCER_VIDEO, selectedVideo), [\r\n    selectedVideo\r\n  ]);\r\n\r\n  const videoSequences = useMemo(() => {\r\n    if (selectedVideo) {\r\n      return sequences.filter((s) => s.videoId === selectedVideo.id);\r\n    }\r\n    return [];\r\n  }, [sequences, selectedVideo]);\r\n\r\n  return (\r\n    <div className=\"sequencer overflow-h grid grid-tc-1m grid-tr-m1 bg-grey-light\">\r\n      <SequencerHeader selectedVideo={selectedVideo} />\r\n      <SequencerVideo\r\n        sequences={videoSequences}\r\n        selectedVideo={selectedVideo}\r\n      />\r\n      <div className=\"sequencer_list grid grid-tr-m1mm\">\r\n        <SequencerListHeader sequences={videoSequences} />\r\n        <SequencerList sequences={videoSequences} sequenceId={sequenceId} />\r\n        <SequencerActions />\r\n        <Tagger />\r\n        <SequencerControls />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport \"./Landing.scss\";\r\nimport { Link } from \"react-router-dom\";\r\nconst dropbox = require(\"./dropbox.png\");\r\nconst soundcloud = require(\"./soundcloud.png\");\r\nconst streamable = require(\"./streamable.png\");\r\nexport const Landing = () => {\r\n  return (\r\n    <div className=\"landing\">\r\n      <svg\r\n        viewBox=\"0 0 200 60\"\r\n        preserveAspectRatio=\"xMidYMid meet\"\r\n        focusable=\"false\"\r\n        className=\"style-scope ytd-topbar-logo-renderer\"\r\n        style={{\r\n          pointerEvents: \"none\",\r\n          display: \"block\",\r\n          width: \"100%\",\r\n          height: \"100%\"\r\n        }}\r\n      >\r\n        <g\r\n          viewBox=\"0 0 200 60\"\r\n          preserveAspectRatio=\"xMidYMid meet\"\r\n          className=\"style-scope ytd-topbar-logo-renderer\"\r\n        >\r\n          <g className=\"style-scope ytd-topbar-logo-renderer\">\r\n            <path\r\n              fill=\"#FF0000\"\r\n              d=\"M63,14.87c-0.72-2.7-2.85-4.83-5.56-5.56C52.54,8,32.88,8,32.88,8S13.23,8,8.32,9.31\r\n      c-2.7,0.72-4.83,2.85-5.56,5.56C1.45,19.77,1.45,30,1.45,30s0,10.23,1.31,15.13c0.72,2.7,2.85,4.83,5.56,5.56\r\n      C13.23,52,32.88,52,32.88,52s19.66,0,24.56-1.31c2.7-0.72,4.83-2.85,5.56-5.56C64.31,40.23,64.31,30,64.31,30\r\n      S64.31,19.77,63,14.87z\"\r\n              className=\"style-scope ytd-topbar-logo-renderer\"\r\n            ></path>\r\n            <polygon\r\n              fill=\"#FFFFFF\"\r\n              points=\"26.6,39.43 42.93,30 26.6,20.57\"\r\n              className=\"style-scope ytd-topbar-logo-renderer\"\r\n            ></polygon>\r\n          </g>\r\n          <g className=\"style-scope ytd-topbar-logo-renderer\">\r\n            <g\r\n              id=\"youtube-paths\"\r\n              className=\"style-scope ytd-topbar-logo-renderer\"\r\n            >\r\n              <path\r\n                fill=\"#282828\"\r\n                d=\"M92.69,48.03c-1.24-0.84-2.13-2.14-2.65-3.91c-0.52-1.77-0.79-4.12-0.79-7.06v-4\r\n        c0-2.97,0.3-5.35,0.9-7.15c0.6-1.8,1.54-3.11,2.81-3.93c1.27-0.82,2.94-1.24,5.01-1.24c2.04,0,3.67,0.42,4.9,1.26\r\n        c1.23,0.84,2.13,2.15,2.7,3.93c0.57,1.78,0.85,4.16,0.85,7.12v4c0,2.94-0.28,5.3-0.83,7.08c-0.55,1.78-1.45,3.09-2.7,3.91\r\n        c-1.24,0.82-2.93,1.24-5.06,1.24C95.65,49.29,93.93,48.87,92.69,48.03z M99.66,43.71c0.34-0.9,0.52-2.37,0.52-4.4v-8.59\r\n        c0-1.98-0.17-3.42-0.52-4.34c-0.34-0.91-0.95-1.37-1.82-1.37c-0.84,0-1.43,0.46-1.78,1.37c-0.34,0.91-0.52,2.36-0.52,4.34v8.59\r\n        c0,2.04,0.16,3.51,0.49,4.4c0.33,0.9,0.93,1.35,1.8,1.35C98.71,45.06,99.31,44.61,99.66,43.71z\"\r\n                className=\"style-scope ytd-topbar-logo-renderer\"\r\n              ></path>\r\n              <path\r\n                fill=\"#282828\"\r\n                d=\"M188.16,37.13v1.39c0,1.77,0.05,3.09,0.16,3.98c0.1,0.88,0.32,1.53,0.65,1.93\r\n        c0.33,0.4,0.84,0.61,1.53,0.61c0.93,0,1.57-0.36,1.91-1.08c0.34-0.72,0.53-1.92,0.56-3.6l5.35,0.31\r\n        c0.03,0.24,0.04,0.57,0.04,0.99c0,2.55-0.7,4.45-2.09,5.71c-1.39,1.26-3.36,1.89-5.91,1.89c-3.06,0-5.2-0.96-6.43-2.88\r\n        c-1.23-1.92-1.84-4.88-1.84-8.9v-4.81c0-4.14,0.64-7.15,1.91-9.06c1.27-1.9,3.45-2.85,6.54-2.85c2.13,0,3.76,0.39,4.9,1.17\r\n        c1.14,0.78,1.94,1.99,2.41,3.64c0.46,1.65,0.7,3.93,0.7,6.83v4.72H188.16z M188.95,25.53c-0.31,0.39-0.52,1.03-0.63,1.91\r\n        c-0.11,0.88-0.16,2.23-0.16,4.02v1.98h4.54v-1.98c0-1.77-0.06-3.11-0.18-4.02c-0.12-0.91-0.34-1.56-0.65-1.93\r\n        c-0.31-0.37-0.8-0.56-1.46-0.56C189.75,24.94,189.26,25.14,188.95,25.53z\"\r\n                className=\"style-scope ytd-topbar-logo-renderer\"\r\n              ></path>\r\n              <path\r\n                fill=\"#282828\"\r\n                d=\"M77.59,36.61l-7.06-25.49h6.16l2.47,11.55c0.63,2.85,1.09,5.27,1.39,7.28h0.18\r\n        c0.21-1.44,0.67-3.85,1.39-7.24l2.56-11.6h6.16L83.7,36.61v12.23h-6.11V36.61z\"\r\n                className=\"style-scope ytd-topbar-logo-renderer\"\r\n              ></path>\r\n              <path\r\n                fill=\"#282828\"\r\n                d=\"M126.45,21.28v27.55h-4.85l-0.54-3.37h-0.13c-1.32,2.55-3.3,3.82-5.93,3.82c-1.83,0-3.18-0.6-4.05-1.8\r\n        c-0.87-1.2-1.3-3.07-1.3-5.62V21.28h6.2v20.23c0,1.23,0.13,2.11,0.4,2.63c0.27,0.52,0.72,0.79,1.35,0.79\r\n        c0.54,0,1.06-0.16,1.55-0.49c0.49-0.33,0.86-0.75,1.1-1.26V21.28H126.45z\"\r\n                className=\"style-scope ytd-topbar-logo-renderer\"\r\n              ></path>\r\n              <path\r\n                fill=\"#282828\"\r\n                d=\"M158.27,21.28v27.55h-4.85l-0.54-3.37h-0.13c-1.32,2.55-3.3,3.82-5.93,3.82c-1.83,0-3.18-0.6-4.05-1.8\r\n        c-0.87-1.2-1.3-3.07-1.3-5.62V21.28h6.2v20.23c0,1.23,0.13,2.11,0.4,2.63c0.27,0.52,0.72,0.79,1.35,0.79\r\n        c0.54,0,1.06-0.16,1.55-0.49c0.49-0.33,0.86-0.75,1.1-1.26V21.28H158.27z\"\r\n                className=\"style-scope ytd-topbar-logo-renderer\"\r\n              ></path>\r\n              <path\r\n                fill=\"#282828\"\r\n                d=\"M143.31,16.11h-6.16v32.72h-6.07V16.11h-6.16v-4.99h18.38V16.11z\"\r\n                className=\"style-scope ytd-topbar-logo-renderer\"\r\n              ></path>\r\n              <path\r\n                fill=\"#282828\"\r\n                d=\"M178.8,25.69c-0.38-1.74-0.98-3-1.82-3.78c-0.84-0.78-1.99-1.17-3.46-1.17c-1.14,0-2.2,0.32-3.19,0.97\r\n        c-0.99,0.64-1.75,1.49-2.29,2.54h-0.05l0-14.52h-5.98v39.11h5.12l0.63-2.61h0.13c0.48,0.93,1.2,1.66,2.16,2.2\r\n        c0.96,0.54,2.02,0.81,3.19,0.81c2.1,0,3.64-0.97,4.63-2.9c0.99-1.93,1.48-4.95,1.48-9.06v-4.36\r\n        C179.36,29.84,179.17,27.43,178.8,25.69z M173.11,36.93c0,2.01-0.08,3.58-0.25,4.72c-0.16,1.14-0.44,1.95-0.83,2.43\r\n        c-0.39,0.48-0.91,0.72-1.57,0.72c-0.51,0-0.98-0.12-1.42-0.36c-0.43-0.24-0.79-0.6-1.06-1.08V27.71\r\n        c0.21-0.75,0.57-1.36,1.08-1.84c0.51-0.48,1.06-0.72,1.66-0.72c0.63,0,1.12,0.25,1.46,0.74c0.34,0.49,0.58,1.33,0.72,2.49\r\n        c0.13,1.17,0.2,2.83,0.2,4.99V36.93z\"\r\n                className=\"style-scope ytd-topbar-logo-renderer\"\r\n              ></path>\r\n            </g>\r\n          </g>\r\n        </g>\r\n      </svg>\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        viewBox=\"0 0 1139.43 379.04\"\r\n        className=\"wordmark-logo grid-start-m-2 grid-span-m-4\"\r\n      >\r\n        <defs></defs>\r\n        <g data-name=\"Layer 2\">\r\n          <g data-name=\"Layer 1\">\r\n            <path\r\n              className=\"wordmark-logo__bg fill-black\"\r\n              d=\"M1119.44 269.32h-80v-99.75h-20v99.75h-80V20h80v69.78h60l40 39.9zm-199.9-99.75h-80v20h80v79.8H799.6l-40-39.9v-99.79l40-39.9h119.94zm-179.91 0h-70v20h70v79.8H629.69l-40-39.9V20h80v69.78h70zM569.72 69.83h-80V20h80zm0 199.49h-80V89.78h80zm-100 0H229.89l-40-39.9V89.78h80v99.74h20V89.78h80v99.74h20V89.78h80zm-299.8-99.75H100v20h70v79.8H60l-40-39.9V20h80v69.78h70zm919.54-99.74h-50V0H929.75l-50.47 69.83h-89.67l-30 29.92V69.83h-70V0H469.77v69.83H160.42L110 0H0v239.4L139.93 379h139.93v-39.9l40 39.9h269.85v-39.9l40 39.9h129.91v-39.9l40 39.9h249.88l90-89.78V119.7z\"\r\n              fill=\"#9145ff\"\r\n            ></path>\r\n            <path\r\n              className=\"wordmark-logo__text fill-white\"\r\n              d=\"M939.53 269.32h79.96v-99.75h19.99v99.75h79.96V129.68l-39.98-39.9h-59.97V19.96h-79.96v249.36zM589.71 229.42l39.97 39.9h109.95v-79.8h-69.96v-19.95h69.96V89.78h-69.96V19.96h-79.96v209.46zM759.62 229.42l39.98 39.9h119.94v-79.8h-79.96v-19.95h79.96V89.78H799.6l-39.98 39.9v99.74zM489.76 19.96h79.96v49.87h-79.96zM169.92 89.78H99.95V19.96H19.99v209.46l39.98 39.9h109.95v-79.8H99.95v-19.95h69.97V89.78zM189.91 229.42l39.97 39.9h239.89V89.78h-79.96v99.74h-20V89.78h-79.95v99.74h-19.99V89.78h-79.96v139.64zM489.76 89.78h79.96v179.54h-79.96z\"\r\n              fill=\"#FFF\"\r\n            ></path>\r\n          </g>\r\n        </g>\r\n      </svg>\r\n      <img src={dropbox} />\r\n      <img src={soundcloud} />\r\n      <svg viewBox=\"0 0 109 31\">\r\n        <path\r\n          d=\"M88.24 23.443a11.978 11.978 0 01-.054-.678c-.184-3.124.947-5.995 3.394-8.61 2.627-2.905 5.929-4.358 9.908-4.358 2.553 0 4.487.855 5.801 2.561 1.242 1.563 1.807 3.578 1.698 6.047-.147 3.342-1.387 6.23-3.723 8.663-2.335 2.434-5.237 3.65-8.704 3.65-2.882 0-5.072-.926-6.568-2.78a7.757 7.757 0 01-.871-1.372 34.1 34.1 0 01-1.235.727c-3.868 2.217-7.792 3.323-11.769 3.323-2.956 0-5.074-.982-6.35-2.945a7.353 7.353 0 01-.266-.422 21.55 21.55 0 01-.117.103c-2.446 2.108-4.89 3.162-7.335 3.162-2.374 0-3.522-1.307-3.45-3.926.036-1.164.265-2.562.684-4.198.42-1.636.648-2.909.685-3.818.037-1.38-.384-2.073-1.264-2.073-.952 0-2.086 1.13-3.404 3.384-1.392 2.365-2.144 4.656-2.252 6.874-.074 1.566.08 2.767.46 3.603-2.546.073-4.33-.346-5.348-1.256-.911-.8-1.33-2.126-1.255-3.983a14.67 14.67 0 01.537-3.492c.321-1.164.5-2.2.537-3.11.074-1.347-.42-2.02-1.48-2.02-.915 0-1.902 1.038-2.96 3.111-1.06 2.073-1.645 4.239-1.754 6.494-.073 2.037.058 3.455.392 4.256-2.505.073-4.284-.454-5.337-1.58-.48-.518-.817-1.185-1.01-2.002-.205.194-.415.386-.631.574-2.446 2.108-4.89 3.162-7.335 3.162-1.133 0-2-.363-2.601-1.09-.602-.728-.885-1.672-.848-2.836.035-1.199.41-3.053 1.121-5.562.712-2.508 1.069-3.854 1.069-4.036 0-.944-.33-1.417-.985-1.417-.207 0-.77.34-1.69 1.016-.693 2.067-2.205 4.595-4.535 7.584-3.315 4.295-6.119 6.443-8.413 6.443-1.42 0-2.624-1.307-3.606-3.924L5.41 19.497c-.73-2.615-1.512-3.924-2.349-3.924-.182 0-.82.383-1.913 1.145L0 15.244a309.082 309.082 0 003.558-3.163c1.604-1.383 2.809-2.11 3.612-2.183 1.897-.182 3.065 1.111 3.503 3.88.474 2.986.802 4.844.986 5.57.547 2.479 1.148 3.716 1.806 3.716.51 0 1.276-.803 2.298-2.41 1.021-1.608 1.568-2.831 1.642-3.672.146-1.387-.401-2.082-1.642-2.082-.583 0-1.185.134-1.804.399 1.198-3.914 3.487-5.814 6.866-5.706 2.256.066 3.438 1.387 3.546 3.961L26 12.081c1.57-1.383 2.738-2.11 3.506-2.183 1.203-.109 2.088.244 2.654 1.06.564.816.774 1.875.63 3.18-.475 2.212-.987 5.02-1.534 8.425-.037 1.56.53 2.338 1.697 2.338.51 0 1.422-.537 2.737-1.615l.049-.04c.083-.76.218-1.662.405-2.708.3-1.687.468-3 .504-3.945.072-.652-.093-.979-.493-.979-.22 0-.84.369-1.862 1.104l-1.314-1.473c.183-.144 1.331-1.2 3.45-3.164 1.532-1.418 2.572-2.145 3.119-2.182.949-.073 1.715.318 2.299 1.172.584.855.876 1.847.876 2.974 0 .364-.036.71-.108 1.037a10.044 10.044 0 011.916-2.183c1.678-1.455 3.558-2.274 5.638-2.456 1.788-.145 3.064.273 3.833 1.255.619.8.91 1.947.875 3.438a73.7 73.7 0 00.822-.71c.838-.982 1.659-1.763 2.462-2.345 1.35-.982 2.756-1.528 4.215-1.638 1.752-.145 3.01.271 3.777 1.25.656.798.949 1.94.877 3.424-.037 1.015-.284 2.492-.74 4.431-.457 1.94-.684 3.052-.684 3.342-.037.763.037 1.287.22 1.577.181.29.618.434 1.313.434.311 0 .773-.2 1.385-.602a9.877 9.877 0 01-.072-1.43c.035-2.945 1.35-5.745 3.942-8.401 2.845-2.909 6.203-4.365 10.072-4.365 3.576 0 5.474 1.453 5.693 4.355.145 1.85-.877 3.755-3.065 5.715-2.337 2.142-5.276 3.502-8.815 4.082.656.908 1.641 1.36 2.956 1.36 2.627 0 5.492-.664 8.596-1.997.138-.058.274-.117.408-.175zm14.56-5.244c.038-.984-.1-1.886-.41-2.706-.31-.82-.758-1.23-1.341-1.23-1.862 0-3.395 1.002-4.597 3.007-1.024 1.64-1.571 3.39-1.643 5.247-.037.912.128 1.714.492 2.406.4.803.966 1.203 1.697 1.203 1.642 0 3.048-.965 4.216-2.898.985-1.604 1.513-3.28 1.587-5.029zm-21.1-1.834c.035-.976-.365-1.465-1.203-1.465-1.094 0-2.204.751-3.334 2.253-1.13 1.502-1.713 2.94-1.748 4.315-.021 0-.021.236 0 .706a12.322 12.322 0 004.645-2.985c1.056-1.157 1.603-2.1 1.64-2.824zM34.651 2.714c-.036.906-.492 1.775-1.369 2.607-.985.941-2.153 1.412-3.503 1.412-2.08 0-3.084-.905-3.011-2.715.035-.94.592-1.846 1.669-2.715C29.513.435 30.708 0 32.023 0c.766 0 1.405.3 1.917.896.51.598.747 1.204.711 1.818z\"\r\n          fill=\"#1A2E3A\"\r\n          fillRule=\"evenodd\"\r\n        ></path>\r\n      </svg>\r\n      <img src={streamable} />\r\n      <div className=\"landing-card\">\r\n        <i className=\"material-icons\">ondemand_video</i>{\" \"}\r\n        <div>\r\n          <p>\r\n            This is a platform to organize, analyze and share streaming content.\r\n          </p>\r\n          <p>\r\n            We enable you to use streams from several streaming platforms and\r\n            let you disect them into sequences.\r\n          </p>\r\n          {/* <p>\r\n            Create playlists with videos as well as sequences and share your\r\n            content with your firends, audience or use it for work.\r\n          </p> */}\r\n        </div>\r\n        <div>\r\n          <label>\r\n            Watch Intro Video\r\n            <i className=\"material-icons\">open_in_new</i>\r\n          </label>\r\n          <Link to=\"/auth/signup\">Signup</Link>\r\n\r\n          <Link to=\"/auth/login\">Login</Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useRef, useEffect, useMemo } from \"react\";\r\nimport ReactPlayer from \"react-player\";\r\nimport { DIRECTORY_TYPES } from \"../../stores/folder\";\r\n\r\n// Like List in Dashboard\r\n\r\nexport const PlaylistViewer = (props: any) => {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [activeItemId, setActiveItemId] = useState();\r\n\r\n  const [playing, setPlaying] = useState(false);\r\n  const [playerReady, setPlayerReady] = useState(false);\r\n\r\n  const [url, setUrl] = useState();\r\n\r\n  const [counter, setCounter] = useState(0);\r\n\r\n  const player: any = useRef();\r\n  const ref = (p) => (player.current = p);\r\n\r\n  const { videos, sequences } = props;\r\n\r\n  const handleReady = () => setPlayerReady(true);\r\n\r\n  const items = useMemo(() => {\r\n    return props.playlist.items\r\n      .map((i) => ({\r\n        type: i.split(\":\")[0],\r\n        id: i.split(\":\")[1]\r\n      }))\r\n      .map(({ id, type }) => {\r\n        if (type === DIRECTORY_TYPES.VIDEO) {\r\n          return { ...videos.find((v) => v.id === id), type };\r\n        } else if (type === DIRECTORY_TYPES.SEQUENCE) {\r\n          return { ...sequences.find((s) => s.id === id), type };\r\n        }\r\n      });\r\n  }, [props]);\r\n\r\n  const currentItem = useMemo(() => items.find((i) => i.id === activeItemId), [\r\n    items,\r\n    activeItemId\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (items.length > 0) {\r\n      setActiveItemId(items[0].id);\r\n      setUrl(items[0].url);\r\n    }\r\n  }, [items]);\r\n\r\n  useEffect(() => {\r\n    if (currentItem) {\r\n      if (currentItem.url !== url) {\r\n        setPlayerReady(false);\r\n        setUrl(currentItem.url);\r\n      } else if (playerReady) {\r\n        const to =\r\n          currentItem.type === DIRECTORY_TYPES.SEQUENCE ? currentItem.start : 0;\r\n        player.current.seekTo(to, \"seconds\");\r\n        setPlaying(true);\r\n      }\r\n    }\r\n  }, [playerReady, currentItem, setPlaying, counter]);\r\n\r\n  const playNext = () => {\r\n    const currentIndex = items.findIndex((i) => i.id === currentItem.id);\r\n    if (currentIndex === items.length - 1) {\r\n      setPlaying(false);\r\n    } else {\r\n      const newItem = items.find((it, i) => i === currentIndex + 1);\r\n      setActiveItemId(newItem.id);\r\n    }\r\n  };\r\n\r\n  const handleEnd = () => playNext();\r\n\r\n  const handleProgress = ({ playedSeconds }) =>\r\n    currentItem.stop && playedSeconds >= currentItem.stop && playNext();\r\n\r\n  const handleSelect = (e) => {\r\n    setCounter(counter + 1);\r\n    setActiveItemId(e.target.id);\r\n  };\r\n\r\n  return (\r\n    <div className=\"playlist_viewer grid grid-tc-1m bg-black\">\r\n      <div>\r\n        <ReactPlayer\r\n          className={\"player_viewer\"}\r\n          height=\"100%\"\r\n          width=\"100%\"\r\n          playing={playing}\r\n          ref={ref}\r\n          url={url}\r\n          onProgress={handleProgress}\r\n          onReady={handleReady}\r\n          onEnded={handleEnd}\r\n          controls={true}\r\n        />\r\n      </div>\r\n      <div className=\"playlist_viewer-list grid grid-tr-m1 gap-s\">\r\n        <input\r\n          className=\"bg-grey\"\r\n          type=\"text\"\r\n          placeholder=\"Search Playlist...\"\r\n          value={search}\r\n          onChange={({ target: { value } }) => setSearch(value)}\r\n        />\r\n        <ul className=\"grid gap-xs\">\r\n          {items.map(({ id, label, type }, i) => (\r\n            <li\r\n              className=\"bg-grey-dark pd-051051\"\r\n              data-active={activeItemId === id}\r\n              onClick={handleSelect}\r\n              id={id}\r\n              key={i}\r\n            >\r\n              {label}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useRef, useState, useEffect } from \"react\";\r\nimport ReactPlayer from \"react-player\";\r\nimport { setGlobalState } from \"react-global-state-hook\";\r\nimport { MODAL } from \"../Modal\";\r\n\r\n// Simple player with:\r\n// loop button\r\n// play/pause\r\n// seekToSlider?\r\n// share button\r\n// save button when logged in\r\n\r\nexport const VideoViewer = ({ video }) => {\r\n  const [playing, setPlaying] = useState(false);\r\n  const [playerReady, setPlayerReady] = useState(false);\r\n\r\n  const player: any = useRef();\r\n  const ref = (p) => (player.current = p);\r\n\r\n  const handleReady = () => setPlayerReady(true);\r\n\r\n  useEffect(() => {\r\n    if (playerReady) {\r\n      setPlaying(true);\r\n    }\r\n  }, [playerReady]);\r\n\r\n  const handleReplay = () => {\r\n    player.current.seekTo(0);\r\n    setPlaying(true);\r\n  };\r\n\r\n  const handleEnd = () => {\r\n    setGlobalState(MODAL, {\r\n      component: \"replay\",\r\n      props: {\r\n        onReplay: handleReplay\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"sequence_viewer\">\r\n      <ReactPlayer\r\n        className={\"player_viewer\"}\r\n        height=\"100%\"\r\n        width=\"100%\"\r\n        playing={playing}\r\n        ref={ref}\r\n        url={video.url}\r\n        onReady={handleReady}\r\n        onEnded={handleEnd}\r\n        controls={true}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useRef, useState, useEffect } from \"react\";\r\nimport ReactPlayer from \"react-player\";\r\nimport { setGlobalState } from \"react-global-state-hook\";\r\nimport { MODAL } from \"../Modal\";\r\n\r\n// Simple player with:\r\n// loop button\r\n// play/pause\r\n// seekToSlider?\r\n// share button\r\n// save button when logged in\r\n\r\nexport const SequenceViewer = ({ sequence }) => {\r\n  const [playing, setPlaying] = useState(false);\r\n  const [playerReady, setPlayerReady] = useState(false);\r\n\r\n  const player: any = useRef();\r\n  const ref = (p) => (player.current = p);\r\n\r\n  const handleReady = () => setPlayerReady(true);\r\n\r\n  useEffect(() => {\r\n    if (playerReady) {\r\n      player.current.seekTo(sequence.start, \"seconds\");\r\n      setPlaying(true);\r\n    }\r\n  }, [playerReady]);\r\n\r\n  const handleReplay = () => {\r\n    player.current.seekTo(sequence.start, \"seconds\");\r\n    setPlaying(true);\r\n  };\r\n\r\n  const handleProgress = ({ playedSeconds }) => {\r\n    if (sequence.stop && playedSeconds >= sequence.stop) {\r\n      setPlaying(false);\r\n      setGlobalState(MODAL, {\r\n        component: \"replay\",\r\n        props: {\r\n          onReplay: handleReplay\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"sequence_viewer\">\r\n      <ReactPlayer\r\n        className={\"player_viewer\"}\r\n        height=\"100%\"\r\n        width=\"100%\"\r\n        playing={playing}\r\n        ref={ref}\r\n        url={sequence.url}\r\n        onReady={handleReady}\r\n        onProgress={handleProgress}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"./Viewer.scss\";\r\n\r\nimport { PlaylistViewer } from \"../components/Viewer/PlaylistViewer\";\r\nimport { VideoViewer } from \"../components/Viewer/VideoViewer\";\r\nimport { SequenceViewer } from \"../components/Viewer/SequenceViewer\";\r\nimport { request } from \"../utils/request\";\r\n\r\nexport const Viewer = ({\r\n  match: {\r\n    params: { type, id }\r\n  }\r\n}) => {\r\n  const [item, setItem] = useState();\r\n\r\n  const getItem = async () => {\r\n    if (type === \"playlist\") {\r\n      const playlist = await getPlaylist(id);\r\n      setItem(playlist);\r\n    } else if (type === \"video\") {\r\n      const video = await getVideo(id);\r\n      setItem(video);\r\n    } else {\r\n      const sequence = await getSequence(id);\r\n      setItem(sequence);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (type && id) {\r\n      getItem();\r\n    } else {\r\n      alert(\"Type and Id needs to be provided: /video/someid323423\");\r\n    }\r\n  }, [type, id, getItem]);\r\n\r\n  return (\r\n    <div className=\"viewer grid overflow-h\">\r\n      {!item ? (\r\n        <div className=\"centered-grid bg-grey-dark\">Loading...</div>\r\n      ) : type === \"playlist\" ? (\r\n        <PlaylistViewer {...item} />\r\n      ) : type === \"video\" ? (\r\n        <VideoViewer video={item} />\r\n      ) : (\r\n        <SequenceViewer sequence={item} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Have these request locally to not conflict with other states and request handlers\r\n// Viewer should always work completely independent\r\n// Will move to own app later\r\nconst getPlaylist = async (id) => {\r\n  try {\r\n    const res = await request(\"viewer\", \"/playlist/\" + id);\r\n    const data = await res.json();\r\n    return data;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return error;\r\n  }\r\n};\r\nconst getVideo = async (id) => {\r\n  try {\r\n    const res = await request(\"viewer\", \"/video/\" + id);\r\n    const data = await res.json();\r\n    return data;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return error;\r\n  }\r\n};\r\nconst getSequence = async (id) => {\r\n  try {\r\n    const res = await request(\"viewer\", \"/sequence/\" + id);\r\n    const data = await res.json();\r\n    return data;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return error;\r\n  }\r\n};\r\n","import React from \"react\";\r\n\r\nexport const ErrorPage404 = () => {\r\n  return <div>404: Page Not Found</div>;\r\n};\r\n","import React from \"react\";\r\n\r\nexport const ErrorPage403 = () => {\r\n  return <div>403: You have no permission to access this page.</div>;\r\n};\r\n","import React from \"react\";\nimport \"./App.scss\";\nimport \"./forms/forms.scss\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\n\nimport { Auth } from \"./views/Auth\";\nimport { Dashboard } from \"./views/Dashboard\";\nimport { useGlobalState } from \"react-global-state-hook\";\nimport { Modal } from \"./components/Modal\";\nimport { Sequencer } from \"./views/Sequencer\";\nimport { Landing } from \"./views/Landing\";\nimport { Viewer } from \"./views/Viewer\";\nimport { AUTH } from \"./services/auth\";\nimport { ErrorPage404 } from \"./views/404\";\nimport { ErrorPage403 } from \"./views/403\";\n\nconst App = () => {\n  const [auth] = useGlobalState(AUTH, \"pending\");\n\n  return (\n    <div className=\"app\">\n      <BrowserRouter>\n        <Switch>\n          <Route exact path=\"/\" component={Landing} />\n          <Route exact path=\"/viewer/:type/:id\" component={Viewer} />\n          <Route exact path=\"/auth/:type\" component={Auth} />\n          {auth === \"pending\" ? (\n            <div className=\"centered-grid\">\n              <h3>Loading App...</h3>\n            </div>\n          ) : (\n            auth === true && (\n              <>\n                <Route exact path=\"/dashboard\" component={Dashboard} />\n                <Route exact path=\"/sequencer/:id\" component={Sequencer} />\n              </>\n            )\n          )}{\" \"}\n          <Route exact path=\"/403\" component={ErrorPage403} />\n          <Route path={[\"*\", \"/404\"]} component={ErrorPage404} />\n        </Switch>\n        <Modal />\n      </BrowserRouter>\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { initFirebase, setAuthObserver } from \"./services/auth\";\n\ninitFirebase();\nsetAuthObserver();\n\n// @ts-ignore\nString.prototype.capitalize = function () {\n  return this.charAt(0).toUpperCase() + this.slice(1);\n};\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}